var AssetAdapter=function(){function e(){}var t=(__define,e),a=t.prototype;return a.getAsset=function(e,t,a){function i(i){t.call(a,i,e)}if(RES.hasRes(e)){var n=RES.getRes(e);n?i(n):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var controller;!function(e){var t=function(){function t(){this.firstlogin=!1,this.index=1,this.loader=new e.loader.LoaderManager,this.gameMainController=new mainUI.GameMainController,this.taskController=new task.TaskController,this.rankStarController=new rankStar.RankStarController,this.payController=new pay.PayController,this.fansRecruitController=new fansRecruit.FansRecruitController,this.rankGroupController=new rankGroup.RankGroupController,this.rankGroupContributionController=new rankGroupContribution.RankGroupContributionController,this.rankuserContributionController=new rankUserContribution.RankUserContributionController,this.uploadController=new upload.UploadController,this.newStarController=new newstar.NewStarController,this.weekPushController=new weekPush.WeekPushController,this.starFansTVController=new starfanstv.StarFansTVController,this.monthTieController=new monthTie.MonthTieController,this.signController=new signIn.signInController,this.aggregationController=new aggregation.AggregationController,this.groupManagerController=new groupManagement.GroupManagerController,this.groupManagerAuditController=new groupManagementAudit.GroupManagementAuditController,this.headLinesController=new headLine.HeadLineController,this.headLineItemInforController=new headLineItemInforation.HeadLineItemInfoController,this.gabageController=new garbageCollection.GarbageCollectionController,this.topGroupRankController=new topRank.TopRankGroupController,this.sweepsTasksController=new sweepsTasks.SweepsTasksController,this.buyTicketActiveController=new buyTicketActive.BuyTicketController,window.contro=this}var a=(__define,t),i=a.prototype;return i.loadPicMask=function(e){0==e?GameApp.Manager.viewManager.maskStage2(.4,!0):(1==GameApp.Manager.dataManager.entenVisiter?GameApp.Manager.controllerManager.gameMainController.hide():2==GameApp.Manager.dataManager.entenVisiter&&(GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.rankStarController.hide()),GameApp.Manager.viewManager.clearMask2())},i.start=function(e){void 0===e&&(e=null);var t=this;GameApp.Manager.updateLoop=!0,this.loader.mainLoading(["public"],function(){var a=GameApp.Manager.dataManager.bid_save=e?e:GameApp.Manager.dataManager.bid,i=(new md5).hex_md5(GameApp.Manager.dataManager.uid+a+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/mainPage",{user_id:GameApp.Manager.dataManager.uid,bid:a,group_openid:GameApp.Manager.dataManager.group_openid,reset:GameApp.Manager.dataManager.reset,sign:i},function(e){1==e.st?(t.obj=e,GameApp.Manager.dataManager.visitor=e.visitor,GameApp.Manager.dataManager.level=e.star_level,GameApp.Manager.dataManager.mts=e.monthly_ts,GameApp.Manager.dataManager.star_name=window.hexToDec(e.star_name),GameApp.Manager.dataManager.user_name=window.hexToDec(e.user_name),GameApp.Manager.dataManager.user_pic=e.user_pic?e.user_pic:GameApp.Manager.dataManager.user_pic,GameApp.Manager.dataManager.exp=e.exp,GameApp.Manager.dataManager.need_exp=e.need_exp,GameApp.Manager.dataManager.nowImg=e.img,GameApp.Manager.dataManager.shadow_img=e.shadow_img,GameApp.Manager.dataManager.head_img=e.head_img,GameApp.Manager.dataManager.lucystar=e.lucky_star,GameApp.Manager.dataManager.egg_cd=e.egg_cd,GameApp.Manager.dataManager.egg_time=(new Date).getTime(),GameApp.Manager.dataManager.heart_num=e.heart_num,GameApp.Manager.dataManager.appid=e.appid,GameApp.Manager.dataManager.monthly_ts=e.monthly_ts,GameApp.Manager.dataManager.isFollower=e.follow,GameApp.Manager.dataManager.time_limited_activity_free=e.time_limited_activity_free,GameApp.Manager.dataManager.buluo=e.buluo,GameApp.Manager.dataManager.haiquan=e.haiquan,flower.FlowerUI.getInstance().initData(e.gift),0==GameApp.Manager.dataManager.visitor&&(GameApp.Manager.dataManager.resetState=e.resetState),t.firstlogin?(socketio.IoConnect.getInstance().initPomelo(a,GameApp.Manager.dataManager.uid),t.gameMainController.show(),GameApp.Manager.viewManager.gameMainManager.initData(e)):socketio.IoConnect.getInstance().initPomelo(a,GameApp.Manager.dataManager.uid,t.pomeloOK,t),0==GameApp.Manager.dataManager.visitor?(GameApp.Manager.viewManager.backGround.loadPic(GameApp.Manager.dataManager.back_img,0,0,function(){GameApp.Manager.viewManager.clearMask2()},this),2==GameApp.Manager.dataManager.entenVisiter?GameApp.Manager.controllerManager.rankStarController.hide():1==GameApp.Manager.dataManager.entenVisiter):(t.loadPicMask(0),GameApp.Manager.viewManager.backGround.loadPic(e.img,0,0,function(){t.loadPicMask(1)},this)),GameApp.Manager.controllerManager.loader.errorLoader("正在连接...")):(console.log("注册失败:"+e.st),GameApp.Manager.controllerManager.loader.errorLoader("加载失败 st:"+e.st))},!0,this)},this)},i.pomeloOK=function(){this.gameMainController.show(),GameApp.Manager.viewManager.gameMainManager.initData(this.obj),this.goUIModule(),GameApp.Manager.controllerManager.loader.endLoader()},i.goUIModule=function(){GameApp.Manager.dataManager.starRankShare?(GameApp.Manager.dataManager.starRankShare=null,setTimeout(GameApp.Manager.viewManager.gameMainUI.mainUI.rankStar_tap,0)):GameApp.Manager.dataManager.inviteGroupFriends?(GameApp.Manager.dataManager.inviteGroupFriends=null,setTimeout(GameApp.Manager.viewManager.gameMainUI.mainUI.qiandao_tap,0)):GameApp.Manager.dataManager.inviteGroupFriendsForMass?(GameApp.Manager.dataManager.inviteGroupFriendsForMass=null,setTimeout(function(){GameApp.Manager.viewManager.gameMainUI.mainUI.jijie_tap(null)},0)):GameApp.Manager.dataManager.inviteGroupFriendsForCrowdfunding?(GameApp.Manager.dataManager.inviteGroupFriendsForCrowdfunding=null,setTimeout(GameApp.Manager.viewManager.gameMainUI.mainUI.zhongchou_tap,0)):GameApp.Manager.dataManager.shareUserStarWorksUserId?(GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.gabageController.show(parseInt(GameApp.Manager.dataManager.shareUserStarWorksUserId),GameApp.Manager.dataManager.bid,2)):GameApp.Manager.dataManager.shareTimeLimitedActivity&&(GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.sweepsTasksController.show())},i.onPostComplete=function(e){setTimeout(function(){GameApp.Manager.viewManager.labelAnimation("成功")},2e3);var t=e.currentTarget;console.log("post data : ",t.response),this.gameMainController.show()},i.onPostIOError=function(e){setTimeout(function(){var t="";for(var a in e)t+=a+":"+e[a]+"    ";GameApp.Manager.viewManager.labelAnimation("失败:"+t)},2e3),console.log("post error : "+e)},i.onPostProgress=function(e){setTimeout(function(){GameApp.Manager.viewManager.labelAnimation("进度")},100),console.log("post progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},i.PomeloOK=function(){},i.startGameData=function(){},i.setData=function(e){GameApp.Manager.viewManager.loading.remove();GameApp.Manager.updateLoop=!0},t}();e.ControllerManager=t,egret.registerClass(t,"controller.ControllerManager")}(controller||(controller={}));var aggregation;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(e,t){GameApp.Manager.viewManager.aggregation.show(e,t)},a.hide=function(){GameApp.Manager.viewManager.aggregation.hide()},e}();e.AggregationController=t,egret.registerClass(t,"aggregation.AggregationController")}(aggregation||(aggregation={}));var buyTicketActive;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(){GameApp.Manager.viewManager.buyTicketActiveManager.show()},a.hide=function(){GameApp.Manager.viewManager.buyTicketActiveManager.hide()},e}();e.BuyTicketController=t,egret.registerClass(t,"buyTicketActive.BuyTicketController")}(buyTicketActive||(buyTicketActive={}));var fansRecruit;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(){GameApp.Manager.viewManager.fansRecruitManager.show()},a.hide=function(){GameApp.Manager.viewManager.fansRecruitManager.hide()},e}();e.FansRecruitController=t,egret.registerClass(t,"fansRecruit.FansRecruitController")}(fansRecruit||(fansRecruit={}));var mainUI;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.showMain=function(){GameApp.Manager.viewManager.gameMainManager.showMain()},a.show=function(){GameApp.Manager.viewManager.gameMainManager.show()},a.showTask=function(){GameApp.Manager.controllerManager.taskController.show()},a.hide=function(){GameApp.Manager.viewManager.gameMainManager.hide()},e}();e.GameMainController=t,egret.registerClass(t,"mainUI.GameMainController")}(mainUI||(mainUI={}));var garbageCollection;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(e,t,a){GameApp.Manager.viewManager.garbageCollectionManager.show(e,t,a)},a.hide=function(){GameApp.Manager.viewManager.garbageCollectionManager.hide()},e}();e.GarbageCollectionController=t,egret.registerClass(t,"garbageCollection.GarbageCollectionController")}(garbageCollection||(garbageCollection={}));var groupManagementAudit;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(e,t){GameApp.Manager.viewManager.groupManagerAudit.show(e,t)},a.hide=function(){GameApp.Manager.viewManager.groupManagerAudit.hide()},e}();e.GroupManagementAuditController=t,egret.registerClass(t,"groupManagementAudit.GroupManagementAuditController")}(groupManagementAudit||(groupManagementAudit={}));var groupManagement;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(e){GameApp.Manager.viewManager.groupManager.show(e)},a.hide=function(){GameApp.Manager.viewManager.groupManager.hide()},e}();e.GroupManagerController=t,egret.registerClass(t,"groupManagement.GroupManagerController")}(groupManagement||(groupManagement={}));var headLine;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(e,t,a){GameApp.Manager.viewManager.headLinesManager.show(e,t,a)},a.hide=function(){GameApp.Manager.viewManager.headLinesManager.hide()},e}();e.HeadLineController=t,egret.registerClass(t,"headLine.HeadLineController")}(headLine||(headLine={}));var headLineItemInforation;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(e,t,a){GameApp.Manager.viewManager.headLinesItemInfoManager.show(e,t,a)},a.hide=function(){GameApp.Manager.viewManager.headLinesItemInfoManager.hide()},e}();e.HeadLineItemInfoController=t,egret.registerClass(t,"headLineItemInforation.HeadLineItemInfoController")}(headLineItemInforation||(headLineItemInforation={}));var monthTie;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(e,t){GameApp.Manager.viewManager.monthTieManager.show(e,t)},a.hide=function(){GameApp.Manager.viewManager.monthTieManager.hide()},e}();e.MonthTieController=t,egret.registerClass(t,"monthTie.MonthTieController")}(monthTie||(monthTie={}));var newstar;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(){GameApp.Manager.viewManager.newStarManager.show()},a.hide=function(){GameApp.Manager.viewManager.newStarManager.hide()},a.showSerach=function(e){GameApp.Manager.viewManager.newStarManager.showSerach(e)},a.hideSerach=function(){GameApp.Manager.viewManager.newStarManager.hideSerach()},e}();e.NewStarController=t,egret.registerClass(t,"newstar.NewStarController")}(newstar||(newstar={}));var pay;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(e,t,a){GameApp.Manager.viewManager.payManager.show(e,t,a)},a.hide=function(){GameApp.Manager.viewManager.payManager.hide()},e}();e.PayController=t,egret.registerClass(t,"pay.PayController")}(pay||(pay={}));var rankGroupContribution;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(e){GameApp.Manager.viewManager.rankGroupContributionManager.show(e)},a.hide=function(){GameApp.Manager.viewManager.rankGroupContributionManager.hide()},e}();e.RankGroupContributionController=t,egret.registerClass(t,"rankGroupContribution.RankGroupContributionController")}(rankGroupContribution||(rankGroupContribution={}));var rankGroup;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(){GameApp.Manager.viewManager.rankGroupManager.show()},a.hide=function(){GameApp.Manager.viewManager.rankGroupManager.hide()},e}();e.RankGroupController=t,egret.registerClass(t,"rankGroup.RankGroupController")}(rankGroup||(rankGroup={}));var rankStar;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(){GameApp.Manager.viewManager.rankStarManager.show()},a.hide=function(){GameApp.Manager.viewManager.rankStarManager.hide()},e}();e.RankStarController=t,egret.registerClass(t,"rankStar.RankStarController")}(rankStar||(rankStar={}));var rankUserContribution;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(e,t){GameApp.Manager.viewManager.rankUserContributionManager.show(e,t)},a.hide=function(){GameApp.Manager.viewManager.rankUserContributionManager.hide()},e}();e.RankUserContributionController=t,egret.registerClass(t,"rankUserContribution.RankUserContributionController")}(rankUserContribution||(rankUserContribution={}));var signIn;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(e){GameApp.Manager.viewManager.sign.show(e)},a.hide=function(){GameApp.Manager.viewManager.sign.hide()},e}();e.signInController=t,egret.registerClass(t,"signIn.signInController")}(signIn||(signIn={}));var starfanstv;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(){GameApp.Manager.viewManager.starFanTVManager.show()},a.hide=function(){GameApp.Manager.viewManager.starFanTVManager.hide()},e}();e.StarFansTVController=t,egret.registerClass(t,"starfanstv.StarFansTVController")}(starfanstv||(starfanstv={}));var sweepsTasks;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(){GameApp.Manager.viewManager.sweepsTasksManager.show()},a.hide=function(){GameApp.Manager.viewManager.sweepsTasksManager.hide()},e}();e.SweepsTasksController=t,egret.registerClass(t,"sweepsTasks.SweepsTasksController")}(sweepsTasks||(sweepsTasks={}));var task;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(e){void 0===e&&(e=-1),GameApp.Manager.viewManager.taskManager.show(e)},a.hide=function(){GameApp.Manager.viewManager.taskManager.hide()},e}();e.TaskController=t,egret.registerClass(t,"task.TaskController")}(task||(task={}));var topRank;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(){GameApp.Manager.viewManager.topRankGroupManager.show()},a.hide=function(){GameApp.Manager.viewManager.topRankGroupManager.hide()},e}();e.TopRankGroupController=t,egret.registerClass(t,"topRank.TopRankGroupController")}(topRank||(topRank={}));var upload;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(){GameApp.Manager.viewManager.uploadManager.show()},a.hide=function(){GameApp.Manager.viewManager.uploadManager.hide()},e}();e.UploadController=t,egret.registerClass(t,"upload.UploadController")}(upload||(upload={}));var weekPush;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return a.show=function(){GameApp.Manager.viewManager.weekPushManage.show()},a.hide=function(){GameApp.Manager.viewManager.weekPushManage.hide()},e}();e.WeekPushController=t,egret.registerClass(t,"weekPush.WeekPushController")}(weekPush||(weekPush={}));var controller;!function(e){var t;!function(e){var t=function(){function e(){this.loadindex=0,this._progress=null,this._complete=null,this.autoRemoveView=!1}var t=__define,a=e,i=a.prototype;return i.preloading=function(e,t){this.scope=t,this.startLoading(["proload"],null,e)},i.mainLoading=function(e,t,a){this.scope=a;for(var i=0,n=0;n<e.length;n++)RES.loadGroup(e[n],n),RES.isGroupLoaded(e[n])||i++;i>0?(GameApp.Manager.viewManager.loading.show(),this.autoRemoveView=!0,this.startLoading(e,function(e){GameApp.Manager.viewManager.loading.setProgress(e)},function(){t.call(a)})):t.call(a)},i.moduleLoading=function(e,t,a){this.loadindex=0,this.scope=a,this._complete=t,this.loadingGroups=e,this.autoRemoveView=!0;for(var i=0,n=0;n<this.loadingGroups.length;n++)RES.loadGroup(this.loadingGroups[n],n),RES.isGroupLoaded(this.loadingGroups[n])||i++;if(0==i)return void(this._complete&&this._complete.call(this.scope?this.scope:this,event));GameApp.Manager.viewManager.loading.showModule(),this._progress=function(e){GameApp.Manager.viewManager.loading.setProgress(e)},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);for(var n=0;n<this.loadingGroups.length;n++)RES.loadGroup(this.loadingGroups[n],n)},i.starLoading=function(e,t){},i.startLoading=function(e,t,a){this.loadindex=0,this.loadingGroups=e,this._progress=t,this._complete=a,this.onConfigComplete(null)},i.loadRes=function(e){this._complete=e,this.onc(null)},i.onc=function(e){this._complete&&this._complete.call(this.scope?this.scope:this,e)},i.onConfigComplete=function(e){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);for(var t=0;t<this.loadingGroups.length;t++)RES.loadGroup(this.loadingGroups[t],this.loadingGroups.length-t)},i.onResourceLoadComplete=function(e){e.groupName==this.loadingGroups[this.loadingGroups.length-1]?(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.autoRemoveView&&GameApp.Manager.viewManager.loading.removeM(),this._complete&&this._complete.call(this.scope?this.scope:this,e)):this.loadindex++},i.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},i.onResourceProgress=function(e){this._progress&&this._progress(e)},t(i,"AutoRemoveView",void 0,function(e){this.autoRemoveView=e}),i.endLoader=function(){GameApp.Manager.viewManager.loading&&(GameApp.Manager.viewManager.loading.resetPropress(),GameApp.Manager.viewManager.loading.end(),GameApp.Manager.viewManager.loading.remove())},i.errorLoader=function(e){GameApp.Manager.viewManager.loading&&GameApp.Manager.viewManager.loading.error(e)},e}();e.LoaderManager=t,egret.registerClass(t,"controller.loader.LoaderManager")}(t=e.loader||(e.loader={}))}(controller||(controller={}));var controller;!function(e){var t;!function(t){var a=function(){function t(){this.reload=!0,this.loadNum=0,this.loadTotal=2}var a=(__define,t),i=a.prototype;return t.getInstance=function(){return this._intance||(this._intance=new t),this._intance},i.load=function(e,t,a,i){this.starurl=e,this.nexturl=t,this.fun=a,this.scope=i,this.startLoad()},i.getImg=function(t,a,i){this.starurl!=t&&t?(this.starurl=t,this.nexturl=a,RES.getResByUrl(this.starurl,function(a){i.source=a,e.loader.LoadStar.RES.star.starimg=a,RES.getResByUrl(t,this.onCompFun1,this)},this)):i.source||(i.source=e.loader.LoadStar.RES.star.starimg)},i.getNext=function(t,a,i){this.starurl!=t&&t?(this.starurl=t,this.nexturl=a,RES.getResByUrl(this.nexturl,function(a){i.source=a,e.loader.LoadStar.RES.star.nextimg=a,RES.getResByUrl(t,this.onCompFun2,this)},this)):i.source||(i.source=e.loader.LoadStar.RES.star.nextimg)},i.startLoad=function(){RES.getResByUrl(this.starurl,this.onCompFun,this)},i.onCompFun=function(t){e.loader.LoadStar.RES.star.starimg=t,RES.getResByUrl(this.nexturl,this.onCompFun1,this),this.fun.call(this.scope,t)},i.onCompFun1=function(t){e.loader.LoadStar.RES.star.nextimg=t,this.reload=!1},i.onCompFun2=function(t){e.loader.LoadStar.RES.star.starimg=t},t.RES={star:{starimg:egret.Texture,nextimg:egret.Texture}},t}();t.LoadStar=a,egret.registerClass(a,"controller.loader.LoadStar")}(t=e.loader||(e.loader={}))}(controller||(controller={}));var controller;!function(e){var t;!function(e){var t=function(e){function t(){e.call(this),this.ismask=!0,this.dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(t,e);var a=(__define,t),i=a.prototype;return i.load_COMPLETE=function(e){GameApp.Manager.viewManager.removeLoading(),this.removeEventListener(egret.Event.COMPLETE,this.load_COMPLETE,this);var t=this.data,a=JSON.parse(t.toString());this.yu?this.callback.call(this.yu,a):this.callback(a),this.callback=null,this.yu=null},i.sendJson=function(e,t,a,i,n,s){void 0===i&&(i=!0),void 0===s&&(s=!0),this.ismask=s,s&&GameApp.Manager.viewManager.createLoading(),this.yu=n,this.callback=a;var r="";if(t){for(var o in t)r+=o+"="+t[o]+"&";r.length>0&&(r=r.substring(0,r.length-1))}this.addEventListener(egret.Event.COMPLETE,this.load_COMPLETE,this);var h=new egret.URLRequest(e);h.method=egret.URLRequestMethod.GET,h.data=new egret.URLVariables(r),this.load(h)},i.sendJsonp=function(e,t,a,i,n){this.yu=n,this.callback=i;var s="";if(a){for(var r in a)s+=r+"="+a[r]+"&";s.length>0&&(s="&"+s.substring(0,s.length-1))}var o=new egret.URLRequest(e+"?"+t+"=");o.method=egret.URLRequestMethod.POST,this._request=o,JsonpReq.process(this,s),this.addEventListener(egret.Event.COMPLETE,this.load_COMPLETE1,this)},i.load_COMPLETE1=function(e){e.stopPropagation(),console.log("返回jsonp"),this.removeEventListener(egret.Event.COMPLETE,this.load_COMPLETE1,this);var t=this.data;console.log("返  54回jsonp:"+t.st),this.yu?this.callback.call(this.yu,t):this.callback(t),this.yu=null,this.callback=null},i.onPostProgress=function(e){console.log("get progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},i.onGetIOError=function(e){console.log("get error : "+e)},t}(egret.URLLoader);e.BaseURLLoader=t,egret.registerClass(t,"controller.util.BaseURLLoader")}(t=e.util||(e.util={}))}(controller||(controller={}));var Util=function(){function e(){}var t=(__define,e);t.prototype;return e.sendJson1=function(e,t,a,i,n,s){void 0===i&&(i=!0),void 0===s&&(s=!0);var r=new controller.util.BaseURLLoader;r.sendJsonp(e,"callback",t,a,n)},e.sendJsonp=function(e,t,a,i){var n=new controller.util.BaseURLLoader;n.sendJsonp(e,"callback",t,a,i)},e}();egret.registerClass(Util,"Util");var data;!function(e){var t=function(){function e(){this.visitor=0,this.group_openid="E1EF9D8420F0FCFDA2FECDC165D3D5F6",this.wts="",this.mts="",this.uid=11,this.star_name="",this.user_name="",this.user_pic="",this.back_img="",this.head_img="",this.starRankShare=null,this.inviteGroupFriends=null,this.inviteGroupFriendsForMass=null,this.inviteGroupFriendsForCrowdfunding=null,this.shareUserStarWorksUserId=null,this.group_level=0,this.group_exp=0,this.group_need_exp=0,this.is_owner=!1,this.level=0,this.hot=0,this.need_exp=0,this.exp=0,this.lucystar=0,this.egg_cd=0,this.egg_time=0,this.user_level=0,this.user_now=0,this.user_total=0,this.heart_num=0,this.gift_cd=0,this.gift_time=0,this.sign_x=document.body.clientWidth/750*670,this.sign_y=document.body.clientWidth/750*90,this.sc=document.body.clientWidth/750,this.IP="http://sf.xintiao100.com",this.Port="80",this.topEnter=1,this.entenVisiter=0,this.resetState=0,this.reset=0,this.isFollower=0,this.buluo=0,this.haiquan=0}var t=__define,a=e,i=a.prototype;return e.getGiftName=function(e){var t="";switch(e){case 1:t="千纸鹤";break;case 2:t="荧光棒";break;case 3:t="玫瑰";break;case 4:t="皇冠";break;case 5:t="守护天使";break;case 6:t="真爱红包";break;case 11:t="助威"}return t},e.getGroupNameByLevel=function(e){var t="";switch(Math.ceil(e/9)){case 1:t="星粉团"+this.getGroupLevelByLevel(e);break;case 2:t="超粉团"+this.getGroupLevelByLevel(e);break;case 3:t="天字团"+this.getGroupLevelByLevel(e)}return t},e.getGroupLevelByLevel=function(e){var t=0;return t=e%9==0?9:e%9},e.getGroupColorByLevel=function(e){var t=Math.ceil(e/9),a=3003904;switch(t){case 1:a=3003904;break;case 2:a=2795768;break;case 3:a=16282655}return a},e.getintimateIcon=function(e){return"p_barrage_icon"+Math.ceil(e/9)},e.getintimateLevel=function(e){var t=0;return t=e%9==0?9:e%9},e.getintimateColor=function(e){var t=13448960;switch(e){case 1:t=13482646;break;case 2:t=13480843;break;case 3:t=12178414;break;case 4:t=12578815;break;case 5:t=12357519;break;case 6:t=13461561;break;case 7:t=13461641;break;case 8:t=13448960}return t},e.getintimateName=function(e){var t="路人";switch(e){case 1:t="路人";break;case 2:t="偶遇";break;case 3:t="在意";break;case 4:t="动心";break;case 5:t="倾心";break;case 6:t="爱慕";break;case 7:t="钟爱";break;case 8:t="挚爱"}return t},t(i,"Obj",function(){return this.obj},function(e){this.obj=e}),e.bb="0.2.2.1",e.RES={star:{starimg:egret.Texture}},e.userMSG={1:{name:"纸鹤达人",desc:"累计送出n只纸鹤"},2:{name:"缔约心钻",desc:"累计消费n个钻石"},3:{name:"礼物连击",desc:"助威连击达到n"}},e.userStarPoint={1:[{x:51,y:120}],2:[{x:39,y:120},{x:70,y:120}],3:[{x:51,y:120},{x:22,y:120},{x:81,y:120}],4:[{x:12,y:120},{x:38,y:120},{x:67,y:120},{x:92,y:120}],5:[{x:51,y:120},{x:22,y:120},{x:81,y:120},{x:5,y:120},{x:101,y:120}]},e}();e.DataManager=t,egret.registerClass(t,"data.DataManager")}(data||(data={}));var data;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.sendFlower=1,e.sendEgg=2,e.opentx=6,e.triggerHB=7,e.medal3=12,e.hongbao=13,e.hongbaoClick=14,e.sendjijie=9,e.receive=16,e.sendGiftCf=8,e.getGiftCf=15,e.addLucyStar=17,e.sendTalk=11,e.liveInit=18,e.receiveTalk=19,e.medal3receive=20,e.getAndReceiveAnnounceGroup=21,e}();e.PomeloData=t,egret.registerClass(t,"data.PomeloData")}(data||(data={}));var data;!function(e){var t=function(){function e(){this.soundArr=[],this.soundNameArr=["click_mp3","love_mp3","record_mp3","guardian_mp3","clearegg_mp3","rengdan_mp3"]}var t=(__define,e),a=t.prototype;return e.getInstance=function(){return this._intance||(this._intance=new e,this._intance.init()),this._intance},a.init=function(){},a.clickSound=function(e){void 0===e&&(e=0);var t=new egret.Sound;t=RES.getRes(this.soundNameArr[e])},e}();e.Sounds=t,egret.registerClass(t,"data.Sounds")}(data||(data={}));var Tools=function(){function e(){this.iphone=0,this.shortNumberTT=function(e){var t,a=parseInt(e,10);return t=a>=1e4?Math.floor(a/1e4)+"万":a}}var t=(__define,e),a=t.prototype;return e.getInstance=function(){return this._intance},a.resetSc=function(e){for(var t in e){var a=e[t],i=a[0],n=!1,s=!1;a.length>1&&(n=a[1]),a.length>2&&(s=a[2]),i.y=i.y*GameApp.sc,n&&(i.width=i.width*GameApp.sc),s&&(i.height=i.height*GameApp.sc)}},a.resetScGroup=function(e){for(var t=[],a=0;a<e.numElements;a++){var i=e.getElementAt(a);t.push([i,!0,!0])}this.resetSc(t)},a.getTime=function(e){var t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();return t+"-"+a+"-"+i},a.getHour=function(e){var t=new Date(e),a=t.getHours(),i=t.getMinutes();return 9>i?a+":"+i+"0":a+":"+i},a.getMonth=function(e){var t=new Date(e),a=t.getMonth()+1,i=t.getDate();return a+"月"+i+"日"},a.getTime3=function(e){var t=e.getFullYear(),a=e.getMonth();return 0==a?(t+=1,t+"年12月"):t+"年"+a+"月"},a.getTime4=function(e,t){var a=e.getFullYear(),i=e.getMonth()+1,n=e.getMonth()+1,s=e.getDate();return a+"年第"+t+"期("+n+".1-"+i+"."+s+")"},a.getTime6=function(e){var t,a,i,n,s=new Date(e-864e5),r=s.getFullYear(),o=s.getMonth()+1,h=s.getDate(),l=e-6048e5,g=new Date(l),c=g.getMonth()+1,d=g.getDate();return t=9>=o?"0"+o:o+"",a=9>=h?"0"+h:h+"",i=9>=c?"0"+c:c+"",n=9>=d?"0"+d:d+"",r+"."+i+"."+n+"-"+t+"."+a},a.getTime2=function(e){var t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();return t+"."+a+"."+i},a.getTime5=function(e){var t=e.getHours(),a=e.getMinutes(),i=e.getSeconds();return t+":"+a+":"+i},a.getUrlAttribute=function(e){var t=location.search.substring(1),a=t.indexOf(e+"=");if(a>-1){var i=t.substring(a);return i.substring((e+"=").length,i.indexOf("&")>-1?i.indexOf("&"):i.length)}return null},a.isIphone=function(){if(0==this.iphone){var e=navigator.userAgent.toLowerCase();return e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1||e.indexOf("iphone")>-1?(this.iphone=1,!0):(this.iphone=2,!1)}return 1==this.iphone?!0:!1},a.formatTime=function(e){var t=this.setTimeStyle(Math.floor(e/3600)),a=this.setTimeStyle(Math.floor((e-3600*parseInt(t))/60)),i=this.setTimeStyle(e-3600*parseInt(t)-60*parseInt(a));return t+":"+a+":"+i},a.formatTime2=function(e){var t=this.setTimeStyle(parseInt(e%864e5/36e5+"")),a=this.setTimeStyle(parseInt(e%36e5/6e4+"")),i=this.setTimeStyle(parseInt(e%6e4/1e3+""));return t+":"+a+":"+i},a.formatTime22=function(e){var t=new Date(e);if(t.getDate()){var a=t.getDate(),i=t.getHours()+24*a;return i+":"+t.getMinutes()+":"+t.getSeconds()}return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},a.formatTime4=function(e){var t=this.setTimeStyle(parseInt(e%36e5/6e4+"")),a=this.setTimeStyle(parseInt(e%6e4/1e3+""));return t+":"+a},a.formatTime5=function(e){var t=e.getMinutes(),a=e.getSeconds();return t+":"+a},a.formatTime3=function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},a.formatTime1=function(e){return e>=3600?Math.floor(e/3600)+"小时":e>=60?Math.floor(e/60)+"分":e+"秒"},a.setTimeStyle=function(e){return e>0&&10>e?"0"+e.toString():0==e?"00":e.toString()},a.isObject=function(e){var t=!1;if(e){for(var a in e){t=!0;break}return t}return!1},a.getPoint=function(e){var t=e.localToGlobal();return t},a.getRandomByNum=function(e,t){if(e==t)return e;var a=e,i=Math.abs(t-e),n=e>t?t:e;return a=Math.random()*i+n},a.getCricle=function(e,t,a,i,n){var s=new egret.Shape;return s.graphics.beginFill(i),s.graphics.drawCircle(0,0,a/2),s.graphics.endFill(),s.x=e,s.y=t,n.addChild(s),s},a.getCricleMask=function(e,t,a,i){var n=new egret.Shape;return n.graphics.beginFill(16777215),n.graphics.drawCircle(0,0,a/2),n.graphics.endFill(),n.x=e,n.y=t,i.addChild(n),n},a.getRoundRShape=function(e,t,a,i,n,s,r,o,h){if(void 0===o&&(o=1),void 0===h&&(h=null),h)return h.graphics.clear(),h.graphics.beginFill(r,o),h.graphics.drawRoundRect(e,t,a,i,n,s),h.graphics.endFill(),h;var l=new egret.Shape;return l.graphics.beginFill(r,o),l.graphics.drawRoundRect(e,t,a,i,n,s),l.graphics.endFill(),l},a.getShape=function(e,t,a,i,n,s,r,o,h){void 0===o&&(o=-1),void 0===h&&(h=-1);var l;return e?(e.graphics.clear(),l=e):l=new egret.Shape,o>=0&&l.graphics.lineStyle(1,o),h>=0&&l.graphics.beginFill(h),l.graphics.drawRoundRect(i,n,t,a,s,r),l.graphics.endFill(),l},a.getSp=function(e,t,a,i,n){var s=new egret.Shape;return s.graphics.beginFill(n),s.graphics.drawRect(a,i,e,t),s.graphics.endFill(),s},a.getTextLenChar=function(e){for(var t=0,a=0;a<e.length;a++){var i=e.charCodeAt(a);t+=i>=0&&255>=i?1:(window.isChinese(e.charAt(a)),2)}return t},a.getStringLen=function(e,t){for(var a=0,i="",n=0;n<e.length;n++){var s=e.charCodeAt(n);if(a+=s>=0&&255>=s?1:2,!(t>a))return i+="...";i+=e[n]}return i},e._intance=new e,e}();egret.registerClass(Tools,"Tools");var data;!function(e){var t=function(){function e(){}var t=(__define,e),a=t.prototype;return e.getInstance=function(){return this._intance||(this._intance=new e),this._intance},a.doSelect=function(){isWeixin()?selectImageWX(this.selectedHandler,this):selectImage(this.selectedHandler,this,0)},a.selectedHandler=function(e,t,a){RES.getResByUrl(t,e.compFunc,e,RES.ResourceItem.TYPE_IMAGE)},a.bytesHandler=function(e,t){console.log("大图数据:"+t)},a.compFunc=function(e){var t=new egret.Bitmap(e);
t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.removeImgReview,this),console.log("选择了:",e),this.uploadImgByTexture(e)},a.removeImgReview=function(e){e.currentTarget},a.uploadImgByTexture=function(e){console.log("texture.wid:"+e.textureWidth+",hei:"+e.textureHeight);var t=e.toDataURL("image/jpeg");this.uploadData(t)},a.uploadData=function(e){var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJsonp(GameApp.Manager.dataManager.IP+"/userUploadImage",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,imgData:e,sign:t},function(e){},this)},a.onDataComplete=function(e){var t=e.currentTarget,a=String(t.response);console.log("onDataComplete data : "+a),system.TipText.produce().open("上传成功,请等待审核")},a.onPostIOError=function(e){console.log("post error : "+e)},a.onPostProgress=function(e){console.log("post progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},e}();e.UpLoadFile=t,egret.registerClass(t,"data.UpLoadFile")}(data||(data={}));var GameApp=function(e){function t(){e.call(this),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var a=(__define,t),i=a.prototype;return i.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this);var t=egret.MainContext.deviceType==egret.MainContext.DEVICE_MOBILE?egret.StageScaleMode.FIXED_WIDTH:egret.StageScaleMode.SHOW_ALL;this.stage.scaleMode=t;var a=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",a),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json?bb="+data.DataManager.bb,"resource/")},i.onThemeLoadComplete=function(){t.sc=egret.MainContext.instance.stage.stageHeight/1206,t.Manager=new Manager(this),t.Manager.start(),this.addEventListener(egret.Event.ENTER_FRAME,t.Manager.update,t.Manager)},i.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json?bb="+data.DataManager.bb,this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},i.onResourceLoadComplete=function(e){"preload"==e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.isResourceLoadEnd=!0,this.createScene())},i.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},i.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},i.onResourceProgress=function(e){"preload"==e.groupName},i.startCreateScene=function(){var e=new eui.Button;e.label="Click!",e.horizontalCenter=0,e.verticalCenter=0,this.addChild(e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this)},i.onButtonClick=function(e){var t=new eui.Panel;t.title="Title",t.horizontalCenter=0,t.verticalCenter=0,this.addChild(t)},t.sc=1,t}(egret.DisplayObjectContainer);egret.registerClass(GameApp,"GameApp");var socketio;!function(e){var t=function(){function t(){this.pomelo=window.pomelo,this.icount=0,this.cl=!1,this.host="115.159.190.186",this.port="3014",this.cltime=0,this.initbo=!1,this.gateConnect=!1,window.ioconnect=this}var a=(__define,t),i=a.prototype;return t.getInstance=function(){return this._intance},i.connectError=function(){},i.initPomelo=function(e,t,a,i){void 0===a&&(a=null),void 0===i&&(i=null),this.fun=a,this.scope=i,this.bid=e,this.uid=t;var n=this;this.pomelo=window.pomelo,this.icount=0,this.pomelo.init({host:this.host,port:this.port,log:!0},function(){console.log("链接gate:"+e),n.pomelo.request("gate.gateHandler.queryEntry",{uid:t,bid:e},function(a){200==a.code?(console.log(a,"初始化数据dta"),clearTimeout(n.timerVar),n.gateConnect=!0,console.log("链接上gate 分配端口:"+a.host+" "+a.port+" uid:"+t+" bid:"+e,a),n.pomelo.disconnect(),n.connectServer(a.host,a.port,{uid:t,bid:e,plat_type:1,group_openid:GameApp.Manager.dataManager.group_openid})):(console.log("gete 失败",a),n.cltime=0,n.cl=!0,n.chonglian())})}),clearTimeout(this.timerVar),this.timerVar=setTimeout(function(){n.gateConnect||(n.cltime=0,n.cl=!0,n.chonglian())},2e3)},i.connectServer=function(e,t,a){console.log("链接服务器");var i=this;this.icount=1,this.pomelo.init({host:e,port:t,log:!0},function(){console.log("链接connector:",a),i.pomelo.request("connector.entryHandler.entry",a,function(e){if(200==e.code){clearTimeout(i.timerVar),i.gateConnect=!0,console.log("链接成功！",e),i.fun&&(i.fun.call(i.scope),i.fun=null,i.scope=null);var t=JSON.parse(e.data),a=t.last_msg,n=t.lastCrowdfundingOrMass,s=t.surround,r=t.redPackets,o=t.crowdfunding,h=t.groupMass,l=t.sign,g=t.star_live,c=t.group_publicity,d=t.can_buy_stars_guard_gift,u=t.stars_guard_valid;Tools.getInstance().isObject(a)&&(console.log("lastmsg:",a),i.onMessage(a,!1)),n&&(console.log("lastCrowdfunding:",n),GameApp.Manager.viewManager.gameMainUI.sendF(n,!1)),Tools.getInstance().isObject(s),r&&containmoney.ContainmoneyUI.getInstance().saveRedPackets(r),o&&task.GiftCf.setData(o),l&&signIn.SignInManager.init(l),c&&(groupXuan.TaskGroupXuan.init(c),rankGroupContribution.RankGroupContributionUI.groupsArr(c)),1==d&&(pay.PayUI.isByGift=!0,task.TaskUI.changeCanBuy()),1==u&&task.TaskUI.changePosOfTask(),g&&mainUI.MainUI.init(g),h&&(task.AggregationIcon1.setData(h),task.TaskManager.groupMass()),i.connectok(e)}else console.log("connector 失败",e),i.cltime=0,i.cl=!0,i.chonglian()})})},i.disconnect=function(){this.pomelo.disconnect()},i.connectok=function(e){this.icount=2;var t=this;this.initbo||(this.initbo=!0,this.pomelo.on("onMsg",this.onMessage),this.pomelo.on("error",function(){console.log("error")}),this.pomelo.on("onKick",function(){console.log("onKick")}),this.pomelo.on("close",function(){console.log("close:"+t.cl)}),this.pomelo.on("io-error",function(){console.log("io-error")}),this.pomelo.on("heartbeat timeout",function(){console.log("heartbeat timeout");var e=new Date;console.log("heartbeat timeout"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()),t.cltime=0,t.cl=!0,t.chonglian()}),GameApp.Manager.controllerManager.PomeloOK()),this.cl=!1},i.chonglian=function(){this.cl&&(this.icount=0,console.log("断线重连中"),this.gateConnect=!1,0==this.cltime?(this.cltime=1e3,2!=t.getInstance().icount?e.IoConnect.getInstance().initPomelo(this.bid,GameApp.Manager.dataManager.uid,this.fun,this.scope):e.IoConnect.getInstance().chonglian()):setTimeout(function(){2!=t.getInstance().icount?e.IoConnect.getInstance().initPomelo(this.bid,GameApp.Manager.dataManager.uid,this.fun,this.scope):e.IoConnect.getInstance().chonglian()},this.cltime))},i.onMessage=function(e,t){void 0===t&&(t=!0);var a=JSON.parse(e.data);switch(e.type){case data.PomeloData.sendFlower:GameApp.Manager.viewManager.gameMainUI.sendF(a,t);break;case data.PomeloData.sendEgg:break;case data.PomeloData.liveInit:mainUI.MainUI.init(a);break;case data.PomeloData.receiveTalk:live.LiveTalkChat.receiveTalk(a);break;case data.PomeloData.hongbao:containmoney.ContainmoneyUI.getInstance().onMsg(a);break;case data.PomeloData.hongbaoClick:GameApp.Manager.viewManager.gameMainUI.mainUI.setHot(6),containmoney.ContainmoneyOpen.getInstance().onMsg(a);break;case data.PomeloData.opentx:a.uid!=GameApp.Manager.dataManager.uid&&GameApp.Manager.viewManager.gameMainUI.mainUI.opentx(a.x,a.y,a.user_pic);break;case data.PomeloData.receive:task.AggregationIcon1.updateChangeValue(a);break;case data.PomeloData.getGiftCf:task.GiftCf.updateCf(a);break;case data.PomeloData.addLucyStar:GameApp.Manager.dataManager.lucystar=a.lucky_star,flower.FlowerUI.getInstance().setLucky(),a.times>=1&&a.times<=15?(aler.AlertPanel1.getInstance().show("恭喜！本群集结成功！","本群经验+100，钻石+10","确定"),aler.AlertPanel1.getInstance().lblTitle.size=36):a.times>15&&(aler.AlertPanel1.getInstance().show("今日参与集结次数超过15次，无钻石奖励","本群经验+100","确定"),aler.AlertPanel1.getInstance().lblTitle.size=28);break;case data.PomeloData.medal3receive:userPanel.UserPanel.getInstance().changeStage(a);break;case data.PomeloData.getAndReceiveAnnounceGroup:rankGroupContribution.RankGroupContributionUI.addxuanGroups(a)}},i.sendMessage=function(e,t,a,i){this.pomelo.request("star.playerHandler.sendMsgQq",{type:e,content:JSON.stringify(t)},function(e){a&&a.call(i,e)})},i.upload=function(e,t,a,i){this.pomelo.request("file.uploadHandler.upload",{type:e,content:JSON.stringify(t)},function(e){a&&a.call(i,e)})},i.relaveMessage=function(e){},i.trace=function(e){console.log(e)},t._intance=new t,t}();e.IoConnect=t,egret.registerClass(t,"socketio.IoConnect")}(socketio||(socketio={}));var JsonpReq=function(){function e(){}var t=(__define,e);t.prototype;return e.process=function(t,a){e.completeCall["call_"+e._regID]=function(a){var i=e._regID;t.data=a,t.dispatchEvent(new egret.Event(egret.Event.COMPLETE)),delete e.completeCall["call_"+i]},e.startLoader(t,e._regID++,a)},e.startLoader=function(e,t,a){var i=document.createElement("script");i.src=e._request.url+"JsonpReq.completeCall.call_"+t+a,document.body.appendChild(i)},e._regID=0,e.completeCall={},e}();egret.registerClass(JsonpReq,"JsonpReq");var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var a=(__define,t),i=a.prototype;return i.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},i.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Manager=function(){function e(e){this.uid="2",this.updateLoop=!1,this.pauseTime=0,this.bb="版本:1.1.09",this.stage=e,this.controllerManager=new controller.ControllerManager,this.dataManager=new data.DataManager,this.dataManager.back_img=Tools.getInstance().getUrlAttribute("img"),this.viewManager=new view.ViewManager(this),this.lastTime=egret.getTimer()}var t=(__define,e),a=t.prototype;return a.start=function(){GameApp.Manager.dataManager.uid=parseInt(Tools.getInstance().getUrlAttribute("user_id")),GameApp.Manager.dataManager.bid=Tools.getInstance().getUrlAttribute("bid"),GameApp.Manager.dataManager.group_openid=Tools.getInstance().getUrlAttribute("group_openid"),GameApp.Manager.dataManager.wts=Tools.getInstance().getUrlAttribute("wts"),GameApp.Manager.dataManager.mts=Tools.getInstance().getUrlAttribute("mts"),GameApp.Manager.dataManager.is_owner="1"==Tools.getInstance().getUrlAttribute("is_owner")?!0:!1,GameApp.Manager.dataManager.starRankShare=Tools.getInstance().getUrlAttribute("starRankShare"),GameApp.Manager.dataManager.inviteGroupFriends=Tools.getInstance().getUrlAttribute("inviteGroupFriends"),GameApp.Manager.dataManager.inviteGroupFriendsForMass=Tools.getInstance().getUrlAttribute("inviteGroupFriendsForMass"),GameApp.Manager.dataManager.inviteGroupFriendsForCrowdfunding=Tools.getInstance().getUrlAttribute("inviteGroupFriendsForCrowdfunding"),GameApp.Manager.dataManager.shareUserStarWorksUserId=Tools.getInstance().getUrlAttribute("shareUserStarWorksUserId");var e=this;this.controllerManager.loader.preloading(function(){GameApp.Manager.dataManager.mts?e.controllerManager.monthTieController.show(GameApp.Manager.dataManager.mts):GameApp.Manager.dataManager.wts?e.controllerManager.weekPushController.show():e.startGame()},this)},a.startGame=function(){var e=this;GameApp.Manager.dataManager.bid?e.controllerManager.start():e.viewManager.starPageManager.show()},a.update=function(){var e=egret.getTimer(),t=e-this.lastTime;this.lastTime=e,this.viewManager.update(t)},a.pause=function(e){this.updateLoop=!1,this.pauseTime=e},e}();egret.registerClass(Manager,"Manager");var ThemeAdapter=function(){function e(){}var t=(__define,e),a=t.prototype;return a.getTheme=function(e,t,a,i){function n(e){t.call(i,e)}function s(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),a.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var common;!function(e){var t=function(){function e(e){this.stage=egret.MainContext.instance.stage,this.UIStage=e.UIStage,this.BottomUIStage=e.BottomUIStage,this.GameEffect=e.GameEffect,this.TopUIStage=e.TopUIStage,this.garbageUiStage=e.garbageStage,this.gameMainUI=e.gameMainUI}var t=(__define,e);t.prototype;return e}();e.BaseView=t,egret.registerClass(t,"common.BaseView")}(common||(common={}));var aler;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e}();e.AlertManager=t,egret.registerClass(t,"aler.AlertManager")}(aler||(aler={}));var aler;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/aler/alertPanelSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblTitle.fontFamily="Heiti SC",this.lbl1.fontFamily="Heiti SC",this.lbl2.fontFamily="Heiti SC",this.lblDesc.fontFamily="Heiti SC"),this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn1_tap,this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn2_tap,this),this.y=(this.stage.stageHeight-this.height)/2,this.x=(this.stage.stageWidth-this.width)/2},i.show=function(e,t,a,i,n,s){GameApp.Manager.viewManager.maskStage(.4),GameApp.Manager.viewManager.TopUIStage.addChild(this),this.callBack=n,this.scope=s,this.lblTitle.text=e?e:"温馨提示",this.lblDesc.text=t?t:"",this.lbl1.text=a?a:"取消",this.lbl2.text=i?i:"确认"},i.btn1_tap=function(){this.close(),this.callBack&&(this.scope?this.callBack.call(this.scope,"fail"):this.callBack.call(this,"fail"))},i.btn2_tap=function(){this.close(),this.callBack&&(this.scope?this.callBack.call(this.scope,"ok"):this.callBack.call(this,"ok"))},i.close=function(){GameApp.Manager.viewManager.clearMask(),this.parent&&this.parent.removeChild(this)},i.clear=function(){},t}(eui.Component);e.AlertPanel=t,egret.registerClass(t,"aler.AlertPanel")}(aler||(aler={}));var aler;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/aler/AlertPanel1Skin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblTitle.fontFamily="Heiti SC",this.lbl1.fontFamily="Heiti SC",this.lblDesc.fontFamily="Heiti SC"),this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn1_tap,this),this.y=(this.stage.stageHeight-this.height)/2,this.x=(this.stage.stageWidth-this.width)/2},i.show=function(e,t,a,i,n){GameApp.Manager.viewManager.maskStage(.4),GameApp.Manager.viewManager.TopUIStage.addChild(this),this.lblTitle.text=e?e:"温馨提示",this.lblDesc.text=t?t:"",this.lbl1.text=a?a:"确定",this.callBack=i,this.scope=n},i.btn1_tap=function(){this.close(),this.callBack&&(this.scope?this.callBack.call(this.scope,"ok"):this.callBack.call(this,"ok"))},i.close=function(){GameApp.Manager.viewManager.clearMask(),this.parent&&this.parent.removeChild(this)},i.clear=function(){},t}(eui.Component);e.AlertPanel1=t,egret.registerClass(t,"aler.AlertPanel1")}(aler||(aler={}));var barrage;!function(e){var t=function(e){function t(){e.call(this),this.state=0,this.pid=0,this.uid=0,this.giftId=0,this.skinName="src/view/gameUI/barrage/BarrageItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblName.fontFamily="Heiti SC",this.lblDesc.fontFamily="Heiti SC");var e=Tools.getInstance().getCricleMask(52,50,96,this);this.addChildAt(e,1);var t=Tools.getInstance().getCricleMask(52,50,92,this);this.bmpIcon.mask=t,this.bmpGift.x=0,this.bmpNum.visible=!1},i.setData=function(e){var t=this;if(this.uid=e.uid,this.giftId=e.id,this.lblName.text=this.getStringLen(window.hexToDec(e.user_name)),e.guard){if(1==e.guard.faith_guard){var a=new eui.Image;a.source="u_m1",a.width=30,a.height=45*(30/46),this.group_medal.addChild(a)}if(1==e.guard.angel_guard){var a=new eui.Image;a.source="u_m2",a.width=30,a.height=48*(30/73),this.group_medal.addChild(a),this.lblDesc.textFlow=(new egret.HtmlTextParser).parser("热度+8<font color=0xff0000>(+1)</font>")}if(1==e.guard.stars_guard){var a=new eui.Image;a.source="u_m3",a.width=30,a.height=51*(30/53),this.group_medal.addChild(a)}}switch(this.group_medal.x=this.lblName.x+this.lblName.width+8,this.giftId+""=="11"?this.bmpGift.source="p1_zhuwei":this.bmpGift.source="p_gift"+this.giftId,e.click>0&&(this.bmpNum.text="x"+e.click),RES.getResByUrl(e.user_pic,this.onCompFun,this,RES.ResourceItem.TYPE_IMAGE),this.x=-600,this.state){case 0:t.state=1,egret.Tween.get(this.bmpGift).to({x:360},250,egret.Ease.backIn),egret.Tween.get(t).to({x:20},200).call(function(){t.state=2,t.bmpNum.visible=!0,t.fontEase()},this).wait(2e3).call(function(){t.END()},this)}this.uid==GameApp.Manager.dataManager.uid&&flower.FlowerUI.getInstance().setLianji(e.click)},i.getStringLen=function(e){for(var t=0,a="",i=0;i<e.length;i++){var n=e.charCodeAt(i);if(t+=n>=0&&128>=n?1:2,!(13>t))return a+="...";a+=e[i]}return a},i.resetData=function(e){this.bmpGift.x=360,this.x=20,e.click>0&&(this.bmpNum.text="x"+e.click),this.uid==GameApp.Manager.dataManager.uid&&flower.FlowerUI.getInstance().setLianji(e.click),this.fontEase();var t=this;switch(this.state){case 2:egret.Tween.removeTweens(this),egret.Tween.get(this).wait(2e3).call(function(){t.END()},this)}},i.fontEase=function(){egret.Tween.get(this.bmpNum).to({scaleX:1.8,scaleY:1.8},80).to({scaleX:1,scaleY:1},150,egret.Ease.backOut)},i.onCompFun=function(e){console.log("source:"+e),this.bmpIcon.texture=e},i.END=function(){this.state=3,egret.Tween.get(this).to({y:this.y-50,alpha:0},200).call(function(){this.dispatchEventWith("END",!1,this)},this)},i.clear=function(){for(this.state=0,this.bmpGift.x=0,this.bmpNum.visible=!1,this.alpha=1;this.group_medal.numElements>0;){var e=this.group_medal.getElementAt(this.group_medal.numElements-1);e.parent&&e.parent.removeChild(e)}this.lblDesc.text="热度+8"},t.cacheDict={},t}(eui.Component);e.BarrageItem=t,egret.registerClass(t,"barrage.BarrageItem")}(barrage||(barrage={}));var barrage;!function(e){var t=function(){function t(e){this.itemArr=[],this.pointArr=[{id:1,x:20,y:360,bo:!0},{id:2,x:20,y:240,bo:!0},{id:3,x:20,y:120,bo:!0},{id:4,x:20,y:0,bo:!0}],this.mainUI=e}var a=(__define,t),i=a.prototype;return i.add=function(t){if(t.click>0&&1!=t.id){var a=this.getItemByUidGiftId(t.uid,t.id);if(a)a.resetData(t);else{var i=this.getPoint();i&&(i.bo=!1,a=e.BarrageItem.produce(),GameApp.Manager.viewManager.liveChatRoomManager.liveChatRoomUI&&GameApp.Manager.viewManager.liveChatRoomManager.liveChatRoomUI.parent?(GameApp.Manager.viewManager.liveChatRoomManager.liveChatRoomUI.addChild(a),a.y=i.y+250):(this.mainUI.addChild(a),a.y=i.y),a.setData(t),a.pid=i.id,a.addEventListener("END",this.itemEnd,this),this.itemArr.push(a))}}},i.itemEnd=function(t){var a=t.data,i=this.getPointById(a.pid);i.bo=!0;for(var n=this.itemArr.length-1;n>=0;n--)if(a==this.itemArr[n]){this.itemArr.splice(n,1);break}a.parent&&a.parent.removeChild(a),e.BarrageItem.reclaim(a)},i.getItemByUidGiftId=function(e,t){var a;for(var i in this.itemArr){var n=this.itemArr[i];if(3!=n.state&&n.uid==e&&n.giftId==t){a=n;break}}return a},i.getPoint=function(){var e=null;for(var t in this.pointArr){var a=this.pointArr[t];if(1==a.bo){e=a;break}}return e},i.getPointById=function(e){var t=null;for(var a in this.pointArr){var i=this.pointArr[a];if(i.id==e){t=i;break}}return t},t}();e.BarrageMananger=t,egret.registerClass(t,"barrage.BarrageMananger")}(barrage||(barrage={}));var buyTicketActive;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/buyTicketActive/AlertBuyTicketSkin.exml",this.AlertContent=new e.AlertContent,this.AlertContent.x=0,this.AlertContent.y=0}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lb2.fontFamily="Heiti SC"),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},n.setData=function(){this.AlertContent.setData(),this.groupData.addChild(this.AlertContent)},n.close=function(){for(;this.groupData.numElements>0;){var e=this.groupData.getElementAt(this.groupData.numElements-1);e.parent&&(e.clear(),e.parent.removeChild(e))}this.parent&&this.parent.removeChild(this)},a}(eui.Component);e.AlertBuyTicket=t,egret.registerClass(t,"buyTicketActive.AlertBuyTicket")}(buyTicketActive||(buyTicketActive={}));var buyTicketActive;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/buyTicketActive/AlertContentSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lb0.fontFamily="Heiti SC",this.lb1.fontFamily="Heiti SC",this.lb2.fontFamily="Heiti SC",this.lb3.fontFamily="Heiti SC")},n.setData=function(){var t=this,a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getHaiquanResult",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,sign:a},function(a){if(console.log(a),1==a.st){for(var i=0;i<a.data.length;i++){var n=new e.AwardPerson;n.setData(a.data[i]),t.groupAwards.addChild(n)}t.lb3.y=t.groupAwards.y+t.groupAwards.height+40,t.lb3.textFlow=(new egret.HtmlTextParser).parser("请获奖粉友联系<font color= #36a1ff>官方QQ：3409474914(加好友请备注：领取活动奖品)</font>，领取钻石礼包，以及填写邮寄地址以便寄送签名照。<font color= #36a1ff>截止至11月30日</font>，没有加该QQ的获奖粉友视为自动放弃奖励。奖品我们将在统计完成后统一发放，敬请期待！")}},!0,this)},n.clear=function(){for(;this.groupAwards.numElements>0;){var e=this.groupAwards.getElementAt(this.groupAwards.numElements-1);e.parent&&e.parent.removeChild(e)}},a}(eui.Component);e.AlertContent=t,egret.registerClass(t,"buyTicketActive.AlertContent")}(buyTicketActive||(buyTicketActive={}));var buyTicketActive;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/buyTicketActive/AwardPersonSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lb_name.fontFamily="Heiti SC",this.lb_userId.fontFamily="Heiti SC")},i.setData=function(e){this.lb_name.text=window.hexToDec(e.user_name),this.lb_userId.text="ID:"+e.user_id,RES.getResByUrl(e.user_pic,this.load_end0,this,RES.ResourceItem.TYPE_IMAGE)},i.load_end0=function(e){this.img_icon.texture=e},t}(eui.Component);e.AwardPerson=t,egret.registerClass(t,"buyTicketActive.AwardPerson")}(buyTicketActive||(buyTicketActive={}));var buyTicketActive;!function(e){var t=function(t){function a(){t.call(this),this.arr=[],this.send=!1,this.currentGroup=0,this.type=1,this.btn_push=!0,this.skinName="src/view/gameUI/buyTicketActive/BuyTicketSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lb_buy.fontFamily="Heiti SC",this.lb_fans.fontFamily="Heiti SC",this.lb_role1.fontFamily="Heiti SC",this.lb_role2.fontFamily="Heiti SC",this.lb_role0.fontFamily="Heiti SC",this.lb_role3.fontFamily="Heiti SC",this.lb_newCommon.fontFamily="Heiti SC",this.lb_hotCommon.fontFamily="Heiti SC",this.lb_newCommon0.fontFamily="Heiti SC",this.lb_hotCommon0.fontFamily="Heiti SC",this.lb6.fontFamily="Heiti SC",this.lb7.fontFamily="Heiti SC",this.lb8.fontFamily="Heiti SC",this.lb9.fontFamily="Heiti SC",this.lb10.fontFamily="Heiti SC",this.lb11.fontFamily="Heiti SC",this.lb12.fontFamily="Heiti SC",this.lb_number.fontFamily="Heiti SC",this.lb_number0.fontFamily="Heiti SC"),this.lb_hotCommon.size=32,this.lb_hotCommon.textColor=2990828,this.lb_hotCommon0.size=32,this.lb_hotCommon0.textColor=2990828,this.srco.addEventListener(eui.UIEvent.CHANGE,this.change,this),RES.getResByUrl("http://cdn.xintiao100.com/star2.0/images/game_icon.png",this.load_personIcon,this,RES.ResourceItem.TYPE_IMAGE),this.btn_buyTicket.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=(new md5).hex_md5(GameApp.Manager.dataManager.uid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getHaiquanLink",{user_id:GameApp.Manager.dataManager.uid,sign:e},function(e){1==e.st&&(location.href=e.data.url)},!0,this)},this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){var e=this;e.groupHelp.visible=!0,GameApp.Manager.stage.addEventListener(egret.TouchEvent.TOUCH_END,function(){var e=this;e.groupHelp.visible=!1},e)},this),this.btn_newCommom.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=this;for(t.lb_newCommon.size=32,t.lb_newCommon.textColor=2990828,t.lb_hotCommon.size=30,t.lb_hotCommon.textColor=10000536,t.lb_newCommon0.size=32,t.lb_newCommon0.textColor=2990828,t.lb_hotCommon0.size=30,t.lb_hotCommon0.textColor=10000536,t.lb_number.textColor=2990828,t.lb_number0.textColor=2990828;t.group_commonHotData.numElements>0;){var a=t.group_commonHotData.getElementAt(t.group_commonHotData.numElements-1);e.CommentStyle.reclaim(a),a.parent&&a.parent.removeChild(a)}if(0==t.group_commonData.numElements){t.arr=[],t.currentGroup=0,t.type=0,t.send=!1;var i=(new md5).hex_md5(GameApp.Manager.dataManager.uid+t.type+t.currentGroup+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getHaiquanComments",{user_id:GameApp.Manager.dataManager.uid,type:t.type,index:t.currentGroup,sign:i},function(e){1==e.st&&t.setData(e)},!0,this)}},this),this.btn_newCommom0.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=this;for(t.lb_newCommon.size=32,t.lb_newCommon.textColor=2990828,t.lb_hotCommon.size=30,t.lb_hotCommon.textColor=10000536,t.lb_newCommon0.size=32,t.lb_newCommon0.textColor=2990828,t.lb_hotCommon0.size=30,t.lb_hotCommon0.textColor=10000536,t.lb_number.textColor=2990828,t.lb_number0.textColor=2990828,t.group_changeButtom0.visible=!1;t.group_commonHotData.numElements>0;){var a=t.group_commonHotData.getElementAt(t.group_commonHotData.numElements-1);e.CommentStyle.reclaim(a),a.parent&&a.parent.removeChild(a)}if(0==t.group_commonData.numElements){t.arr=[],t.currentGroup=0,t.type=0,t.send=!1;var i=(new md5).hex_md5(GameApp.Manager.dataManager.uid+t.type+t.currentGroup+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getHaiquanComments",{user_id:GameApp.Manager.dataManager.uid,type:t.type,index:t.currentGroup,sign:i},function(e){1==e.st&&t.setData(e)},!0,this)}console.log(t.group_commonHotData.numElements,t.group_commonData.numElements,"length")},this),this.btn_HotCommon.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=this;for(t.lb_hotCommon.size=32,t.lb_hotCommon.textColor=2990828,t.lb_newCommon.size=30,t.lb_newCommon.textColor=10000536,t.lb_hotCommon0.size=32,t.lb_hotCommon0.textColor=2990828,t.lb_newCommon0.size=30,t.lb_newCommon0.textColor=10000536,t.lb_number.textColor=10000536,t.lb_number0.textColor=10000536,t.type=1;t.group_commonData.numElements>0;){var a=t.group_commonData.getElementAt(t.group_commonData.numElements-1);e.CommentStyle.reclaim(a),a.parent&&a.parent.removeChild(a)}if(0==t.group_commonHotData.numElements){t.arr=[],t.currentGroup=0,t.send=!1;var i=(new md5).hex_md5(GameApp.Manager.dataManager.uid+t.type+t.currentGroup+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getHaiquanComments",{user_id:GameApp.Manager.dataManager.uid,type:t.type,index:t.currentGroup,sign:i},function(e){1==e.st&&t.setDataHot(e)},!0,this)}},this),this.btn_HotCommon0.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=this;for(t.lb_hotCommon.size=32,t.lb_hotCommon.textColor=2990828,t.lb_newCommon.size=30,t.lb_newCommon.textColor=10000536,t.lb_hotCommon0.size=32,t.lb_hotCommon0.textColor=2990828,t.lb_newCommon0.size=30,t.lb_newCommon0.textColor=10000536,t.lb_number.textColor=10000536,t.lb_number0.textColor=10000536,t.group_changeButtom0.visible=!1,t.type=1;t.group_commonData.numElements>0;){var a=t.group_commonData.getElementAt(t.group_commonData.numElements-1);e.CommentStyle.reclaim(a),a.parent&&a.parent.removeChild(a)}if(0==t.group_commonHotData.numElements){t.arr=[],t.currentGroup=0,t.send=!1;var i=(new md5).hex_md5(GameApp.Manager.dataManager.uid+t.type+t.currentGroup+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getHaiquanComments",{user_id:GameApp.Manager.dataManager.uid,type:t.type,index:t.currentGroup,sign:i},function(e){1==e.st&&t.setDataHot(e)},!0,this)}},this),this.txtInput.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=this;"发送应援"==e.txtInput.text&&(e.txtInput.text="")},this),this.btnTalk.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=this;if("发送应援"!=t.txtInput.text&&""!=t.txtInput.text){var a=t.txtInput.text;if(t.btn_push){t.btn_push=!1;var i=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+a+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/addHaiquanComment",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,comment:a,sign:i},function(a){if(1==a.st){a.data.add_lucky_star&&(GameApp.Manager.dataManager.lucystar+=a.data.add_lucky_star,a.data.add_lucky_star>0&&system.TipText.produce().open("钻石+3")),t.txtInput.text="";var i=setTimeout(function(){for(clearTimeout(i),t.lb_newCommon.size=32,t.lb_newCommon.textColor=2990828,t.lb_hotCommon.size=30,t.lb_hotCommon.textColor=10000536,t.lb_newCommon0.size=32,t.lb_newCommon0.textColor=2990828,t.lb_hotCommon0.size=30,t.lb_hotCommon0.textColor=10000536;t.group_commonData.numElements>0;){var a=t.group_commonData.getElementAt(t.group_commonData.numElements-1);e.CommentStyle.reclaim(a),a.parent&&a.parent.removeChild(a)}for(;t.group_commonHotData.numElements>0;){var a=t.group_commonHotData.getElementAt(t.group_commonHotData.numElements-1);e.CommentStyle.reclaim(a),a.parent&&a.parent.removeChild(a)}if(t.currentGroup=0,t.send=!1,0==t.group_commonData.numElements){t.arr=[],t.currentGroup=0,t.type=0,t.send=!1;var n=(new md5).hex_md5(GameApp.Manager.dataManager.uid+t.type+t.currentGroup+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getHaiquanComments",{user_id:GameApp.Manager.dataManager.uid,type:t.type,index:t.currentGroup,sign:n},function(e){1==e.st&&(t.setData(e),t.btn_push=!0)},!0,this)}},50)}},!0,this)}}},this),this.srco.height=egret.MainContext.instance.stage.stageHeight-226-116,this.group_pushTalk.y=egret.MainContext.instance.stage.stageHeight-116,this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.controllerManager.buyTicketActiveController.hide(),GameApp.Manager.controllerManager.gameMainController.show()},this)},n.setData=function(e){this.srco.viewport.scrollV=0,this.add(e,this.group_commonData),this.lb_number.text="("+e.data.count+")",this.lb_number0.text="("+e.data.count+")"},n.load_personIcon=function(e){this.img_paiseIcon.texture=e},n.setDataHot=function(e){this.srco.viewport.scrollV=0,this.add(e,this.group_commonHotData),this.lb_number.text="("+e.data.count+")",this.lb_number0.text="("+e.data.count+")"},n.add=function(t,a){for(var i=this.arr.length,n=0;n<t.data.list.length;n++){var s=t.data.list[n],r=e.CommentStyle.produce();
a.addChild(r),this.arr.push(r)}for(var n=this.arr.length-1;n>=i;n--){var s=t.data.list[n-i],o=this.arr[n];o.setData(s)}this.lb_number.text="("+t.data.count+")",this.lb_number0.text="("+t.data.count+")"},n.change=function(){if(this.srco.viewport.scrollV>377?this.group_changeButtom0.visible=!0:this.group_changeButtom0.visible=!1,this.srco.viewport&&this.arr.length>0){var e=this.arr.length;this.srco.viewport.scrollV>=this.arr[e-1].y-this.srco.height+690&&this.ajaxPost()}},n.ajaxPost=function(){if(!this.send){this.send=!0;var e=this;this.currentGroup++;var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+this.type+this.currentGroup+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getHaiquanComments",{user_id:GameApp.Manager.dataManager.uid,type:this.type,index:this.currentGroup,sign:t},function(t){1==t.st&&(1==e.type?e.add(t,e.group_commonHotData):0==e.type&&e.add(t,e.group_commonData),t.data.length<30?e.send=!0:e.send=!1)},!0,this)}},n.clear=function(){var t=this;for(this.group_changeButtom0.visible=!1,this.lb_hotCommon.size=32,this.lb_hotCommon.textColor=2990828,this.lb_hotCommon0.size=32,this.lb_hotCommon0.textColor=2990828,this.lb_newCommon.size=30,this.lb_newCommon.textColor=10000536,this.lb_newCommon0.size=30,this.lb_newCommon0.textColor=10000536,t.lb_number.textColor=10000536,t.lb_number0.textColor=10000536,this.arr=[],t.currentGroup=0,t.type=1,t.send=!1,t.btn_push=!0;t.group_commonHotData.numElements>0;){var a=t.group_commonHotData.getElementAt(t.group_commonHotData.numElements-1);e.CommentStyle.reclaim(a),a.parent&&a.parent.removeChild(a)}for(;t.group_commonData.numElements>0;){var a=t.group_commonData.getElementAt(t.group_commonData.numElements-1);e.CommentStyle.reclaim(a),a.parent&&a.parent.removeChild(a)}},a}(eui.Component);e.BuyTicket=t,egret.registerClass(t,"buyTicketActive.BuyTicket")}(buyTicketActive||(buyTicketActive={}));var buyTicketActive;!function(e){var t=function(t){function a(e){t.call(this,e),this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(){this.initUI()},n.initUI=function(){var t=this;this.BuyTicket||(this.BuyTicket=new e.BuyTicket);var a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+"10&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getHaiquanComments",{user_id:GameApp.Manager.dataManager.uid,type:1,index:0,sign:a},function(e){1==e.st&&t.BuyTicket.setDataHot(e)},!0,this),this.BottomUIStage.addChild(this.BuyTicket)},n.hide=function(){this.BuyTicket.parent&&(this.BottomUIStage.removeChild(this.BuyTicket),this.BuyTicket.clear())},a}(common.BaseView);e.BuyTicketManager=t,egret.registerClass(t,"buyTicketActive.BuyTicketManager")}(buyTicketActive||(buyTicketActive={}));var buyTicketActive;!function(e){var t=function(e){function t(){e.call(this),this.isPush=!0,this.skinName="src/view/gameUI/buyTicketActive/CommentStyleSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lb_userName.fontFamily="Heiti SC",this.lb_pushTime.fontFamily="Heiti SC",this.lb_priseNumber.fontFamily="Heiti SC",this.lb_common.fontFamily="Heiti SC"),this.btn_prise.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=this;if(e.isPush){e.isPush=!1;var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+e.comment_id+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/praiseHaiquanComment",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,comment_id:e.comment_id,sign:t},function(t){1==t.st&&(t.data.valid?(e.img_priseAn.visible=!1,e.img_priseLigh.visible=!0,e.lb_priseNumber.text=parseInt(e.lb_priseNumber.text)+1+""):system.TipText.produce().open("今日已点赞"),t.data.add_lucky_star&&(GameApp.Manager.dataManager.lucystar+=t.data.add_lucky_star,t.data.add_lucky_star>0&&system.TipText.produce().open("钻石+3")),e.isPush=!0)},!0,this)}},this)},t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.setData=function(e){this.lb_userName.text=window.hexToDec(e.user_name),this.lb_pushTime.text=Tools.getInstance().getMonth(e.time),this.lb_priseNumber.text=e.praised_num,this.lb_common.text=e.comment,RES.getResByUrl(e.user_pic,this.load_personIcon,this,RES.ResourceItem.TYPE_IMAGE),this.rect_line.y=this.lb_common.y+this.lb_common.height+30,this.comment_id=e.comment_id},i.setData1=function(e){var t=(new Date).getTime();this.lb_userName.text=GameApp.Manager.dataManager.user_name,this.lb_pushTime.text=Tools.getInstance().getMonth(t),this.lb_priseNumber.text="0",this.lb_common.text=e,this.rect_line.y=this.lb_common.y+this.lb_common.height+20,this.img_paiseIcon.source=GameApp.Manager.dataManager.user_pic},i.load_personIcon=function(e){this.img_paiseIcon.texture=e},i.clear=function(){this.lb_userName.text="",this.lb_pushTime.text="",this.lb_common.text="",this.img_paiseIcon.source="",this.img_priseAn.visible=!0,this.img_priseLigh.visible=!1,this.isPush=!0},t.cacheDict={},t}(eui.Component);e.CommentStyle=t,egret.registerClass(t,"buyTicketActive.CommentStyle")}(buyTicketActive||(buyTicketActive={}));var containmoney;!function(e){var t=function(e){function t(){e.call(this),this.pointId=0,this.source="p_hongbao",this.width=61,this.height=85}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.open=function(e,t,a,i){this.key=e,this.pointId=t,this.x=a,this.y=i,GameApp.Manager.viewManager.gameMainUI.mainUI&&GameApp.Manager.viewManager.gameMainUI.mainUI.addChildAt(this,flower.FlowerUI.getInstance().getMainUIIndex())},i.close=function(){GameApp.Manager.viewManager.gameMainUI.mainUI.removeChild(this)},i.clear=function(){this.key="",this.pointId=0},t.cacheDict={},t}(eui.Image);e.ContainMoneyItem=t,egret.registerClass(t,"containmoney.ContainMoneyItem")}(containmoney||(containmoney={}));var containmoney;!function(e){var t=function(t){function a(){t.call(this),this.key="",this.bmpIcon=new module.BaseCircleImage,this.bmpIcon.x=119,this.bmpIcon.y=110,this.skinName="src/view/gameUI/containmoney/ContainMoneyOpenSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblName.fontFamily="Heiti SC",this.lblGroupName.fontFamily="Heiti SC",this.lblBtnText.fontFamily="Heiti SC",this.lblTitle.fontFamily="Heiti SC",this.lblTip.fontFamily="Heiti SC",this.lblStar.fontFamily="Heiti SC"),this.bmpIcon.x=137,this.bmpIcon.y=108,this.bmpIconBack.visible=!1,this.bmpIcon.visible=!1,this.btnClose.visible=!1,this.lblTip.visible=!1,this.btnOK.visible=!0,this.lblName.visible=!0,this.lblBtnText.visible=!0,this.lblTitle.visible=!0,this.bmpStar.visible=!1,this.lblStar.visible=!1,this.lblGroupName.visible=!1,this.bmpT3.visible=!1,this.addChild(this.bmpIcon),this.btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ok_tap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},n.ok_tap=function(){if(this.lblBtnText.text="正在打开...","activity"==this.key){var e=(new md5).hex_md5(GameApp.Manager.dataManager.uid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/receiveActivityRedPackets",{user_id:GameApp.Manager.dataManager.uid,sign:e},function(e){1==e.st?this.success(e):this.fail()},!0,this)}else socketio.IoConnect.getInstance().sendMessage(5,{key:this.key},function(e){this.call(e)},this)},n.setData=function(e){this.key=e,GameApp.Manager.viewManager.maskStage(.4),GameApp.Manager.viewManager.TopUIStage.addChild(this),this.x=181,this.y=(egret.MainContext.instance.stage.stageHeight-452)/2,this.lblTitle.text="里面装满了钻石",this.lblName.text="真爱红包",this.lblBtnText.text="打开红包",this.lblName.y=189,this.lblTitle.y=243,this.bmpBackTitle.source="h_t1",this.bmpBackTitle.y=23,this.lblName.visible=!0,this.lblTitle.visible=!0,this.btnOK.visible=!0,this.lblBtnText.visible=!0},n.success=function(e){"activity"==this.key?(this.lblGroupName.visible=!1,this.lblName.text=window.hexToDec(GameApp.Manager.dataManager.star_name),this.bmpIcon.setData(GameApp.Manager.dataManager.head_img,112)):1==e.type?(this.lblGroupName.visible=!0,this.lblName.text=window.hexToDec(e.name),this.bmpIcon.setData(e.pic,112)):(this.lblGroupName.visible=!1,this.lblName.text=window.hexToDec(e.group_name),this.bmpIcon.setData(e.group_face,112)),this.bmpBackTitle.source="h_2",this.bmpBackTitle.y=0,this.bmpT3.visible=!0,this.btnClose.visible=!0,this.bmpIconBack.visible=!0,this.bmpIcon.visible=!0,this.lblName.visible=!0,this.lblTitle.visible=!0,this.bmpStar.visible=!0,this.lblStar.visible=!0,this.btnOK.visible=!1,this.lblBtnText.visible=!1,this.lblStar.text=e.lucky_star_add,this.lblGroupName.text=window.hexToDec(e.group_name),this.lblName.y=255,this.lblGroupName.y=306,this.lblTitle.text="恭喜你成功领取",this.lblTitle.y=397,GameApp.Manager.dataManager.lucystar=e.lucky_star,flower.FlowerUI.getInstance().setLucky()},n.fail=function(){this.bmpBackTitle.source="h_2",this.bmpBackTitle.y=0,this.btnClose.visible=!0,this.lblTip.visible=!0,this.lblName.visible=!0,this.lblGroupName.visible=!1,this.lblTitle.visible=!1,this.btnOK.visible=!1,this.lblBtnText.visible=!1,this.lblName.text="空空如也~~",this.lblName.y=253},n.onMsg=function(e){console.log("call-14:",e),e&&(e.over?this.fail():this.success(e))},n.call=function(e){switch(console.log("call-13:",e),e.st){case 2:this.fail();break;case 3:}},n.close=function(){GameApp.Manager.viewManager.TopUIStage.removeChild(this),GameApp.Manager.viewManager.clearMask(),this.bmpIconBack.visible=!1,this.bmpIcon.visible=!1,this.btnClose.visible=!1,this.btnOK.visible=!1,this.lblBtnText.visible=!1,this.lblTitle.visible=!1,this.bmpStar.visible=!1,this.lblStar.visible=!1,this.lblTip.visible=!1,this.lblGroupName.visible=!1,this.bmpT3.visible=!1,this.bmpBackTitle.source="h_t1",this.bmpBackTitle.y=23,this.bmpIcon.clear(),e.ContainmoneyUI.getInstance().addRedPackets()},a}(eui.Component);e.ContainmoneyOpen=t,egret.registerClass(t,"containmoney.ContainmoneyOpen")}(containmoney||(containmoney={}));var containmoney;!function(e){var t=function(){function t(){this.redPackets=[],this.arr=[]}var a=(__define,t),i=a.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},i.saveRedPackets=function(e){this.removeAll(),0==GameApp.Manager.dataManager.visitor&&(this.redPackets=e,this.addRedPackets())},i.saveActivePackets=function(e){this.redPackets.push(e),this.addRedPackets()},i.addRedPackets=function(){if(this.redPackets&&this.redPackets.length>0&&!e.ContainmoneyOpen.getInstance().parent){var t=this.redPackets.shift();this.open(t)}},i.onMsg=function(e){switch(e.key&&(GameApp.Manager.viewManager.liveChatRoomManager.liveChatRoomUI&&GameApp.Manager.viewManager.liveChatRoomManager.liveChatRoomUI.parent||0==GameApp.Manager.dataManager.visitor&&(this.redPackets.push(e.key),this.addRedPackets())),GameApp.Manager.viewManager.gameMainUI.mainUI.mbarrageUI.add(e),e.type+""){case"6":signIn.SignInManager.setData(e);break;case"7":break;default:notice.Notice.getInstance().setData(e)}},i.open=function(t){e.ContainmoneyOpen.getInstance().setData(t)},i.removeAll=function(){this.delArr()},i.delArr=function(){this.arr=[]},t}();e.ContainmoneyUI=t,egret.registerClass(t,"containmoney.ContainmoneyUI")}(containmoney||(containmoney={}));var fansRecruit;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/fansRecruit/FansRecruitItemSkin.exml",this.iconNow=new task.TaskIcon}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){this.groupData.addChild(this.iconNow),Tools.getInstance().isIphone()&&(this.namet.fontFamily="Heiti SC",this.pnum.fontFamily="Heiti SC",this.gonggao.fontFamily="Heiti SC",this.position.fontFamily="Heiti SC",this.btnJoin.visible=!1)},i.setData=function(e){this.obj=e,this.getHead(e.group_face),this.namet.text=window.hexToDec(e.group_name),this.pnum.text=e.member_num+"人",this.gonggao.text="群公告:"+window.hexToDec(e.notice),this.position.text=window.hexToDec(e.poi_name);this.iconNow.setText(e.level)},i.getHead=function(e){var t=this;RES.getResByUrl(e,function(e){t.bmpIcon.source=e},this,RES.ResourceItem.TYPE_IMAGE)},t}(eui.Component);e.FansRecruitItem=t,egret.registerClass(t,"fansRecruit.FansRecruitItem")}(fansRecruit||(fansRecruit={}));var fansRecruit;!function(e){var t=function(t){function a(e){t.call(this,e)}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(){if(this.test(),!this.fansRecruitUI){this.fansRecruitUI=new e.FansRecruitUI,this.BottomUIStage.addChild(this.fansRecruitUI);var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid_save+"1&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/starFansGroups",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid_save,page:"1",sign:t},function(e){1==e.st&&this.fansRecruitUI.setData(e)},!0,this)}},n.hide=function(){this.fansRecruitUI&&(this.fansRecruitUI.parent.removeChild(this.fansRecruitUI),this.fansRecruitUI=null)},n.test=function(){this.testObj={st:1,groups:[{group_name:"\\u6d4b试\\u006c\\u0076\\u0033\\u9ad8",group_face:"http://p.qlogo.cn/gh_open/Jyh05icwdOIAJzIEe3qLONbaHiaUM5t2nm/100",poi_name:"\\u5317\\u4eac",level:2,notice:"\\u7fa4\\u4e3b\\u5f88\\u61d2\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e",member_num:0},{group_name:"\\u767e\\u5cb3\\u0026\\u0061\\u006d\\u0070\\u003b\\u817e\\u8baf\\u660e\\u661f\\u9879\\u76ee",group_face:"http://p.qlogo.cn/gh_open/Jyh05icwdOIAJzIEe3qLONbaHiaUM5t2nm/100",poi_name:"\\u5317\\u4eac",level:1,notice:"\\u7fa4\\u4e3b\\u5f88\\u61d2\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e",member_num:6},{group_name:"\\u6d4b\\u8bd5\\u006c\\u0076\\u0035",group_face:"http://p.qlogo.cn/gh_open/Jyh05icwdOIAJzIEe3qLONbaHiaUM5t2nm/100",poi_name:"\\u5317\\u4eac",level:1,notice:"\\u7fa4\\u4e3b\\u5f88\\u61d2\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e",member_num:0},{group_name:"\\u6d4b\\u8bd5\\u006c\\u0076\\u0033\\u4f4e",group_face:"http://p.qlogo.cn/gh_open/Jyh05icwdOIAJzIEe3qLONbaHiaUM5t2nm/100",poi_name:"\\u5317\\u4eac",level:1,notice:"\\u7fa4\\u4e3b\\u5f88\\u61d2\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e",member_num:0},{group_name:"\\u6d4b\\u8bd5\\u006c\\u0076\\u0035",group_face:"http://p.qlogo.cn/gh_open/Jyh05icwdOIAJzIEe3qLONbaHiaUM5t2nm/100",poi_name:"\\u5317\\u4eac",level:1,notice:"\\u7fa4\\u4e3b\\u5f88\\u61d2\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e",member_num:0},{group_name:"\\u6d4b\\u8bd5\\u006c\\u0076\\u0033\\u4f4e",group_face:"http://p.qlogo.cn/gh_open/Jyh05icwdOIAJzIEe3qLONbaHiaUM5t2nm/100",poi_name:"\\u5317\\u4eac",level:1,notice:"\\u7fa4\\u4e3b\\u5f88\\u61d2\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e",member_num:0},{group_name:"\\u6d4b\\u8bd5\\u006c\\u0076\\u0035",group_face:"http://p.qlogo.cn/gh_open/Jyh05icwdOIAJzIEe3qLONbaHiaUM5t2nm/100",poi_name:"\\u5317\\u4eac",level:1,notice:"\\u7fa4\\u4e3b\\u5f88\\u61d2\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e",member_num:0},{group_name:"\\u6d4b\\u8bd5\\u006c\\u0076\\u0033\\u4f4e",group_face:"http://p.qlogo.cn/gh_open/Jyh05icwdOIAJzIEe3qLONbaHiaUM5t2nm/100",poi_name:"\\u5317\\u4eac",level:1,notice:"\\u7fa4\\u4e3b\\u5f88\\u61d2\\uff0c\\u4ec0\\u4e48\\u4e5f\\u6ca1\\u5199\\u007e",member_num:0}],page:"1"}},a}(common.BaseView);e.FansRecruitManager=t,egret.registerClass(t,"fansRecruit.FansRecruitManager")}(fansRecruit||(fansRecruit={}));var fansRecruit;!function(e){var t=function(t){function a(){t.call(this),this.currentGroup=1,this.bo=!1,this.disNum=6,this.index=0,this.arr=[],this.skinName="src/view/gameUI/fansRecruit/FansRecruitUISkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.chakan.fontFamily="Heiti SC",this.lbl1.fontFamily="Heiti SC"),this.scroller.bounces=!1,this.scroller.height=this.stage.stageHeight-105,this.rtnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.scroller.addEventListener(eui.UIEvent.CHANGE_END,this.change,this),this.lbl1.visible=!1},n.change=function(){if(this.scroGroup.numElements>0){var e=this.lastItem.y-this.scroller.height+this.lastItem.height;this.scroller.viewport&&this.scroller.viewport.scrollV>=e&&this.ajaxPost()}},n.ajaxPost=function(){var e=this,t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid_save+(this.currentGroup+1)+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/starFansGroups",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid_save,page:this.currentGroup+1,sign:t},function(t){1==t.st&&t.groups.length>0&&(e.bo=!1,e.setData(t),e.currentGroup++)},!0,this)},n.setData=function(t){if(this.data=t,t.groups.length>0)for(var a=0;a<t.groups.length;a++){var i=new e.FansRecruitItem;i.setData(t.groups[a]),this.scroGroup.addChild(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.item_tap,this),a==t.groups.length-1&&(this.lastItem=i)}else this.lbl1.visible=!0},n.item_tap=function(e){var t=e.currentTarget;system.GroupJoin.join(t.obj.group_openid)},n.close=function(){this.lbl1.visible=!1;for(var e=this.scroGroup.numElements-1;e>=0;e--){var t=this.scroGroup.getElementAt(e);t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.item_tap,this),t.parent.removeChild(t)}GameApp.Manager.controllerManager.fansRecruitController.hide()},a}(eui.Component);e.FansRecruitUI=t,egret.registerClass(t,"fansRecruit.FansRecruitUI")}(fansRecruit||(fansRecruit={}));var flower;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/flower/FlowerBtnSendSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.setState=function(e){switch(e){case 0:this.rectBack.fillColor=10527395;break;case 1:this.rectBack.fillColor=4111603}},t}(eui.Button);e.FlowerBtnSend=t,egret.registerClass(t,"flower.FlowerBtnSend")}(flower||(flower={}));var flower;!function(e){var t=function(t){function a(){t.call(this),this.fid=0,this.type=0,this.canSend=!0,this.click=0,this.lastcount=-1,this.price=0,this.cd=0,this.task_time=0,this.task_timeJilu=0,this.skinName="src/view/gameUI/flower/FlowerItemSkin.exml",this.touchEnabled=!0,this.touchChildren=!0}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblStar.fontFamily="Heiti SC",this.lblTime.fontFamily="Heiti SC",this.lblIntimate.fontFamily="Heiti SC"),this.bmpBack.alpha=0,this.bmpLian.visible=!1,this.lblTime.visible=!1,this.lblStar.visible=!1},n.on=function(){this.bmpBack.alpha=.7},n.off=function(){this.bmpBack.alpha=0,this.bmpLian.source="p_lianji"},n.setLight=function(){this.bmpLian.source="p_lianji1"},n.setloW=function(){this.bmpLian.source="p_lianji"},n.setData=function(e){switch(this.fid=e.id,this.type=e.type,this.lblIntimate.text="热度+"+e.intimate,this.lblStar.text=e.price,this.price=e.price,this.click=e.click,this.bmpIcon.source="p_gift"+this.fid,this.lastcount=e.last,this.click>0&&(this.bmpLian.visible=!0),this.lblStar.visible=!0,this.lblTime.visible=!1,this.fid){case 1:this.lblStar.visible=!1,this.lblTime.visible=!0,0!=e.last?this.lblTime.text="免费":this.lblTime.text="今日已送完",this.bmpStar.visible=!1}},n.setDJS=function(e){this.timeVar&&clearInterval(this.timeVar);var t=this;this.canSend=!1,this.task_time=e,this.task_timeJilu=(new Date).getTime(),this.lblTime.visible=!0,this.lblTime.text=Tools.getInstance().formatTime2(e),this.cd=e,this.timeVar=setInterval(function(){var e=(new Date).getTime(),a=t.task_time-(e-t.task_timeJilu);t.cd=a,0>=a?t.djsEnd():t.lblTime.text=Tools.getInstance().formatTime2(a)},980)},n.djsEnd=function(){this.timeVar&&clearInterval(this.timeVar),0!=this.lastcount?(this.lblTime.text="免费",e.FlowerUI.getInstance().btnSend.setState(1)):this.lblTime.text="今日已送完",this.canSend=!0},a}(eui.Component);e.FlowerItem=t,egret.registerClass(t,"flower.FlowerItem")}(flower||(flower={}));var flower;!function(e){var t=function(t){function a(){t.call(this),this.bo=!1,this.arr=[],this.canSend=!0,this.btnSend=new e.FlowerBtnSend,this.skinName="src/view/gameUI/flower/FlowerUISkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.txtCZ.fontFamily="Heiti SC",this.txtStar.fontFamily="Heiti SC",this.lblStar.fontFamily="Heiti SC"),this.addChild(this.btnSend),this.btnSend.x=590,this.btnSend.y=225,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this),this.btnSend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.send_tap,this),this.btnSend1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.send_tap1,this),this.btnPay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.pay_tap,this)},n.tap=function(e){e.stopPropagation()},n.initData=function(e){if(this.obj=e,e){var t=e[1];GameApp.Manager.dataManager.gift_cd=t.cd,GameApp.Manager.dataManager.gift_time=(new Date).getTime()}},n.setLucky=function(){this.lblStar.text=""+GameApp.Manager.dataManager.lucystar,GameApp.Manager.viewManager.payManager.setLucky()},n.setLianji=function(e){this.btnSend1.label=e+"",this.selectItem&&this.selectItem.setLight()},n.setLastCount=function(e,t,a){if(this.zhItem.fid==e)if(this.zhItem.lastcount=t,0!=this.zhItem.lastcount){GameApp.Manager.dataManager.gift_cd=a,GameApp.Manager.dataManager.gift_time=(new Date).getTime();var i=GameApp.Manager.dataManager.gift_time-(new Date).getTime()+GameApp.Manager.dataManager.gift_cd;this.zhItem.setDJS(i)}else this.zhItem.djsEnd()},n.setData=function(){if(!this.bo){this.bo=!0;for(var t in this.obj){var a=this.obj[t];switch(a.id){case 2:case 3:case 4:var i=new e.FlowerItem;this.groupData.addChild(i),i.setData(a),this.arr.push(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.item_tap,this)}}}this.lblStar.text=""+GameApp.Manager.dataManager.lucystar},n.item_tap=function(e){var t=e.currentTarget;t!=this.selectItem&&(this.selectItem&&this.selectItem.off(),this.selectItem=t,this.selectItem.on(),this.btnSend.visible=!0,1==this.selectItem.fid&&(0==this.selectItem.lastcount||this.selectItem.cd>0)?this.btnSend.setState(0):this.btnSend.setState(1),this.btnSend1.label="",this.btnSend1.visible=!1)},n.send_tap=function(){if(this.selectItem&&this.selectItem.canSend&&this.canSend)if(console.log(GameApp.Manager.dataManager.lucystar+" "+this.selectItem.price),GameApp.Manager.dataManager.lucystar>=this.selectItem.price){var e=this.selectItem.fid;this.canSend=!1,socketio.IoConnect.getInstance().sendMessage(data.PomeloData.sendFlower,{id:e},function(e){a.listerFlower(e)},this),this.selectItem.click>0?(this.btnSend.visible=!1,this.btnSend1.visible=!0,this.btnSendTween()):1==this.selectItem.fid?this.btnSend.setState(0):6==this.selectItem.fid&&this.close()}else aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.gameMainController.hide,1)},this)},n.send_tap1=function(){if(this.selectItem.canSend&&this.canSend)if(GameApp.Manager.dataManager.lucystar>=this.selectItem.price){var e=this.selectItem.fid;this.canSend=!1,socketio.IoConnect.getInstance().sendMessage(data.PomeloData.sendFlower,{id:e},function(e){a.listerFlower(e)},this),this.btnSendTween()}else aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.gameMainController.hide,1)},this)},n.pay_tap=function(){GameApp.Manager.controllerManager.payController.show(GameApp.Manager.viewManager.liveChatRoomManager.hide,1)},n.btnSendTween=function(){egret.Tween.removeTweens(this.btnSend1),egret.Tween.get(this.btnSend1).wait(2e3).call(function(){this.btnSend.visible=!0,this.btnSend1.visible=!1,this.selectItem&&this.selectItem.setloW()},this)},n.open=function(t){t.addChild(this),this.x=0,this.setData(),this.selectItem&&(this.selectItem.off(),this.selectItem=null),this.btnSend.visible=!0,this.btnSend.setState(0),this.btnSend1.visible=!1,GameApp.Manager.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,e.FlowerUI.getInstance().close,e.FlowerUI.getInstance())},n.getMainUIIndex=function(){return this.parent?this.parent.getChildIndex(this):GameApp.Manager.viewManager.gameMainUI.mainUI.numChildren},n.close=function(){this.parent&&(GameApp.Manager.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.FlowerUI.getInstance().close,e.FlowerUI.getInstance()),this.btnSend.visible=!0,this.btnSend1.visible=!1,this.selectItem&&this.selectItem.off(),this.parent&&this.parent.removeChild(this))},a.listerFlower=function(e){if(a.getInstance().canSend=!0,e)switch(console.log("送花自己监听:",e),e.st){case 1:switch(GameApp.Manager.dataManager.lucystar=e.lucky_star,a.getInstance().setLucky(),e.id+""){case"1":GameApp.Manager.dataManager.gift_cd=6e5,GameApp.Manager.dataManager.gift_time=(new Date).getTime();break;case"2":break;case"3":break;case"4":break;case"6":var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/redPacketPush",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,sign:t},function(e){system.Share.share(e,function(e){})},!0,this)}break;case-1:break;case-2:break;case-3:aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.gameMainController.hide,-1)},this)}},a}(eui.Component);e.FlowerUI=t,egret.registerClass(t,"flower.FlowerUI")}(flower||(flower={}));var follow;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/follow/FollowSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){var e=this;this.img_btnFllower.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.folloerAction(1)},this),this.img_btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.folloerAction(0),e.parent&&e.parent.removeChild(e)},this),this.img_btnFllower.y=(this.stage.stageHeight-this.img_btnFllower.height)/2,this.img_btnClose.y=this.img_btnFllower.y+20},i.folloerAction=function(e){var t=this,a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+e+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/handleFollow",{user_id:GameApp.Manager.dataManager.uid,operate:e,sign:a},function(e){1==e.st&&1==e.data.redirect&&e.data.url?location.href=e.data.url:t.parent&&t.parent.removeChild(t)},!0,t)},t}(eui.Component);e.Follow=t,egret.registerClass(t,"follow.Follow")}(follow||(follow={}));var garbageCollection;!function(e){var t=function(t){function a(){t.call(this),this.itemArr=[],this.n=0,this.jilu=0,this.isLookMore=!1,this.musicHeiArr=[],this.itemTvArr=[],this.v=0,this.jiluTv=0,this.tvHeiArr=[],this.movieHeiArr=[],this.itemMovieArr=[],this.jiluMovie=0,this.o=0,this.uid=0,this.totalOffY=0,this.skinName="src/view/gameUI/garbageCollection/GarbageCollectionSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_title.fontFamily="Heiti SC",this.lable_number.fontFamily="Heiti SC",this.lable_TvNumber.fontFamily="Heiti SC",this.lable_MovieNumber.fontFamily="Heiti SC",this.lable_lookMoreMusic.fontFamily="Heiti SC",this.lable_lookMoreTv.fontFamily="Heiti SC",this.lable_lookMoreMovie.fontFamily="Heiti SC",this.lable_NoWorks.fontFamily="Heiti SC"),this.btn_Fx.addEventListener(egret.TouchEvent.TOUCH_TAP,this.share,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CloseItem,this),this.groupkMoreMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.lookMoreMusicWorks,this),this.groupkMoreTv.addEventListener(egret.TouchEvent.TOUCH_TAP,this.lookMoreTVWorks,this),this.groupkMoreMovie.addEventListener(egret.TouchEvent.TOUCH_TAP,this.lookMoreMovieWorks,this)},n.lookMoreMusicWorks=function(t){var a=this.itemArr.length;this.n=this.n-1;for(var i=this.jilu;i<this.musicHeiArr.length;i++){var n=new e.WorksItem;n.setData(this.musicHeiArr[i],0),this.itemArr.push(n),this.group_musicItem.addChild(n),n.x=this.itemArr[a-1+i-this.jilu].x+this.itemArr[a-1+i-this.jilu].width+20,n.y=55*this.n,n.x+n.width>690&&(this.n+=1,n.x=0,n.y=55*this.n)}this.groupkMoreMusic.visible=!1,this.obj.starWorks[2]&&!this.obj.starWorks[3]?this.group_TV.y=this.group_music.y+this.group_music.height+85+40:!this.obj.starWorks[2]&&this.obj.starWorks[3]?this.group_Movie.y=this.group_music.y+this.group_music.height+85+40:this.obj.starWorks[2]&&this.obj.starWorks[3]?(this.group_TV.y=this.group_music.y+this.group_music.height+85+40,this.group_Movie.y=this.group_TV.y+this.group_TV.height+85):!this.obj.starWorks[2]&&!this.obj.starWorks[3]},n.lookMoreTVWorks=function(t){var a=this.itemTvArr.length;this.v=this.v-1;for(var i=this.jiluTv;i<this.tvHeiArr.length;i++){var n=new e.WorksItem;n.setData(this.tvHeiArr[i],0),this.itemTvArr.push(n),this.group_TvItem.addChild(n),n.x=this.itemTvArr[a-1+i-this.jiluTv].x+this.itemTvArr[a-1+i-this.jiluTv].width+20,n.y=55*this.v,n.x+n.width>690&&(this.v+=1,n.x=0,n.y=55*this.v)}this.obj.starWorks[3]&&(this.group_Movie.y=this.group_TV.y+this.group_TV.height+85+40),this.groupkMoreTv.y=this.group_TvItem.y+this.group_TvItem.height+5,this.groupkMoreTv.visible=!1},n.lookMoreMovieWorks=function(t){var a=this.itemMovieArr.length;this.o=this.o-1;for(var i=this.jiluMovie;i<this.movieHeiArr.length;i++){var n=new e.WorksItem;n.setData(this.movieHeiArr[i],0),this.itemMovieArr.push(n),this.group_MovieItem.addChild(n),n.x=this.itemMovieArr[a-1+i-this.jiluMovie].x+this.itemMovieArr[a-1+i-this.jiluMovie].width+20,n.y=55*this.o,n.x+n.width>690&&(this.o+=1,n.x=0,n.y=55*this.o)}this.groupkMoreMovie.visible=!1,this.groupkMoreMovie.y=this.group_MovieItem.y+this.group_MovieItem.height+5},n.share=function(e){var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/shareUserStarWorks",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,sign:t},function(e){system.Share.share(e,function(e){1==e&&system.TipText.produce().open("发送成功")})},!0,this)},n.setData=function(e,t,a,i){this.uid=a,this.type=i,this.obj=e,this.uid==GameApp.Manager.dataManager.uid&&(this.btn_Fx.visible=!0),this.scro.height=this.stage.stageHeight;var n=window.hexToDec(e.star_name);this.lable_title.textFlow=(new egret.HtmlTextParser).parser(window.hexToDec(e.user_name)+" <font color= #f5b316>点亮的 </font>"+n+"的作品");var s=Tools.getInstance().getCricleMask(this.img_ico.x+72,this.img_ico.y+72,this.img_ico.width,this.img_ico.parent);if(this.img_ico.mask=s,RES.getResByUrl(e.user_pic,this.addHeadImg,this,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(e.star_img,this.addBgImg,this,RES.ResourceItem.TYPE_IMAGE),this.uid!=GameApp.Manager.dataManager.uid)e.starWorks[1]&&e.starWorks[1].get.length>0||e.starWorks[2]&&e.starWorks[2].get.length>0||e.starWorks[3]&&e.starWorks[3].get.length>0?this.addLightWorks(e):this.lable_NoWorks.visible=!0;else{var r=0;if(e.starWorks[1]){var o=e.starWorks[1].not_get?e.starWorks[1].not_get.length:0,h=o+e.starWorks[1].get.length;
this.lable_number.text=e.starWorks[1].get.length+"/"+h,this.group_music.visible=!0,this.addWorks(e.starWorks[1].get,0,this.itemArr,e.starWorks[1].not_get?e.starWorks[1].not_get:[],this.group_musicItem,this.groupkMoreMusic,0,1),this.musicHeiArr=e.starWorks[1].not_get,r+=this.group_music.y+this.group_music.height+40}if(e.starWorks[2]){this.group_TV.visible=!0;var o=e.starWorks[2].not_get?e.starWorks[2].not_get.length:0,h=o+e.starWorks[2].get.length;this.lable_TvNumber.text=e.starWorks[2].get.length+"/"+h,this.addWorks(e.starWorks[2].get,0,this.itemTvArr,e.starWorks[2].not_get?e.starWorks[2].not_get:[],this.group_TvItem,this.groupkMoreTv,0,2),this.group_TV.y=r||428,r+=0==r?this.group_TV.y+this.group_TV.height+40:this.group_TV.height+40,this.tvHeiArr=e.starWorks[2].not_get}if(e.starWorks[3]){this.group_Movie.visible=!0;var o=e.starWorks[3].not_get?e.starWorks[3].not_get.length:0,h=o+e.starWorks[3].get.length;this.lable_MovieNumber.text=e.starWorks[3].get.length+"/"+h,this.group_Movie.y=r||428,this.addWorks(e.starWorks[3].get,0,this.itemMovieArr,e.starWorks[3].not_get?e.starWorks[3].not_get:[],this.group_MovieItem,this.groupkMoreMovie,0,3),this.movieHeiArr=e.starWorks[3].not_get}}},n.addLightWorks=function(e){var t=0;if(e.starWorks[1]&&0!=e.starWorks[1].get.length){this.group_music.visible=!0;var a=e.starWorks[1].not_get?e.starWorks[1].not_get.length:0,i=a+e.starWorks[1].get.length;this.lable_number.text=e.starWorks[1].get.length+"/"+i,this.addWorks(e.starWorks[1].get,0,this.itemArr,[],this.group_musicItem,this.groupkMoreMusic,0,1),this.groupkMoreMusic.visible=!1,this.musicHeiArr=e.starWorks[1].not_get,t+=this.group_music.y+this.group_music.height+60}if(e.starWorks[2]&&0!=e.starWorks[2].get.length){this.group_TV.visible=!0;var a=e.starWorks[2].not_get?e.starWorks[2].not_get.length:0,i=a+e.starWorks[2].get.length;this.lable_TvNumber.text=e.starWorks[2].get.length+"/"+i,this.addWorks(e.starWorks[2].get,0,this.itemTvArr,[],this.group_TvItem,this.groupkMoreTv,0,2),this.groupkMoreTv.visible=!1,this.tvHeiArr=e.starWorks[2].not_get,this.group_TV.y=t||428,t+=0==t?this.group_TV.y+this.group_TV.height+60:this.group_TV.height+60}if(e.starWorks[3]&&0!=e.starWorks[3].get.length){this.group_Movie.visible=!0;var a=e.starWorks[3].not_get?e.starWorks[3].not_get.length:0,i=a+e.starWorks[3].get.length;this.lable_MovieNumber.text=e.starWorks[3].get.length+"/"+i,this.group_Movie.y=t||428,this.addWorks(e.starWorks[3].get,0,this.itemMovieArr,[],this.group_MovieItem,this.groupkMoreMovie,0,3),this.groupkMoreMovie.visible=!1,this.movieHeiArr=e.starWorks[3].not_get}},n.addWorks=function(t,a,i,n,s,r,o,h){for(var l=t.length,g=0;g<t.length;g++){var c=new e.WorksItem;c.setData(t[g].name,t[g].colour),i.push(c),0==g?(c.x=0,c.y=0):(c.x=i[g-1].x+i[g-1].width+20,c.y=55*a,c.x+c.width>690&&(a+=1,c.x=0,c.y=55*a)),s.addChild(c),r.y=s.y+s.height+10}if(3>=a)for(var d=0;d<n.length;d++){var u=new e.WorksItem;if(u.setData(n[d],0),i.push(u),0==l){if(0==d)u.x=0,u.y=0;else if(u.x=i[d-1].x+i[d-1].width+20,u.y=55*a,u.x+u.width>690){if(a+=1,a>4){o=d,r.visible=!0;break}4>=a&&(u.x=0,u.y=55*a,r.visible=!1)}s.addChild(u),r.y=s.y+s.height+10}else{if(u.x=i[l-1+d].x+i[l-1+d].width+20,u.y=55*a,u.x+u.width>690){if(a+=1,a>4){o=d,d==n.length-1?r.visible=!1:r.visible=!0;break}4>=a&&(u.x=0,u.y=55*a,r.visible=!1)}s.addChild(u),r.y=s.y+s.height+10}}else for(var p=0,m=0;m<n.length;m++){var u=new e.WorksItem;if(u.setData(n[m],0),i.push(u),u.x=i[l-1+m].x+i[l-1+m].width+20,u.y=55*a,u.x+u.width>690){if(a+=1,p+=1,p>2){o=m,d==n.length-1?r.visible=!1:r.visible=!0;break}u.x=0,u.y=55*a}s.addChild(u),r.y=s.y+s.height+10}1==h?(this.n=a,this.jilu=o):2==h?(this.v=a,this.jiluTv=o):3==h&&(this.o=a,this.jiluMovie=o)},n.addHeadImg=function(e){this.img_ico.texture=e},n.addBgImg=function(e){this.img_bg.alpha=.1,this.img_bg.texture=e},n.clear=function(){for(this.scro.viewport.scrollV=0,this.itemArr=[],this.n=0,this.jilu=0,this.isLookMore=!1,this.lable_number.text="0/0",this.itemTvArr=[],this.v=0,this.jiluTv=0,this.lable_TvNumber.text="0/0",this.itemMovieArr=[],this.o=0,this.jiluMovie=0,this.lable_MovieNumber.text="0/0",this.group_music.visible=!1,this.group_music.y=428,this.group_TV.visible=!1,this.group_TV.y=428,this.group_Movie.visible=!1,this.group_Movie.y=428,this.groupkMoreMusic.visible=!1,this.groupkMoreTv.visible=!1,this.groupkMoreMovie.visible=!1,this.lable_NoWorks.visible=!1,this.img_bg.texture=null,this.img_ico.texture=null,this.btn_Fx.visible=!1;this.group_musicItem.numElements>0;){var e=this.group_musicItem.getElementAt(this.group_musicItem.numElements-1);e.parent&&e.parent.removeChild(e)}for(;this.group_TvItem.numElements>0;){var t=this.group_TvItem.getElementAt(this.group_TvItem.numElements-1);t.parent&&t.parent.removeChild(t)}for(;this.group_MovieItem.numElements>0;){var a=this.group_MovieItem.getElementAt(this.group_MovieItem.numElements-1);a.parent&&a.parent.removeChild(a)}2==this.type?GameApp.Manager.controllerManager.gameMainController.show():1==this.type,this.type=1,GameApp.Manager.viewManager.garbageStage.removeChild(this)},n.CloseItem=function(e){GameApp.Manager.controllerManager.gabageController.hide()},a}(eui.Component);e.GarbageCollection=t,egret.registerClass(t,"garbageCollection.GarbageCollection")}(garbageCollection||(garbageCollection={}));var garbageCollection;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(e,t,a){this.uid=e,this.bid=t,this.type=a,this.loaded?this.initUI():this.loading()},n.initUI=function(){this.garbageCollection||(this.garbageCollection=new e.GarbageCollection),GameApp.Manager.viewManager.garbageStage.addChild(this.garbageCollection),GameApp.Manager.viewManager.garbageStage.visible=!0;var t=(new md5).hex_md5(""+GameApp.Manager.dataManager.uid+this.uid+this.bid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getUserStarWorks",{user_id:GameApp.Manager.dataManager.uid,target_user_id:this.uid,bid:this.bid,sign:t},function(e){1==e.st&&this.garbageCollection.setData(e,this.bid,this.uid,this.type)},!0,this)},n.hide=function(){this.garbageCollection.parent&&(this.garbageCollection.parent.removeChild(this.garbageCollection),this.garbageCollection.clear()),GameApp.Manager.viewManager.garbageStage.visible=!1},n.loading=function(){this.initUI()},n.load_end=function(){this.loaded=!0,this.initUI()},a}(common.BaseView);e.GarbageCollectionManager=t,egret.registerClass(t,"garbageCollection.GarbageCollectionManager")}(garbageCollection||(garbageCollection={}));var garbageCollection;!function(e){var t=function(e){function t(){e.call(this),this.colorArr=[5658725,226661,8897691,1678310,16092861,16214116,16102166],this.skinName="src/view/gameUI/garbageCollection/WorksItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_titleName.fontFamily="Heiti SC")},i.setData=function(e,t){if(this.lable_titleName.text=e,this.lable_titleName.textColor=this.colorArr[t],Tools.getInstance().isIphone()&&!window.isChina(e)){var a=e.length,i=this.lable_titleName.width,n=i+2.5*a;this.rect_bg.width=n}else{var n=this.lable_titleName.width;this.rect_bg.width=n+25}this.rect_bg.strokeColor=this.colorArr[t]},i.clear=function(){},t}(eui.Component);e.WorksItem=t,egret.registerClass(t,"garbageCollection.WorksItem")}(garbageCollection||(garbageCollection={}));var headLines;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(e,t,a){this.headline_id=e,this.ts=a,this.name=t,this.loaded?this.initUI():this.loading()},n.initUI=function(){var t=this;if(this.headLinesItemInfo||(this.headLinesItemInfo=new e.HeadLineItemInfor),this.BottomUIStage.addChild(this.headLinesItemInfo),this.ts==e.HeadLines.toDayTime){console.log("是正常的时间");var a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+this.headline_id+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getHeadlineDetail",{user_id:GameApp.Manager.dataManager.uid,headline_id:this.headline_id,sign:a},function(e){1==e.st&&t.headLinesItemInfo.setData(e.data,t.name,t.ts)},!0,this)}else{console.log("往期时间");var a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+this.headline_id+t.ts+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getHeadlineHistoryDetail",{user_id:GameApp.Manager.dataManager.uid,headline_id:this.headline_id,ts:t.ts,sign:a},function(e){1==e.st&&t.headLinesItemInfo.setData(e.data,t.name,t.ts)},!0,this)}},n.hide=function(){this.headLinesItemInfo&&(this.headLinesItemInfo.parent.removeChild(this.headLinesItemInfo),this.headLinesItemInfo.clear())},n.loading=function(){this.initUI()},n.load_end=function(){this.loaded=!0,this.initUI()},a}(common.BaseView);e.HeadLineItemInfoManager=t,egret.registerClass(t,"headLines.HeadLineItemInfoManager")}(headLines||(headLines={}));var headLines;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/headlines/HeadLineItemInforSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_whoWorks.fontFamily="Heiti SC",this.lable_titleInfo.fontFamily="Heiti SC",this.lable_count.fontFamily="Heiti SC",this.lable_threeRank.fontFamily="Heiti SC",this.lable_type.fontFamily="Heiti SC"),this.scro1.height=this.stage.stageHeight-105,this.group_buttom.y=this.stage.stageHeight-this.group_buttom.height,this.btn_ding.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchUp,this),this.img_btnComeToItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.comeToItem,this)},n.touchUp=function(e){var t=system.TipText1.produce("1");t.x=this.lable_count.x+68,t.y=this.lable_count.y-25,t.setData("+1",34,16740609),t.bold=!0,this.group_buttom.addChild(t),egret.Tween.get(t).wait(300).to({y:t.y-50,alpha:0},500).call(function(){system.TipText1.reclaim(t),t.parent&&t.parent.removeChild(t)},this);var a=this;if(GameApp.Manager.dataManager.lucystar>=10){var i=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+this.headline_id+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/headLineVote",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,headline_id:this.headline_id,sign:i},function(e){1==e.st&&(a.obj.votes=a.obj.votes+1,a.lable_count.text="票数 "+a.obj.votes,GameApp.Manager.dataManager.lucystar=e.data.lucky_star,flower.FlowerUI.getInstance().setLucky())},!0,this)}else aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&(GameApp.Manager.controllerManager.headLineItemInforController.hide(),GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.gameMainController.hide,0))},this)},n.setData=function(t,a,i){this.headline_id=t.headline_id,this.bid=t.bid,this.obj=t,this.ts=i,this.ts!=e.HeadLines.toDayTime?(this.btn_ding.touchEnabled=!1,this.img_ding.visible=!1):(this.btn_ding.touchEnabled=!0,this.img_ding.visible=!0),this.lable_whoWorks.text=a+"的作品",this.lable_titleInfo.text=window.hexToDec(t.title),console.log(this.group_imgAndTitle.height,"height");for(var n=0;n<t.content.length;n++){var s=t.content[n];if(0==s.type){var r=new eui.Label;this.group_imgAndTitle.addChild(r),r.text=window.hexToDec(s.content),r.textColor=0,r.size=36,r.lineSpacing=23,r.maxWidth=690,Tools.getInstance().isIphone()&&(r.fontFamily="Heiti SC");var o=new eui.Label;this.group_imgAndTitle.addChild(o),o.text=" ",o.size=20,o.lineSpacing=23,o.maxWidth=690,Tools.getInstance().isIphone()&&(o.fontFamily="Heiti SC")}else if(1==s.type){var h=new e.HeadLinesStarImg;h.setData(s.content),this.group_imgAndTitle.addChild(h);var o=new eui.Label;this.group_imgAndTitle.addChild(o),o.text=" ",o.size=20,o.lineSpacing=23,o.maxWidth=690,Tools.getInstance().isIphone()&&(o.fontFamily="Heiti SC")}}for(var l=0;3>l;l++){var g=mySelfStar.MyselfHeadLines.produce();this.group_threePic.addChild(g)}if(t.userArray&&t.userArray.length>0){this.group_threePic.visible=!0;for(var c=t.userArray.length,d=0;c>d;d++){var u=this.group_threePic.getElementAt(d);u.setData(t.userArray[d])}}this.lable_type.text=window.hexToDec(t.type),"单曲"==this.lable_type.text||"专辑"==this.lable_type.text||"歌曲"==this.lable_type.text?this.img_typeIcon.source="hl_music":"电影"==this.lable_type.text?this.img_typeIcon.source="hl_movie":"电视剧"==this.lable_type.text&&(this.img_typeIcon.source="hl_tv"),this.lable_count.text="票数 "+t.votes},n.comeToItem=function(t){this.ts==e.HeadLines.toDayTime?(GameApp.Manager.controllerManager.headLineItemInforController.hide(),GameApp.Manager.controllerManager.headLinesController.show(1,this.ts,1)):(GameApp.Manager.controllerManager.headLineItemInforController.hide(),GameApp.Manager.controllerManager.headLinesController.show(2,this.ts,1))},n.clear=function(){for(this.scro1.viewport.scrollV=0,this.lable_titleInfo.text="",this.lable_count.text="",this.lable_type.text="";this.group_imgAndTitle.numElements>0;){var e=this.group_imgAndTitle.getElementAt(this.group_imgAndTitle.numElements-1);e.parent&&e.parent.removeChild(e)}for(;this.group_threePic.numElements>0;){var t=this.group_threePic.getElementAt(this.group_threePic.numElements-1);mySelfStar.MyselfHeadLines.reclaim(t),t.parent&&t.parent.removeChild(t)}},a}(eui.Component);e.HeadLineItemInfor=t,egret.registerClass(t,"headLines.HeadLineItemInfor")}(headLines||(headLines={}));var headLines;!function(e){var t=function(t){function a(){t.call(this),this.isUpdateRank=!1,this.arr=[],this.disNum=3,this.skinName="src/view/gameUI/headlines/HeadLinesSkin.exml"}__extends(a,t);var i=__define,n=a,s=n.prototype;return s.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_starNews.fontFamily="Heiti SC",this.lable_addNews.fontFamily="Heiti SC",this.lable_taskTitle.fontFamily="Heiti SC",this.lable_taskDirections.fontFamily="Heiti SC",this.text_title.fontFamily="Heiti SC",this.text_taskDirections.fontFamily="Heiti SC",this.lable_warmTitle.fontFamily="Heiti SC",this.lable_guizhe.fontFamily="Heiti SC"),this.scor1.height=this.stage.stageHeight,this.img_btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.comeToMainGame,this),this.rect_btnLookMore.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectWeekTime,this),this.img_btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addStarNews,this),this.text_taskDirections.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){},this),this.btn_push.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addNews,this)},s.deletweeTime=function(e){console.log("scrol----"),this.scor1.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.deletweeTime,this),this.img_lookMore.scaleY=1;var t=this.group_data.getElementAt(0);t.rect_button.fillColor=16777215,t.rect_button.strokeColor=16777215;for(var a=this.group_data.numElements,i=a-1;i>0;i--){var n=this.group_data.getElementAt(i);mySelfStar.MySelfHeadLinesItem.reclaim(n),n.parent&&n.parent.removeChild(n)}},s.addNews=function(e){var t=this;if(""==this.text_taskDirections.text)return void(this.lable_warmTitle.visible=!0);GameApp.Manager.viewManager.maskStage(.4,!0);var a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+window.decToHex(this.text_title.text)+this.text_taskDirections.text+"&");GameApp.Manager.viewManager.maskStage(.4,!0),Util.sendJson1(GameApp.Manager.dataManager.IP+"/userHeadlineSuggest",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,title:window.decToHex(this.text_title.text),link:this.text_taskDirections.text,sign:a},function(e){1==e.st?(t.text_taskDirections.text="",aler.AlertPanel1.getInstance().show("温馨提示","提交成功","确定",function(){GameApp.Manager.viewManager.clearMask()},this)):aler.AlertPanel1.getInstance().show("温馨提示","提交失败","确定",function(){GameApp.Manager.viewManager.clearMask()},this)},!0,this)},s.addStarNews=function(e){this.type=2,this.grou_task.visible=!0,this.lable_taskTitle.textFlow=(new egret.HtmlTextParser).parser("请在下方输入由“<font color= #0000ff>"+GameApp.Manager.dataManager.star_name+"</font>”主演的电影、电视剧或歌曲名称，审核通过后，作品将进入新番列表，建议粉丝推荐爱豆的近期作品（2个月内新作）。")},s.selectWeekTime=function(e){var t=this;if(console.log(a.timeArr.length,a.timeCd,"length,cd"),1==this.img_lookMore.scaleY){this.img_lookMore.scaleY=-1,this.scor1.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.deletweeTime,this);for(var i=0;i<a.timeArr.length;i++)if(a.timeArr[i]==a.timeCd){var n=this.group_data.getElementAt(0);n.rect_button.fillColor=15461355,console.log("相同的")}else{console.log("不相同");var s=mySelfStar.MySelfHeadLinesItem.produce();this.group_data.addChildAt(s,1+i),s.rect_button.strokeColor=15461355,s.addEventListener("click",this.clickWeekTime,this),a.timeArr[i]==a.toDayTime?s.setData(a.timeArr[i],1):s.setData(a.timeArr[i],2)}}else{this.scor1.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.deletweeTime,this),this.img_lookMore.scaleY=1;var n=this.group_data.getElementAt(0);n.rect_button.fillColor=16777215,n.rect_button.strokeColor=16777215;for(var r=t.group_data.numElements,i=r-1;i>0;i--){var o=this.group_data.getElementAt(i);mySelfStar.MySelfHeadLinesItem.reclaim(o),o.parent&&o.parent.removeChild(o)}}},s.setData=function(t,i,n,s){this.type=i,this.obj=t;if(1==n){this.obj=t;var r=mySelfStar.MySelfHeadLinesItem.produce();if(this.group_data.addChild(r),r.setData(t.currentTs,1),r.rect_button.fillColor=16777215,r.rect_button.strokeColor=16777215,r.addEventListener("click",this.clickWeekTime,this),a.timeCd=t.currentTs,a.toDayTime=t.currentTs,a.ts=t.currentTs,a.isAdd){a.isAdd=!1,t.historyTs.push(t.currentTs);for(var o=0;o<t.historyTs.length;o++){var h=t.historyTs[o];a.timeArr.push(h)}}if(0==t.headline.length)this.lable_starNews.visible=!0;else{this.lable_starNews.visible=!1;for(var o=0;o<t.headline.length;o++){var l=t.headline[o],g=e.HeadLinesItem.produce();g.x=0,g.y=o*g.height,this.group_itemData.addChild(g),g.setData(l,o+1),g.addEventListener("votesUPItem",this.votesUPItem,this),g.rect_btnDing.touchEnabled=!0,g.btn_ding.visible=!0}}}else if(2==n){var r=mySelfStar.MySelfHeadLinesItem.produce();this.group_data.addChild(r),r.setData(s,2),r.rect_button.strokeColor=16777215,r.rect_button.fillColor=16777215,r.addEventListener("click",this.clickWeekTime,this),a.timeCd=s;for(var o=0;o<t.data.length;o++){var l=t.data[o],g=e.HeadLinesItem.produce();g.x=0,g.y=o*g.height,this.group_itemData.addChild(g),g.setData(l,o+1),g.rect_btnDing.touchEnabled=!1,g.btn_ding.visible=!1,g.addEventListener("votesUPItem",this.votesUPItem,this)}}},s.clickWeekTime=function(t){var i=this,n=t.data;if(i.img_lookMore.scaleY=1,a.ts=n.time?n.time:a.toDayTime,n.time==e.HeadLines.timeCd){n.rect_button.fillColor=16777215,n.rect_button.strokeColor=16777215;for(var s=i.group_data.numElements,r=s-1;r>0;r--){var o=this.group_data.getElementAt(r);mySelfStar.MySelfHeadLinesItem.reclaim(o),o.parent&&o.parent.removeChild(o)}}else for(GameApp.Manager.controllerManager.headLinesController.hide(),n.time==e.HeadLines.toDayTime?GameApp.Manager.controllerManager.headLinesController.show(1,n.time,1):GameApp.Manager.controllerManager.headLinesController.show(2,n.time,1);this.group_data.numElements>0;){var o=this.group_data.getElementAt(this.group_data.numElements-1);mySelfStar.MySelfHeadLinesItem.reclaim(o),o.parent&&o.parent.removeChild(o)}},s.votesUPItem=function(e){var t=e.data,a=system.TipText1.produce("1");a.x=t.lable_count.x+68,a.y=t.lable_count.y-25,a.setData("+1",34,16740609),a.bold=!0,t.addChild(a),egret.Tween.get(a).wait(300).to({y:a.y-50,alpha:0},500).call(function(){system.TipText1.reclaim(a),a.parent&&a.parent.removeChild(a)},this);for(var i=0;i<this.group_itemData.numElements;i++){var n=this.group_itemData.getElementAt(i);if(t==n)break;if(t.obj.votes>n.obj.votes){var s=n.lable_Bitrank.text;n.lable_Bitrank.text=t.lable_Bitrank.text,t.lable_Bitrank.text=s;var r=n.img_rank.source;n.img_rank.source=t.img_rank.source,t.img_rank.source=r;var o=n.y;n.y=t.y,t.y=o,t.parent.swapChildren(t,n);break}}},i(s,"factor",function(){return 0},function(e){this.scor1.viewport.scrollV-=5}),s.comeToMainGame=function(e){1==this.type?(this.scor1.viewport.scrollV=0,GameApp.Manager.controllerManager.headLinesController.hide(),GameApp.Manager.controllerManager.gameMainController.show()):2==this.type?(this.type=1,this.grou_task.visible=!1,this.lable_warmTitle.visible=!1,this.text_taskDirections.text=""):3==this.type&&(this.scor1.viewport.scrollV=0,GameApp.Manager.controllerManager.headLinesController.hide())},s.clear=function(){for(this.grou_task.visible=!1,this.arr=[];this.group_itemData.numElements>0;){var t=this.group_itemData.getElementAt(this.group_itemData.numElements-1);e.HeadLinesItem.reclaim(t),t.parent&&t.parent.removeChild(t)}this.deleteTimeItem()},s.deleteTimeItem=function(){for(this.img_lookMore.scaleY=1;this.group_data.numElements>0;){var e=this.group_data.getElementAt(this.group_data.numElements-1);mySelfStar.MySelfHeadLinesItem.reclaim(e),e.parent&&e.parent.removeChild(e)}},a.timeArr=[],a.isAdd=!0,a}(eui.Component);e.HeadLines=t,egret.registerClass(t,"headLines.HeadLines")}(headLines||(headLines={}));var headLines;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/headlines/HeadLinesItemSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.produce=function(e,t){void 0===e&&(e="1"),void 0===t&&(t=0),null==a.cacheDict[e]&&(a.cacheDict[e]=[]);var i,n=a.cacheDict[e];return i=n.length>0?n.pop():new a},a.reclaim=function(e,t){void 0===t&&(t="1"),null==a.cacheDict[t]&&(a.cacheDict[t]=[]);var i=a.cacheDict[t];-1==i.indexOf(e)&&(i.push(e),e.clear())},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_title.fontFamily="Heiti SC",this.lable_count.fontFamily="Heiti SC"),this.rect_next.addEventListener(egret.TouchEvent.TOUCH_TAP,this.comeToItemInfo,this),this.rect_btnDing.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchUp,this)},n.goToThemSelf=function(e){socketio.IoConnect.getInstance().disconnect(),GameApp.Manager.controllerManager.start(this.bid),GameApp.Manager.controllerManager.headLinesController.hide()},n.setData=function(e,t){this.bid=e.bid,this.obj=e,this.headline_id=e.headline_id,this.star_name=window.hexToDec(e.star_name),RES.getResByUrl(e.poster,this.addStarImg,this),RES.getResByUrl(e.head_img,this.addIcoImg,this),this.lable_type.text=window.hexToDec(e.type),"单曲"==this.lable_type.text||"专辑"==this.lable_type.text||"歌曲"==this.lable_type.text?this.img_typeIcon.source="hl_music":"电影"==this.lable_type.text?this.img_typeIcon.source="hl_movie":"电视剧"==this.lable_type.text&&(this.img_typeIcon.source="hl_tv"),1==t?this.img_rank.source="n1":2==t?this.img_rank.source="n2":3==t?this.img_rank.source="n3":this.lable_Bitrank.text="n"+t;var a=window.hexToDec(e.title);if(a.length>=13){var i=a.substring(0,13);this.lable_title.text=i+"..."}else this.lable_title.text=a;if(this.lable_count.text="票数 "+e.votes,e.star_array&&e.star_array.length>0)for(var t=0;t<e.star_array.length;t++){var n=mySelfStar.StarIcon.produce();this.group_starIcon.addChild(n),n.setData(e.star_array[t],68,68,68,68)}},n.addStarImg=function(e){this.img_pic.texture=e},n.addIcoImg=function(e){this.img_icon.texture=e},n.touchUp=function(e){var t=this;if(GameApp.Manager.dataManager.lucystar>=10){var a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+this.headline_id+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/headLineVote",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,headline_id:this.headline_id,sign:a},function(e){1==e.st&&(t.obj.votes=t.obj.votes+1,t.lable_count.text="票数 "+t.obj.votes,GameApp.Manager.dataManager.lucystar=e.data.lucky_star,flower.FlowerUI.getInstance().setLucky(),t.dispatchEventWith("votesUPItem",!1,this))},!0,this)}else aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&(GameApp.Manager.controllerManager.headLinesController.hide(),GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.gameMainController.hide,0))},this)},n.comeToItemInfo=function(t){GameApp.Manager.controllerManager.headLinesController.hide(),GameApp.Manager.controllerManager.headLineItemInforController.show(this.headline_id+"",this.star_name,e.HeadLines.ts)},n.clear=function(){for(this.lable_title.text="",this.lable_count.text="",this.img_icon.source=null,this.img_rank.source=null,this.img_pic.source=null,this.img_pic.texture=null,this.lable_Bitrank.text="";this.group_starIcon.numElements>0;){var e=this.group_starIcon.getElementAt(this.group_starIcon.numElements-1);mySelfStar.StarIcon.reclaim(e),e.parent&&e.parent.removeChild(e)}},a.cacheDict={},a}(eui.Component);e.HeadLinesItem=t,egret.registerClass(t,"headLines.HeadLinesItem")}(headLines||(headLines={}));var headLines;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(e,t,a){console.log("==1",e,t),this.type=e,this.ts=t?t:0,this.comeType=a,this.loaded?this.initUI():this.loading()},n.initUI=function(){var t=this;if(this.headLines||(this.headLines=new e.HeadLines),this.BottomUIStage.addChild(this.headLines),1==this.type){var a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+GameApp.Manager.dataManager.bid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getHeadlineData",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,sign:a},function(e){1==e.st&&t.headLines.setData(e.data,t.comeType,1,t.ts)},!0,this)}else{var a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+GameApp.Manager.dataManager.bid+this.ts+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getHeadlineHistoryData",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,ts:this.ts,sign:a},function(e){1==e.st&&t.headLines.setData(e,t.comeType,2,this.ts)},!0,this)}},n.hide=function(){this.headLines.parent&&(this.headLines.parent.removeChild(this.headLines),this.headLines.clear())},n.loading=function(){this.initUI()},n.load_end=function(){this.loaded=!0,this.initUI()},a}(common.BaseView);e.HeadlinesManager=t,egret.registerClass(t,"headLines.HeadlinesManager")}(headLines||(headLines={}));var headLines;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/headlines/HeadLinesStarImgSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.setData=function(e){RES.getResByUrl(e,this.setImg,this)},i.setImg=function(e){var t=e.textureWidth,a=e.textureHeight,i=698/t;this.img_pic.width=698,this.img_pic.height=a*i,this.img_pic.texture=e},t}(eui.Component);e.HeadLinesStarImg=t,egret.registerClass(t,"headLines.HeadLinesStarImg")}(headLines||(headLines={}));var mySelfStar;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/headlines/mySelfStar/MyselfHeadLinesSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_name.fontFamily="Heiti SC",this.lable_ticNumber.fontFamily="Heiti SC"),this.img_personIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){var t=this;this.userId>0&&userPanel.UserPanel.getInstance().open(this.userId,t.bid,t.group_openid),e.stopPropagation()},this)},i.setData=function(e){console.log("-------"),this.lable_null.visible=!1,this.userId=e.user_id,this.bid=e.bid,this.group_openid=e.group_openid;var t=window.hexToDec(e.user_name);if(t.length>=4){var a=t.substring(0,4);this.lable_name.text=a+".."}else this.lable_name.text=t;this.lable_ticNumber.text=e.votes+"票",RES.getResByUrl(e.user_pic,this.load_personIcon,this,RES.ResourceItem.TYPE_IMAGE)},i.load_personIcon=function(e){this.img_starIco.texture=e},i.clear=function(){this.lable_null.visible=!0,this.img_starIco.source=null,this.img_starIco.source="j_imgButton",this.lable_name.text="",this.lable_ticNumber.text=""},t.cacheDict={},t}(eui.Component);e.MyselfHeadLines=t,egret.registerClass(t,"mySelfStar.MyselfHeadLines")}(mySelfStar||(mySelfStar={}));var mySelfStar;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/headlines/mySelfStar/MyselfHeadLinesItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_time.fontFamily="Heiti SC",this.lable_pro.fontFamily="Heiti SC"),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeTime,this)},i.setData=function(e,t){this.time=e,this.lable_time.text=Tools.getInstance().getTime6(e),1==t?(this.lable_pro.visible=!1,this.lable_time.textColor=1358070):(this.lable_time.textColor=11842740,this.lable_pro.visible=!0,this.lable_pro.textColor=11842740)},i.changeTime=function(e){console.log("------change");var t=this;t.dispatchEventWith("click",!1,this)},i.clear=function(){this.lable_time.text=""},t.cacheDict={},t}(eui.Component);e.MySelfHeadLinesItem=t,egret.registerClass(t,"mySelfStar.MySelfHeadLinesItem")}(mySelfStar||(mySelfStar={}));var mySelfStar;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/headlines/mySelfStar/StarIconSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){},i.goTo=function(e){},i.setData=function(e,t,a,i,n){this.btn_icon.width=t,this.btn_icon.height=a,this.img_icon.width=i,this.img_icon.height=n,RES.getResByUrl(e.head_img,this.onCompFun,this,RES.ResourceItem.TYPE_IMAGE)},i.onCompFun=function(e){this.img_icon.texture=e},i.clear=function(){this.img_icon.texture=null},t.cacheDict={},t}(eui.Component);e.StarIcon=t,egret.registerClass(t,"mySelfStar.StarIcon")}(mySelfStar||(mySelfStar={}));var live;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(e){this.stateIndex=e,this.loaded?this.init():this.loading()},n.init=function(){if(this.liveChatRoomUI||(this.liveChatRoomUI=new e.LiveChatRoomUI),this.BottomUIStage.addChild(this.liveChatRoomUI),this.liveChatRoomUI.open(this.stateIndex),console.log(this.stateIndex,"-----"),0==this.stateIndex);else{console.log(this.stateIndex,"直播");var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getLiveLastMessage",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,sign:t},function(t){1==t.st&&e.LiveTalkChat.getInstance().adds(t.lastMsg)},!0,this)}},n.initUI=function(e){},n.hide=function(){this.liveChatRoomUI&&(this.liveChatRoomUI.parent.removeChild(this.liveChatRoomUI),this.liveChatRoomUI.clear())},n.loading=function(){this.init()},n.load_end=function(){this.init(),this.loaded=!0},a}(common.BaseView);
e.LiveChatRoomManager=t,egret.registerClass(t,"live.LiveChatRoomManager")}(live||(live={}));var live;!function(e){var t=function(t){function a(){t.call(this),this.src="",this.skinName="src/view/gameUI/liveChatRoom/LiveChatRoomUISkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.setData=function(e){this.obj=e,GameApp.Manager.viewManager.liveChatRoomManager.liveChatRoomUI&&GameApp.Manager.viewManager.liveChatRoomManager.liveChatRoomUI.setData(e)},n.childrenCreated=function(){var t=this;Tools.getInstance().isIphone()&&(this.lbl1.fontFamily="Heiti SC",this.txtInput.fontFamily="Heiti SC"),this.lbl1.text=GameApp.Manager.dataManager.star_name+"的直播间",this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.groupBottom.y=this.stage.stageHeight-642;var a=e.LiveTalkChat.getInstance();this.groupBottom.addChild(a),a.y=252,this.btnFX.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/starLiveShare",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,sign:e},function(e){system.Share.share(e,function(e){1==e&&system.TipText.produce().open("发送成功")})},!0,this)},this),this.btnGift.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnGift_tap,this),this.btnTalk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.talk_tap,this),this.txtInput.addEventListener(egret.FocusEvent.FOCUS_IN,function(){t.timevar&&clearTimeout(t.timevar),"和大家说点什么"==t.txtInput.text&&(t.txtInput.text=""),t.btnGift.visible=!1,t.btnTalk.visible=!0},this),this.txtInput.addEventListener(egret.FocusEvent.FOCUS_OUT,function(){""==t.txtInput.text?(t.txtInput.text="和大家说点什么",t.timevar&&clearTimeout(t.timevar),t.btnGift.visible=!0,t.btnTalk.visible=!1):(t.timevar&&clearTimeout(t.timevar),t.timevar=setTimeout(function(){t.btnGift.visible=!0,t.btnTalk.visible=!1},2e3))},this)},n.setData=function(t){switch(t.state){case 0:this.lbl1.text="";break;case 1:if(this.src=t.link,this.parent){this.groupBottom.visible=!0,this.group_pro.visible=!1,GameApp.Manager.viewManager.hideBackGroup(),e.LiveTalkChat.getInstance().come(),this.lbl1.text=window.hexToDec(e.LiveChatRoomUI.obj.title);var a=e.LiveChatRoomUI.obj.link;window.playVideo(420*GameApp.Manager.dataManager.sc,90*GameApp.Manager.dataManager.sc,a)}break;case 2:this.src="",this.parent&&this.close()}},n.btnGift_tap=function(e){flower.FlowerUI.getInstance().open(this.groupBottom),flower.FlowerUI.getInstance().y=332,e.stopPropagation()},n.talk_tap=function(){if(console.log("发送:"+this.txtInput.text),""!=this.txtInput.text&&"和大家说点什么"!=this.txtInput.text){var e=this.txtInput.text;socketio.IoConnect.getInstance().sendMessage(data.PomeloData.sendTalk,{message:e},function(e){},this)}this.txtInput.text="",this.timevar&&clearTimeout(this.timevar),this.btnGift.visible=!0,this.btnTalk.visible=!1},n.talk=function(e){},n.open=function(t){if(GameApp.Manager.dataManager.visitor>0?this.btnFX.visible=!1:this.btnFX.visible=!0,0==t)this.group_pro.visible=!0,RES.getResByUrl(a.obj.poster,this.load_end0,this,RES.ResourceItem.TYPE_IMAGE),this.groupBottom.visible=!1,this.lbl1.text="";else{this.group_pro.visible=!1,GameApp.Manager.viewManager.hideBackGroup(),e.LiveTalkChat.getInstance().come(),this.lbl1.text=window.hexToDec(e.LiveChatRoomUI.obj.title);var i=e.LiveChatRoomUI.obj.link;window.playVideo(420*GameApp.Manager.dataManager.sc,90*GameApp.Manager.dataManager.sc,i),this.groupBottom.visible=!0}},n.load_end0=function(e){this.img_bgImg.texture=e},n.clear=function(){window.endVideo(),e.LiveTalkChat.getInstance().leave(),GameApp.Manager.viewManager.showBackGroup()},n.close=function(){GameApp.Manager.viewManager.liveChatRoomManager.hide(),GameApp.Manager.controllerManager.gameMainController.show()},a}(eui.Component);e.LiveChatRoomUI=t,egret.registerClass(t,"live.LiveChatRoomUI")}(live||(live={}));var live;!function(e){var t=function(t){function a(){t.call(this),this.arrObj=[],this.arr=[],this.canUpdate=!0,this.touch=!1,this.maxlength=50,this.isleave=!1,this.skinName="src/view/gameUI/liveChatRoom/LiveTalkChatSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},n.childrenCreated=function(){this.y=egret.MainContext.instance.stage.stageHeight-420,this.scroll1.addEventListener(eui.UIEvent.CHANGE_END,this.viweport_touch_end,this),this.scroll1.addEventListener(eui.UIEvent.CHANGE,this.viweport_touch_begin,this)},n.viweport_touch_begin=function(){this.touch||(console.log("viweport_touch_begin"),this.touch=!0,this.canUpdate=!1,egret.Tween.removeTweens(this.scroll1.viewport),egret.Tween.removeTweens(this))},n.viweport_touch_end=function(){this.touch&&(this.touch=!1,console.log("viweport_touch_end"),egret.Tween.removeTweens(this),egret.Tween.get(this).wait(2e3).call(function(){this.touchend()},this))},n.touchend=function(){if(this.arrObj.length>this.maxlength){for(var t in this.arr){var a=this.arr[t];e.LiveTalkChatItem.reclaim(a),a.parent&&a.parent.removeChild(a)}this.arr=[];for(var i=this.arrObj.length-this.maxlength;i<this.arrObj.length;i++){var n=e.LiveTalkChatItem.produce();this.groupData.addChild(n),n.validateNow(),n.setData(this.arrObj[i]),this.arr.length>0?n.y=this.arr[this.arr.length-1].y+this.arr[this.arr.length-1].getHeight()+20:n.y=0,this.arr.push(n)}this.arrObj=[];var s=this.scroll1.viewport.contentHeight-this.scroll1.viewport.height;egret.Tween.get(this.scroll1.viewport).to({scrollV:s},300).call(function(){this.canUpdate=!0},this)}else if(this.arrObj.length>0){for(;this.arrObj.length>0;)this.addItem(this.arrObj.shift(),!1);this.validateNow();var s=this.scroll1.viewport.contentHeight-this.scroll1.viewport.height;egret.Tween.get(this.scroll1.viewport).to({scrollV:s},300).call(function(){this.canUpdate=!0},this)}else this.canUpdate=!0},n.update=function(e){this.canUpdate&&!this.isleave&&this.arrObj.length>0&&(console.log("additem"),this.canUpdate=!1,this.addItem(this.arrObj.shift()))},n.leave=function(){this.isleave=!0},n.come=function(){if(this.isleave&&(this.isleave=!1,this.arrObj.length>0)){for(this.arrObj.length>this.maxlength&&(this.arrObj=this.arrObj.slice(this.arrObj.length-this.maxlength,this.arrObj.length-1));this.arrObj.length>0;)this.addItem(this.arrObj.shift(),!1);this.validateNow();var e=this.scroll1.viewport.contentHeight-this.scroll1.viewport.height;this.scroll1.viewport.scrollV=e>=0?e:0,this.canUpdate=!0}},n.addItem=function(t,a){if(void 0===a&&(a=!0),this.arr.length==this.maxlength){var i=this.arr.shift();e.LiveTalkChatItem.reclaim(i),i.parent&&i.parent.removeChild(i);for(var n=0;n<this.arr.length;n++){var s=this.arr[n];0==n?s.y=0:s.y=this.arr[n-1].y+this.arr[n-1].getHeight()+20,console.log("大于10的y:"+n+" "+s.y)}a&&this.setSv()}var r=e.LiveTalkChatItem.produce();if(this.groupData.addChild(r),r.setData(t),this.setY(r),this.arr.push(r),a){this.validateNow();var o=this.scroll1.viewport.contentHeight-this.scroll1.viewport.height;o>=0?egret.Tween.get(this.scroll1.viewport).to({scrollV:o},100).call(function(){this.canUpdate=!0},this):(this.scroll1.viewport.scrollV=0,this.canUpdate=!0)}},n.setY=function(e){this.arr.length>0?e.y=this.arr[this.arr.length-1].y+this.arr[this.arr.length-1].getHeight()+20:e.y=0},n.setSv=function(){var e=this.scroll1.viewport.contentHeight-this.scroll1.viewport.height;this.scroll1.viewport.scrollV=e>=0?e:0},a.receiveTalk=function(e){console.log("聊天:",e),this._instance&&this._instance.add(e)},n.add=function(e){if(!this.isleave)switch(e.type){case 1:case 19:this.arrObj.push(e)}},n.adds=function(e){this.clear();for(var t in e)this.addItem(e[t],!1);this.validateNow(),this.setSv()},n.setPoint=function(){for(var e=0;e<this.arr.length;e++){this.arr[e]}},n.clear=function(){for(var t=0;t<this.arr.length;t++){var a=this.arr[t];a.parent&&a.parent.removeChild(this),e.LiveTalkChatItem.reclaim(a)}this.groupData.removeChildren(),this.arrObj=[],this.arr=[],this.touch=!1,this.canUpdate=!0},a}(eui.Component);e.LiveTalkChat=t,egret.registerClass(t,"live.LiveTalkChat")}(live||(live={}));var live;!function(e){var t=function(e){function t(){e.call(this),this.type=1,this._w=0,this.gift_id=0,this.intimate_level=0,this.group_openid=0,this.skinName="src/view/gameUI/liveChatRoom/LiveChatItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){this.lblTalk.parent&&this.lblTalk.parent.removeChild(this.lblTalk),this.lblTalk1.parent&&this.lblTalk1.parent.removeChild(this.lblTalk1),this.lblDesc.parent&&this.lblDesc.parent.removeChild(this.lblDesc),this.lblDesc1.parent&&this.lblDesc1.parent.removeChild(this.lblDesc1),this.lblName.parent&&this.lblName.parent.removeChild(this.lblName),this.lblName1.parent&&this.lblName1.parent.removeChild(this.lblName1),this.bmpIcon.visible=!1,this.bmpBuluo.visible=!1,Tools.getInstance().isIphone()&&(this.lblTitle.fontFamily="Heiti SC",this.lblDesc.fontFamily="Heiti SC",this.lblDesc1.fontFamily="Heiti SC"),this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){switch(this.type){case 1:case 6:case 7:}e.stopPropagation()},this)},i.getHeight=function(){var e=0;switch(this.type){case 1:e=32;break;case 19:e=this.lblTalk.textHeight}return e},i.setData=function(e){switch(e.type){case 1:this.gift(e);break;case 19:this.talk(e)}},i.gift=function(e){this.addChild(this.lblName1),this.addChild(this.lblName),this.addChild(this.lblDesc1),this.addChild(this.lblDesc),this.uid=e.uid,this.gift_id=e.id,this.intimate_level=e.intimate_level,this.type=e.type,this.group_openid=e.group_openid?e.group_openid:0;var t="";switch(this.type){case 1:this.lblName.x=96,this.lblName1.x=97,this.bmpIcon.visible=!0,this.lblTitle.visible=!0,this.bmpTitleBack.visible=!0,this.bmpBuluo.visible=!1,this.bmpIcon.source="p_gift"+this.gift_id,this.bmpTitleBack.source=data.DataManager.getintimateIcon(this.intimate_level),this.lblTitle.text=data.DataManager.getintimateLevel(this.intimate_level)+"",t=window.hexToDec(e.user_name);var a=0;this.lblDesc.textFlow=(new egret.HtmlTextParser).parser("<font color=#FF6479>送出了"+data.DataManager.getGiftName(this.gift_id)+"</font>"),this.lblDesc1.textFlow=(new egret.HtmlTextParser).parser("<font color=#000000>送出了"+data.DataManager.getGiftName(this.gift_id)+"</font>"),Tools.getInstance().isIphone()?(this.lblName.text=t,this.lblName1.text=t,this.validateNow(),a=20*window.Emoji.emojiLength(t),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+a+5,this.lblDesc1.x=this.lblDesc.x+1):(this.lblName.textFlow=(new egret.HtmlTextParser).parser(window.Emoji.emojiReplace(t)),this.lblName1.text=this.lblName.text,this.validateNow(),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+5,this.lblDesc1.x=this.lblDesc.x+1),this.bmpIcon.x=this.lblDesc.textWidth+this.lblDesc.x+10}},i.talk=function(e){this.addChild(this.lblTalk1),this.addChild(this.lblTalk),this.uid=e.uid,this.gift_id=e.id,this.intimate_level=e.intimate_level,this.type=e.type,this.group_openid=e.group_openid?e.group_openid:0;var t="";this.lblName.x=96,this.lblName1.x=97,this.bmpIcon.visible=!1,this.lblTitle.visible=!0,this.bmpTitleBack.visible=!0,this.bmpBuluo.visible=!1,this.bmpTitleBack.source=data.DataManager.getintimateIcon(this.intimate_level),this.lblTitle.text=data.DataManager.getintimateLevel(this.intimate_level)+"",t=window.hexToDec(e.user_name);if(Tools.getInstance().isIphone()){var a=window.Emoji.emojiLength(t);this.lblTalk.textFlow=(new egret.HtmlTextParser).parser(t+this.addKongge(a)+": <font color=#ffffff>"+window.hexToDec(e.message)+"</font>"),this.lblTalk1.textFlow=(new egret.HtmlTextParser).parser(t+this.addKongge(a)+": <font color=#000000>"+window.hexToDec(e.message)+"</font>"),this.validateNow()}else this.lblTalk.textFlow=(new egret.HtmlTextParser).parser(t+": <font color=#ffffff>"+window.Emoji.emojiReplace(window.hexToDec(e.message))+"</font>"),this.lblTalk1.textFlow=(new egret.HtmlTextParser).parser(t+": <font color=#000000>"+window.Emoji.emojiReplace(window.hexToDec(e.message))+"</font>"),this.validateNow();this.height=this.lblTalk.textHeight+2},i.addKongge=function(e){var t="";switch(e){case 1:t="  ";break;case 2:t="    ";break;case 3:t="      ";break;case 4:t="        ";break;case 5:t="          ";break;case 6:t="            ";break;case 7:t="              ";break;case 8:t="                "}return t},i.getStringLen=function(e){return e},i.clear=function(){this.lblTalk.parent&&this.lblTalk.parent.removeChild(this.lblTalk),this.lblTalk1.parent&&this.lblTalk1.parent.removeChild(this.lblTalk1),this.lblDesc.parent&&this.lblDesc.parent.removeChild(this.lblDesc),this.lblDesc1.parent&&this.lblDesc1.parent.removeChild(this.lblDesc1),this.lblName.parent&&this.lblName.parent.removeChild(this.lblName),this.lblName1.parent&&this.lblName1.parent.removeChild(this.lblName1),this.height=32,this.bmpIcon.visible=!0,this.lblTitle.visible=!0,this.bmpTitleBack.visible=!0,this.bmpBuluo.visible=!1,this.lblTitle.text="",this.lblDesc.text="",this.lblDesc1.text="",this.bmpIcon.source=null},t.cacheDict={},t}(eui.Component);e.LiveTalkChatItem=t,egret.registerClass(t,"live.LiveTalkChatItem")}(live||(live={}));var mainUI;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/mainUI/BtnBuluoSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lbltxt.fontFamily="Heiti SC",this.lbltxt1.fontFamily="Heiti SC")},i.setData=function(e){var t=this;this.lbltxt.text=e,setTimeout(function(){t.lbltxt1.x=t.lbltxt.x+1,t.lbltxt1.y=t.lbltxt.y+1,t.lbltxt1.text=e},500,this)},t}(eui.Component);e.BtnBuluo=t,egret.registerClass(t,"mainUI.BtnBuluo")}(mainUI||(mainUI={}));var mainUI;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/mainUI/BtnMainSkin.exml",this.cacheAsBitmap=!0}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC")},i.setData=function(e,t){this.icon="p_"+e,this.lblText.text=t},i.setNum=function(e){e?(this.lblNum.visible=!0,this.lblNum.text=e):this.lblNum.visible=!1},t}(eui.Button);e.BtnMain=t,egret.registerClass(t,"mainUI.BtnMain")}(mainUI||(mainUI={}));var mainUI;!function(e){var t=function(e){function t(t){e.call(this,t),this.loaded=!1,this.openstate="1",this.viewManager=t}__extends(t,e);var a=(__define,t),i=a.prototype;return i.showMain=function(){this.gameMainUI.parent||this.BottomUIStage.addChild(this.gameMainUI)},i.initData=function(e){this.gameMainUI.initData(e)},i.joinStar=function(e){var t=this,a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/chooseStar",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,reset:GameApp.Manager.dataManager.reset,sign:a},function(a){e(),t.resetData(a)},!0,this)},i.resetData=function(e){var t=this;switch(e.st){case 1:GameApp.Manager.dataManager.reset=0,GameApp.Manager.dataManager.group_openid=e.new_group_openid||GameApp.Manager.dataManager.group_openid,system.Share.share(e,function(){t.resetMainPage()});break;case 2:GameApp.Manager.dataManager.bid=e.bid,this.resetMainPage();break;case 3:system.Share.share(e,function(){})}},i.resetMainPage=function(){var e=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/mainPage",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,reset:GameApp.Manager.dataManager.reset,sign:e},function(e){1==e.st?(socketio.IoConnect.getInstance().initPomelo(GameApp.Manager.dataManager.bid,GameApp.Manager.dataManager.uid),GameApp.Manager.dataManager.visitor=e.visitor,GameApp.Manager.dataManager.level=e.star_level,GameApp.Manager.dataManager.star_name=window.hexToDec(e.star_name),GameApp.Manager.dataManager.user_name=window.hexToDec(e.user_name),GameApp.Manager.dataManager.exp=e.exp,GameApp.Manager.dataManager.need_exp=e.need_exp,GameApp.Manager.dataManager.nowImg=e.img,GameApp.Manager.dataManager.shadow_img=e.shadow_img,GameApp.Manager.dataManager.lucystar=e.lucky_star,GameApp.Manager.dataManager.egg_cd=e.egg_cd,GameApp.Manager.dataManager.egg_time=(new Date).getTime(),GameApp.Manager.dataManager.heart_num=e.heart_num,GameApp.Manager.dataManager.appid=e.appid,flower.FlowerUI.getInstance().initData(e.gift),GameApp.Manager.viewManager.gameMainManager.initData(e),0==GameApp.Manager.dataManager.visitor&&(GameApp.Manager.dataManager.resetState=e.resetState)):console.log("注册失败:"+e.st)},!0,this)},i.show=function(e){void 0===e&&(e=""),this.loaded||this.load_end(),this.openstate=e,this.initUI()},i.hide=function(){this.BottomUIStage.removeChild(this.gameMainUI),this.gameMainUI.hide()},i.initUI=function(){this.gameMainUI.parent||this.BottomUIStage.addChild(this.gameMainUI),this.callS()},i.callS=function(){this.gameMainUI.setData()},i.loading=function(){GameApp.Manager.controllerManager.loader.moduleLoading(["public"],this.load_end,this)},i.load_end=function(){this.viewManager.addStageResizeEvent("mainUI",this.gameMainUI.resize,this.gameMainUI),this.loaded=!0},t}(common.BaseView);e.GameMainManager=t,egret.registerClass(t,"mainUI.GameMainManager")}(mainUI||(mainUI={}));var mainUI;!function(e){var t=function(t){function a(){t.call(this),this.index=0,this.addEventListener(eui.UIEvent.CREATION_COMPLETE,this.create_complete,this),this.touchEnabled=!1}__extends(a,t);var i=(__define,a),n=i.prototype;return n.create_complete=function(){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.create_complete,this),this.resize()},n.initData=function(e){this.mainUI&&(this.mainUI.setData(e),1==GameApp.Manager.dataManager.topEnter&&(GameApp.Manager.dataManager.topEnter=2))},n.sendF=function(e,t){void 0===t&&(t=!0),t&&(this.mainUI.setHot(e.id),this.mainUI.barrageManager.add(e)),this.mainUI.mbarrageUI.add(e),live.LiveTalkChat.receiveTalk(e),e.uid==GameApp.Manager.dataManager.uid&&this.mainUI.setLevel(e.intimate_level)},n.takecharm=function(e){},n.getLuckyStarByServer=function(){var e=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/syncLuckyStar",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,sign:e},function(e){this.getLuckyStar(e)},!0,this)},n.getLuckyStar=function(e){console.log("luckystar返回监听:",e);var t=this;if(e)switch(e.st){case 1:pay.PayUI.getLuckyStarNum>0&&GameApp.Manager.dataManager.lucystar==e.lucky_star?(pay.PayUI.getLuckyStarNum--,setTimeout(function(){t.getLuckyStarByServer()},500,this)):(pay.PayUI.getLuckyStarNum=3,GameApp.Manager.dataManager.lucystar=e.lucky_star,this.setLucky())}},n.setLucky=function(){flower.FlowerUI.getInstance().setLucky()},n.setData=function(){this.mainUI?this.addChild(this.mainUI):(this.mainUI=new e.MainUI,this.addChild(this.mainUI)),this.alpha=0,this.mainUI.setData1(),egret.Tween.get(this).to({alpha:1},500),this.mainUI.mbarrageUI.come()},n.hide=function(){this.mainUI&&this.mainUI.parent&&(this.removeChild(this.mainUI),this.mainUI.clear(),this.mainUI.mbarrageUI.leave())},n.clear=function(){},n.update=function(e){this.mainUI&&this.mainUI.updata(e)},n.resize=function(){this.mainUI&&this.mainUI.resize()},a}(eui.Group);e.GameMainUI=t,egret.registerClass(t,"mainUI.GameMainUI")}(mainUI||(mainUI={}));var mainUI;!function(e){var t=function(e){function t(){e.call(this),this.uid=0,this.isLoad=!1,this.level=0,this.star_index=0,this._sc=1,this.humen=new eui.Image,this.addChild(this.humen),this.touchEnabled=!0,this.scaleX=this.scaleY=GameApp.sc}__extends(t,e);var a=__define,i=t,n=i.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},n.setScale=function(e){this._sc=e},a(n,"sc",function(){return this._sc},function(e){this._sc=e,this.humen.scaleX=e,this.humen.scaleY=e}),n.setData=function(e,t){this.setImg(e),this.level=t},n.resetData=function(e){this.isLoad=!0,this.url=e.path,this.uid=e.id},n.setImg=function(e){this.url!=e&&(this.isLoad=!0),this.url=e},n.load=function(){this.isLoad&&(this.isLoad=!1,RES.getResByUrl(this.url,this.load_end,this))},n.load_end=function(e){this.humen.source=e,this.humen.anchorOffsetX=.5*e._sourceWidth,this.humen.anchorOffsetY=1*e._sourceHeight,this.y=e._sourceHeight},n.clear=function(){this.humen.source=null,this.isLoad=!0,this.url="",this._sc=0},t.cacheDict={},t}(eui.Group);e.HumenBody=t,egret.registerClass(t,"mainUI.HumenBody")}(mainUI||(mainUI={}));var mainUI;!function(e){var t=function(t){function a(){t.call(this),this.star_level=0,this.star_index=0,this.bodyArr=[],this.bodytx=!1,this.state=0,this.bleft=150,this.bcenter=375,this.bright=600,this.tx=0,this.tt=0,this.tb=!0,this.humenDH=!1,this.init()}__extends(a,t);var i=(__define,a),n=i.prototype;return n.init=function(){this.groupBody=new eui.Group,this.groupBody.width=750,this.anchorOffsetX=375,this.x=375,this.addChild(this.groupBody),this.bmpTouch=new eui.Rect,this.bmpTouch.width=this.groupBody.width,this.bmpTouch.height=this.groupBody.height,this.bmpTouch.graphics.beginFill(16711680),this.bmpTouch.graphics.drawRect(0,0,this.groupBody.width,this.groupBody.height),this.groupBody.addChild(this.bmpTouch),this.bmpTouch.alpha=0,this.groupBody.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.bmptouch_begin,this)},n.setAny=function(e){this.anchorOffsetY=e},n.bmptouch_begin=function(e){0==this.state&&(this.tb=!0,this.tt=egret.getTimer(),this.tx=e.stageX,this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.tend,this))},n.tend=function(e){egret.getTimer()-this.tt<300&&(this.tx-e.stageX>50?this.lastClick():e.stageX-this.tx>50&&this.nextClick()),this.tb=!1,egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.tend,this)},n.body_tap=function(e){if(2!=this.state){var t=e.currentTarget;this.star_index==t.star_index||(t.star_index<this.star_index?this.lastbody_tap():this.nextbody_tap())}},n.lastbody_tap=function(){this.nextClick()},n.nextbody_tap=function(){this.lastClick()},n.centerClick=function(){0==this.state?(this.state=1,this.setBody()):(this.state=0,this.setBody())},n.lastClick=function(){if(this.star_index<this.star_level-1&&0==this.state&&!this.humenDH){var e,t,a,i;this.star_index+2<this.bodyArr.length?(e=this.bodyArr[this.star_index+2],this.groupBody.addChild(e),this.setNext(e),e.x=750,egret.Tween.get(e).to({x:this.bright},300)):this.star_index+2==this.bodyArr.length&&(e=this.shadowBody,this.groupBody.addChild(e),this.setNext(e),e.x=750,egret.Tween.get(e).to({x:this.bright},300)),t=this.bodyArr[this.star_index+1],a=this.bodyArr[this.star_index],this.humenDH=!0,egret.Tween.get(t).to({x:this.bcenter,sc:a.sc,y:a.y},300).call(function(){this.humenDH=!1,this.setBody()},this),egret.Tween.get(a).to({x:this.bleft,sc:t.sc,y:t.y},300),this.star_index>0&&(i=this.bodyArr[this.star_index-1],egret.Tween.get(i).to({x:0},300)),this.star_index++}},n.nextClick=function(){if(this.star_index>0&&0==this.state&&!this.humenDH){var e,t,a,i;this.star_index>1&&(e=this.bodyArr[this.star_index-2],this.groupBody.addChild(e),this.setLast(e),e.x=0,egret.Tween.get(e).to({x:this.bleft},300)),t=this.bodyArr[this.star_index-1],a=this.bodyArr[this.star_index],i=this.getNext(),i||(i=this.shadowBody),this.star_index--,this.humenDH=!0,egret.Tween.get(t).to({x:this.bcenter,sc:a.sc,y:a.y},300),egret.Tween.get(a).to({x:this.bright,sc:t.sc,y:t.y},300),egret.Tween.get(i).to({x:750},300).call(function(){this.humenDH=!1,this.setBody()},this)}},n.getBodyById=function(e){var t;if(this.bodyArr.length>0)for(var a in this.bodyArr){var i=this.bodyArr[a];if(i.uid==e){t=i;break}}return t},n.clearBodys=function(){var t=0;for(t=this.bodyArr.length-1;t>=0;t--){var a=this.bodyArr[t];a.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.body_tap,this),e.HumenBody.reclaim(a),a.parent&&this.groupBody.removeChild(a)}this.bodyArr=[]},n.setBodyArr=function(){var t,a=0;for(a=0;a<this.star_level;a++)t=new e.HumenBody,this.bodyArr.push(t),t.star_index=a,a==this.star_level-1&&(t.setData(this.bodySrc,a+1),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.body_tap,this))},n.setData=function(){this.star_level=GameApp.Manager.dataManager.level,this.star_index=this.star_level-1,this.bodySrc=GameApp.Manager.dataManager.nowImg,this.clearBodys(),this.setBodyArr(),this.setBody()},n.setDatas=function(t,a){this.star_level=t.length,this.star_index=this.star_level-1;for(var i,n=0;n<t.length;n++)n<this.bodyArr.length?(i=this.bodyArr[n],i.url!=t[n]&&(i.setData(t[n],n+1),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.body_tap,this))):(i=new e.HumenBody,this.bodyArr.push(i),i.star_index=n,i.setData(t[n],n+1),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.body_tap,this));this.shadowBody||(this.shadowBody=new e.HumenBody,this.shadowBody.setData(a,1)),this.state=0,this.setBody()},n.setLast=function(e){e.x=this.bleft,e.load(),e.sc=.8},n.setNow=function(e){e.x=this.bcenter,e.load(),e.sc=1},n.setNext=function(e){e.x=this.bright,e.load(),e.sc=.8},n.getNext=function(){return this.star_index+1<this.bodyArr.length?this.bodyArr[this.star_index+1]:this.shadowBody},n.getLast=function(){return this.star_index>0?this.bodyArr[this.star_index-1]:null},n.setBody=function(){if(this.star_level>0){var e=0;for(e=this.bodyArr.length-1;e>=0;e--){var t=this.bodyArr[e];t.parent&&this.groupBody.removeChild(t)}this.shadowBody&&this.shadowBody.parent&&this.groupBody.removeChild(this.shadowBody);var a,i,n;switch(this.state){case 0:n=this.getNext(),n&&(this.setNext(n),this.groupBody.addChild(n)),a=this.getLast(),a&&(this.setLast(a),this.groupBody.addChild(a)),i=this.bodyArr[this.star_index],this.setNow(i),this.groupBody.addChild(i);break;case 1:i=this.bodyArr[this.star_index],this.setNow(i),i.sc=1,this.groupBody.addChild(i),n=this.bodyArr[this.star_index+1];break;case 2:i=this.bodyArr[this.star_index],i.x=375,i.load(),i.sc=1,this.groupBody.addChild(i)}}},n.mainUIInit=function(){this.state=2,this.star_index=this.star_level-1,this.setBody()},n.otherInit=function(){this.state=2,this.star_index=this.star_level-1,this.setBody()},n.resize=function(){},a}(eui.Group);e.HumenUI=t,egret.registerClass(t,"mainUI.HumenUI")}(mainUI||(mainUI={}));var mainUI;!function(e){var t=function(e){function t(t,a){e.call(this),this.now=0,this.total=100,this.val=0,this.track=new eui.Image(t),this.thumb=new eui.Image(a),this.addChild(this.track),this.addChild(this.thumb),this.thumb.mask=new egret.Rectangle(0,0,0,0),this.validateNow()}__extends(t,e);var a=(__define,t),i=a.prototype;return i.setData=function(e){this.val=e,this.setMask()},i.setMask=function(){var e=this.val/100*this.thumb.height;this.thumb.mask=new egret.Rectangle(0,this.thumb.height-e,this.thumb.width,e)},t}(eui.Group);e.MainProIcon=t,egret.registerClass(t,"mainUI.MainProIcon")}(mainUI||(mainUI={}));var mainUI;!function(e){var t=function(t){function a(){t.call(this),this.liveChateState=-1,this.pointArr=[{id:1,x:375,y:786.5,bo:!0},{id:2,x:375,y:756.5,bo:!0},{id:3,x:375,y:726.5,bo:!0},{id:4,x:375,y:696.5,bo:!0}],this.issatartx=!0,this.nt=0,this.nindex=1,this.maxt=0,this.canSend=!0,this.skinName="src/view/gameUI/mainUI/MainUISkin.exml",this.barrageManager=new barrage.BarrageMananger(this),this.mbarrageUI=new mbarrage.MBarrageUI,this.alertHaiQue=new buyTicketActive.AlertBuyTicket,this.Publish=new Publish.NewPublish,this.alertHaiQue.x=0,this.alertHaiQue.y=0,this.btnGift.x=25,this.btnGift.y=20,this.follow=new follow.Follow,this.follow.x=0,this.follow.y=0,this.Publish.x=0,this.Publish.y=0}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){this.getUrlAttribute("is_owner"),this.addChild(this.mbarrageUI),this.addChild(this.groupJiTip),Tools.getInstance().isIphone()&&(this.lblGroupName.fontFamily="Heiti SC",this.lblGroupRank.fontFamily="Heiti SC",this.lblStarRank.fontFamily="Heiti SC",this.lblGroupName1.fontFamily="Heiti SC",this.lblGroupRank1.fontFamily="Heiti SC",this.lblStarRank1.fontFamily="Heiti SC",this.lbl1.fontFamily="Heiti SC",this.lbl1_1.fontFamily="Heiti SC",this.lblj1.fontFamily="Heiti SC",this.lblj2.fontFamily="Heiti SC",this.lblJiTip.fontFamily="Heiti SC",this.lblLiveTitle.fontFamily="Heiti SC",this.lblLiveTime.fontFamily="Heiti SC",this.lable_jujiao.fontFamily="Heiti SC",this.lable_jujiao0.fontFamily="Heiti SC",this.lable_sendDiamod.fontFamily="Heiti SC",this.lable_sendDiamod1.fontFamily="Heiti SC",this.lb2.fontFamily="Heiti SC",this.lb3.fontFamily="Heiti SC"),this.groupLive.y=this.mbarrageUI.y-130,this.btn_buyTicket.y=this.mbarrageUI.y-130,this.bmpStarIcon.mask=this.bmpStarIconMask,this.groupJiTip.visible=!1,this.groupBottom.touchEnabled=!0,this.groupBottom.y=this.stage.stageHeight-155,this.groupBottom2.y=this.stage.stageHeight-155,this.groupBottom1.y=this.stage.stageHeight-120,this.groupJiTip.y=this.groupBottom1.y-120,this.btnGift.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gift_tap,this),this.btnQiandao.addEventListener(egret.TouchEvent.TOUCH_TAP,this.qiandao_tap,this),this.btnJieji.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jijie,this),this.btnZhongchou.addEventListener(egret.TouchEvent.TOUCH_TAP,this.zhongchou_tap,this),this.btnMore.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){GameApp.Manager.controllerManager.gameMainController.hide(),this.forwardTask(e)},this),this.groupRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rankGroupContribution_tap,this),this.groupStarRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rankStar_tap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close_tap,this),this.rectBack.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.thistap,this);var e=this;this.btn_MonthBan.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.comeMonthRank()},this),this.groupBottom1_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.joinStar_tap,this),this.groupBottom1_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.joinGroup_tap,this),this.groupLive.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){!live.LiveChatRoomUI.obj||1!=live.LiveChatRoomUI.obj.state&&0!=live.LiveChatRoomUI.obj.state||(GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.viewManager.liveChatRoomManager.show(GameApp.Manager.viewManager.gameMainUI.mainUI.liveChateState))},this),this.rect_btnHeadLines.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.controllerManager.headLinesController.show(1,1,1),GameApp.Manager.controllerManager.gameMainController.hide()},this),this.group_follow.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.addChild(e.follow)},this),this.rect_Sweepstakes.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.sweepsTasksController.show()},this),this.btn_buyTicket.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=this;12900==GameApp.Manager.dataManager.uid?(GameApp.Manager.controllerManager.buyTicketActiveController.show(),GameApp.Manager.controllerManager.gameMainController.hide()):(e.alertHaiQue.setData(),e.addChild(e.alertHaiQue))},this)
},n.comeMonthRank=function(){GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.monthTieController.show(GameApp.Manager.dataManager.mts,"main")},n.qiandao_tap=function(e){GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.signController.show(0)},n.jijie_tap=function(e){this.jijie(e)},n.zhongchou_tap=function(e){GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.viewManager.taskManager.giftCfManager.show(0)},n.thistap=function(e){var t=this;this.opentx(e.stageX,e.stageY,GameApp.Manager.dataManager.user_pic),t.issatartx&&(t.issatartx=!1,socketio.IoConnect.getInstance().sendMessage(data.PomeloData.opentx,{x:e.stageX,y:e.stageY},function(e){},this),setTimeout(function(){t.issatartx=!0},2e3))},n.opentx=function(t,a,i){var n=e.StarTx.produce();this.addChild(n),n.setData(i),n.x=t,n.y=a},n.close_tap=function(){socketio.IoConnect.getInstance().disconnect(),1==GameApp.Manager.dataManager.visitor?(GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.viewManager.starPageManager.show(GameApp.Manager.dataManager.reset)):2==GameApp.Manager.dataManager.visitor&&(GameApp.Manager.dataManager.entenVisiter=0,GameApp.Manager.controllerManager.start())},n.setStar=function(e){},n.disZC=function(e,t){switch(e.crowdfunding_id){case 1:zfdy.Zfdy1.open(e,t);break;case 2:zfdy.Zfdy2.open(e,t);break;case 3:zfdy.Zfdy3.open(e,t);break;case 4:zfdy.Zfdy4.open(e,t);break;case 5:zfdy.Zfdy5.open(e,t);break;case 6:zfdy.Zfdy6.open(e,t);break;case 7:zfdy.Zfdy7.open(e,t);break;case 8:zfdy.Zfdy8.open(e,t);break;case 9:zfdy.Zfdy9.open(e,t);break;case 10:zfdy.Zfdy10.open(e,t);break;case 11:zfBag.Zfdy11.open(e,t);break;case 12:zfBag.Zfdy12.open(e,t)}},a.init=function(e){e?(2==e.state?GameApp.Manager.viewManager.gameMainUI.mainUI.groupLive.visible=!1:0==e.state?(GameApp.Manager.viewManager.gameMainUI.mainUI.groupLive.visible=!0,GameApp.Manager.viewManager.gameMainUI.mainUI.liveChateState=0,GameApp.Manager.viewManager.gameMainUI.mainUI.img_btnPro.visible=!0,GameApp.Manager.viewManager.gameMainUI.mainUI.btnZhibo.visible=!1):1==e.state&&(GameApp.Manager.viewManager.gameMainUI.mainUI.groupLive.visible=!0,GameApp.Manager.viewManager.gameMainUI.mainUI.liveChateState=1,GameApp.Manager.viewManager.gameMainUI.mainUI.img_btnPro.visible=!1,GameApp.Manager.viewManager.gameMainUI.mainUI.btnZhibo.visible=!0),live.LiveChatRoomUI.setData(e),GameApp.Manager.viewManager.gameMainUI.mainUI.lblLiveTitle.text=window.hexToDec(e.title),GameApp.Manager.viewManager.gameMainUI.mainUI.lblLiveTime.text="时间: "+Tools.getInstance().getMonth(e.begin_time)+" "+Tools.getInstance().getHour(e.begin_time)+"-"+Tools.getInstance().getHour(e.finish_time)):GameApp.Manager.viewManager.gameMainUI.mainUI.groupLive.visible=!1},n.tx=function(e){this.nt+=e,this.nt>=this.maxt&&(this.nt=0,this.nindex++,this.img_follow.source=""+this.nindex,15==this.nindex?(this.nindex=0,this.maxt=1e3):this.maxt=100)},n.setData=function(e){if(this.addChild(this.Publish),this.group_sweepsTakes.visible=!1,0==GameApp.Manager.dataManager.haiquan||this.addChild(this.alertHaiQue),1==GameApp.Manager.dataManager.isFollower?(this.group_follow.visible=!0,egret.Ticker.getInstance().register(this.tx,this),this.img_follow.source="1",this.maxt=1e3):this.group_follow.visible=!1,GameApp.Manager.dataManager.monthly_ts>0?this.btn_MonthBan.visible=!0:this.btn_MonthBan.visible=!1,this.mbarrageUI.clear(),this.data=e,1==GameApp.Manager.dataManager.visitor||2==GameApp.Manager.dataManager.visitor?(this.groupRank.visible=!1,this.groupBottom.visible=!1,this.btnGift.visible=!1,this.btnClose.visible=!0,this.groupBottom1.visible=!0,this.groupBottom2.visible=!1,2==GameApp.Manager.dataManager.visitor?(this.lblj2.text=e.group_num+"个群已入驻",this.groupBottom1_1.visible=!1,this.groupBottom1_2.visible=!0,this.groupBottom1_2.x=236):(this.groupBottom1_1.visible=!0,this.groupBottom1_2.visible=!0,this.groupBottom1_1.x=61,this.groupBottom1_2.x=416,this.lblj2.text=e.group_num+"个群已入驻")):(this.groupRank.visible=!0,this.groupBottom.visible=!0,this.btnGift.visible=!0,this.btnClose.visible=!1,this.groupBottom1.visible=!1,this.groupBottom2.visible=!0),RES.getResByUrl(e.head_img,function(e){this.bmpStarIcon.source=e},this,RES.ResourceItem.TYPE_IMAGE),GameApp.Manager.dataManager.hot=e.hot,this.lblStarRank.text="NO."+e.star_rank,this.lblGroupName.text=window.hexToDec(e.group_name),e.group_rank>0?this.lblGroupRank.text="群排名 "+e.group_rank+" >":this.lblGroupRank.text="未进榜 >",this.lblStarRank1.text="NO."+e.star_rank,this.lblGroupName1.text=window.hexToDec(e.group_name),this.lblGroupRank1.text=this.lblGroupRank.text,this.mbarrageUI.adds(e.lastMsg),1==e.activity&&containmoney.ContainmoneyUI.getInstance().saveActivePackets("activity"),system.GroupReward.getInstance().show(e.owner_reward),!(e.owner_reward&&e.owner_reward.canReward||0==GameApp.Manager.dataManager.buluo)){var t="您在部落中有"+GameApp.Manager.dataManager.buluo+"个幸运星，已自动转换为钻石";aler.AlertPanel1.getInstance().show("",t,"",function(){},this)}containmoney.ContainmoneyUI.getInstance().addRedPackets()},n.setData1=function(){containmoney.ContainmoneyUI.getInstance().addRedPackets(),GameApp.Manager.dataManager.monthly_ts>0?this.btn_MonthBan.visible=!0:this.btn_MonthBan.visible=!1,1==GameApp.Manager.dataManager.isFollower?(this.group_follow.visible=!0,egret.Ticker.getInstance().register(this.tx,this),this.img_follow.source="1",this.maxt=1e3):this.group_follow.visible=!1},n.setLevel=function(e){},n.updata=function(e){this.mbarrageUI.update(e)},n.joinGroup_tap=function(e){GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.rankGroupContributionController.show(0)},n.jijie=function(e){if(task.AggregationIcon1.Allobj.date>0){egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jijieTipclose,this);var t=task.AggregationIcon1.Allobj.date,a=(new Date).getTime(),i=t-(a-task.AggregationIcon1.crrentTime),n=i-((new Date).getTime()-a);n>0?(this.groupJiTip.visible=!0,this.lblJiTip.textFlow=(new egret.HtmlTextParser).parser("集结还有 <font color=#00abec>"+Tools.getInstance().formatTime2(n)+"</font> 开始"),egret.Tween.removeTweens(this.groupJiTip),egret.Tween.get(this.groupJiTip).wait(3e3).call(function(){this.jijieTipclose(null)},this)):(task.AggregationIcon1.Allobj.date=0,this.jijie(null))}else task.AggregationIcon1.Allobj.time?(this.groupJiTip.visible=!1,GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.aggregationController.show(0,2)):(this.groupJiTip.visible=!1,GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.aggregationController.show(0,1));e&&e.stopPropagation()},n.jijieTipclose=function(e){egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.jijieTipclose,this),this.groupJiTip.visible=!1},n.joinStar_tap=function(e){1==GameApp.Manager.dataManager.visitor?(this.getUrlAttribute("is_owner"),GameApp.Manager.dataManager.is_owner?aler.AlertPanel.getInstance().show("温馨提示","本群只有一次选择机会，确认入驻？","取消","确认",function(e){"ok"==e&&GameApp.Manager.viewManager.gameMainManager.joinStar(function(){})}):aler.AlertPanel.getInstance().show("温馨提示","确认入驻此明星粉丝团？","取消","确认",function(e){"ok"==e&&GameApp.Manager.viewManager.gameMainManager.joinStar(function(){})})):this.joinGroup_tap(null),e.stopPropagation()},n.getUrlAttribute=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(t),i="";null!=a&&(i=a[2]),t=null,a=null,"1"==i?GameApp.Manager.dataManager.is_owner=!0:GameApp.Manager.dataManager.is_owner=!1},n.gift_tap=function(e){if(GameApp.Manager.dataManager.lucystar>=8){var t=11;this.canSend=!1,socketio.IoConnect.getInstance().sendMessage(data.PomeloData.sendFlower,{id:t},function(e){if(flower.FlowerUI.listerFlower(e),this.canSend=!0,e.worksDrop){var t=this.getPoint();if(t){t.bo=!1;var a=zfdy.Collection.produce();a.x=t.x,a.y=t.y,a.pid=t.id,console.log(a.x,a.y,"xy"),a.scaleX=0,a.scaleY=0,a.anchorOffsetX=195,a.anchorOffsetY=95,GameApp.Manager.viewManager.TopUIStage.addChild(a),a.setData(e.worksDrop,GameApp.Manager.dataManager.star_name),a.addEventListener("END",this.end,this)}}},this)}else aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.gameMainController.hide,0)},this);e.stopPropagation()},n.end=function(e){var t=e.data,a=this.getPointById(t.pid);a.bo=!0,zfdy.Collection.reclaim(t),t.parent&&t.parent.removeChild(t)},n.getPointById=function(e){var t=null;for(var a in this.pointArr){var i=this.pointArr[a];if(i.id==e){t=i;break}}return t},n.getPoint=function(){var e=null;for(var t in this.pointArr){var a=this.pointArr[t];if(1==a.bo){e=a;break}}return e},n.rankTopTen_tap=function(e){GameApp.Manager.controllerManager.rankGroupController.show(),e.stopPropagation()},n.rankStar_tap=function(e){void 0===e&&(e=null),GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.rankStarController.show(),e&&e.stopPropagation()},n.rankGroupContribution_tap=function(e){void 0===e&&(e=null),GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.rankGroupContributionController.show(0),e&&e.stopPropagation()},n.forwardTask=function(e){GameApp.Manager.dataManager.visitor>0?(GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.rankGroupContributionController.show(0)):(GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.taskController.show(-1)),e.stopPropagation()},n.fs_tap=function(e){var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/cho_star",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,sign:t},function(e){switch(e.st){case 1:break;case 2:break;case 3:system.Share.share(e,function(){})}},!0,this),e.stopPropagation()},n.setHot=function(e){var t=0;switch(e){case 1:t=1;break;case 2:t=8;break;case 3:t=88;break;case 4:t=288;break;case 5:t=888;break;case 6:t=0}GameApp.Manager.dataManager.hot+=t},n.setHotNum=function(e){GameApp.Manager.dataManager.hot=e},n.resize=function(){},n.clear=function(){1==GameApp.Manager.dataManager.isFollower&&egret.Ticker.getInstance().unregister(this.tx,this)},a}(eui.Component);e.MainUI=t,egret.registerClass(t,"mainUI.MainUI")}(mainUI||(mainUI={}));var mainUI;!function(e){var t=function(e){function t(){e.call(this),this.backImg=new eui.Image,this.headImg=new eui.Image,this.addChild(this.backImg),this.headback=Tools.getInstance().getSp(24,24,0,0,16777215),this.addChild(this.headback),this.addChild(this.headImg),this.headImg.width=20,this.headImg.height=20,this.headback.x=53,this.headback.y=50,this.headImg.x=54,this.headImg.y=51,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)}__extends(t,e);var a=(__define,t),i=a.prototype;return i.tap=function(){GameApp.Manager.viewManager.gameMainUI.mainUI.disZC(this.obj,this.star)},i.remlis=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},i.setData=function(e,t){this.obj=e,this.star=t,RES.getResByUrl(e.icon,this.load_end,this,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(e.group_face,this.load_end1,this,RES.ResourceItem.TYPE_IMAGE)},i.load_end=function(e){this.backImg.source=e},i.load_end1=function(e){this.headImg.source=e},i.clear=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},t}(eui.Group);e.MainZcItem=t,egret.registerClass(t,"mainUI.MainZcItem")}(mainUI||(mainUI={}));var mainUI;!function(e){var t=function(e){function t(){e.call(this),this.bmpBack=new eui.Image("p_startx"),this.bmpIcon=new module.BaseCircleImage,this.bmpIcon.x=58.5,this.bmpIcon.y=58.5,this.addChild(this.bmpBack),this.addChild(this.bmpIcon),this.bmpBack.anchorOffsetX=58.5,this.bmpBack.anchorOffsetY=58.5,this.bmpBack.x=58.5,this.bmpBack.y=58.5,this.anchorOffsetX=58.5,this.anchorOffsetY=58.5,this.touchEnabled=!1,this.touchChildren=!1}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.setData=function(e){this.alpha=.2,this.scaleX=this.scaleY=.3,this.bmpBack.rotation=360*Math.random(),this.bmpIcon.setData(e,55,.5,.5),egret.Tween.get(this).to({alpha:.8,scaleX:1,scaleY:1},800).to({alpha:0},400).call(function(){t.reclaim(this),this.parent&&this.parent.removeChild(this)},this)},i.clear=function(){this.bmpIcon.clear(),this.bmpBack.rotation=0},t.cacheDict={},t}(eui.Group);e.StarTx=t,egret.registerClass(t,"mainUI.StarTx")}(mainUI||(mainUI={}));var mbarrage;!function(e){var t=function(e){function t(){e.call(this),this.type=1,this._w=0,this.gift_id=0,this.intimate_level=0,this.group_openid=0,this.colorArr=[5658725,226661,8897691,1678310,16092861,16214116,16102166],this.skinName="src/view/gameUI/mbarrage/MBarrageItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){this.bmpIcon.visible=!1,this.bmpBuluo.visible=!1,Tools.getInstance().isIphone()&&(this.lblTitle.fontFamily="Heiti SC",this.lblDesc.fontFamily="Heiti SC",this.lblDesc1.fontFamily="Heiti SC"),this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){switch(this.type){case 1:case 6:case 7:userPanel.UserPanel.getInstance().open(this.uid,GameApp.Manager.dataManager.bid_save,this.group_openid+"")}e.stopPropagation()},this)},i.setData=function(e){this.uid=e.uid,this.gift_id=e.id,this.intimate_level=e.intimate_level,this.type=e.type,this.group_openid=e.group_openid?e.group_openid:0;var t="";switch(this.type){case 1:this.group_medal.x=96,this.bmpIcon.visible=!1,this.lblTitle.visible=!0,this.bmpTitleBack.visible=!0,this.bmpBuluo.visible=!1;var a="";if(e.guard){if(1==e.guard.faith_guard){var i=new eui.Image;i.source="u_m1",i.width=30,i.height=45*(30/46),this.group_medal.addChild(i)}if(1==e.guard.angel_guard){var i=new eui.Image;i.source="u_m2",i.width=30,i.height=48*(30/73),this.group_medal.addChild(i)}if(1==e.guard.stars_guard){var i=new eui.Image;i.source="u_m3",i.width=30,i.height=51*(30/53),this.group_medal.addChild(i)}}if(this.lblName.x=this.group_medal.x+this.group_medal.width+2,this.lblName1.x=this.lblName.x+1,e.worksDrop){var n=this.colorArr[e.worksDrop.colour];a="点亮了<font color="+n+">《"+e.worksDrop.name+"》</font>"}this.bmpTitleBack.source=data.DataManager.getintimateIcon(this.intimate_level),this.lblTitle.text=data.DataManager.getintimateLevel(this.intimate_level)+"",t=window.hexToDec(e.user_name);var s=0;this.lblDesc.textFlow=(new egret.HtmlTextParser).parser("<font color=#FF6479>送出了"+data.DataManager.getGiftName(this.gift_id)+"</font>"+a),this.lblDesc1.textFlow=(new egret.HtmlTextParser).parser("<font color=#000000>送出了"+data.DataManager.getGiftName(this.gift_id)+"</font>"+a),Tools.getInstance().isIphone()?(this.lblName.text=t,this.lblName1.text=t,this.validateNow(),s=20*window.Emoji.emojiLength(t),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+s+5,this.lblDesc1.x=this.lblDesc.x+1):(this.lblName.textFlow=(new egret.HtmlTextParser).parser(window.Emoji.emojiReplace(t)),this.lblName1.text=this.lblName.text,this.validateNow(),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+5,this.lblDesc1.x=this.lblDesc.x+1),this.bmpIcon.x=this.lblDesc.textWidth+this.lblDesc.x+10;break;case 2:this.lblName.x=21,this.lblName1.x=22,this.bmpIcon.visible=!1,this.lblTitle.visible=!1,this.bmpTitleBack.visible=!1,this.bmpBuluo.visible=!1,t="欢迎Q群["+window.hexToDec(e.group_name)+"]入驻";var s=0;this.lblDesc.text=""+GameApp.Manager.dataManager.star_name+"的超级粉丝团！",this.lblDesc1.text=this.lblDesc.text,Tools.getInstance().isIphone()?(this.lblName.text=t,this.lblName1.text=t,this.validateNow(),s=20*window.Emoji.emojiLength(t),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+s+5,this.lblDesc1.x=this.lblDesc.x+1):(this.lblName.text=window.Emoji.emojiReplace(t),this.lblName1.text=this.lblName.text,this.validateNow(),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+5,this.lblDesc1.x=this.lblDesc.x+1),this.bmpIcon.x=this.lblDesc.textWidth+this.lblDesc.x+10;break;case 3:this.lblName.x=21,this.lblName1.x=22,this.bmpIcon.visible=!1,this.lblTitle.visible=!1,this.bmpTitleBack.visible=!1,this.bmpBuluo.visible=!1,t="恭喜Q群["+window.hexToDec(e.group_name);var s=0;this.lblDesc.text="]完成礼物众筹!",this.lblDesc1.text=this.lblDesc.text,Tools.getInstance().isIphone()?(this.lblName.text=t,this.lblName1.text=t,this.validateNow(),s=20*window.Emoji.emojiLength(t),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+s+5,this.lblDesc1.x=this.lblDesc.x+1):(this.lblName.text=window.Emoji.emojiReplace(t),this.lblName1.text=this.lblName.text,this.validateNow(),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+5,this.lblDesc1.x=this.lblDesc.x+1),this.bmpIcon.x=this.lblDesc.textWidth+this.lblDesc.x+10;break;case 4:this.lblName.x=21,this.lblName1.x=22,this.bmpIcon.visible=!1,this.lblTitle.visible=!1,this.bmpTitleBack.visible=!1,this.bmpBuluo.visible=!1,t="恭喜Q群["+window.hexToDec(e.group_name);var s=0;this.lblDesc.text="]完成集结任务!",this.lblDesc1.text=this.lblDesc.text,Tools.getInstance().isIphone()?(this.lblName.text=t,this.lblName1.text=t,this.validateNow(),s=20*window.Emoji.emojiLength(t),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+s+5,this.lblDesc1.x=this.lblDesc.x+1):(this.lblName.text=window.Emoji.emojiReplace(t),this.lblName1.text=this.lblName.text,this.validateNow(),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+5,this.lblDesc1.x=this.lblDesc.x+1),this.bmpIcon.x=this.lblDesc.textWidth+this.lblDesc.x+10;break;case 5:this.lblName.x=96,this.lblName1.x=97,this.bmpIcon.visible=!0,this.lblTitle.visible=!1,this.bmpTitleBack.visible=!1,this.bmpBuluo.visible=!0,this.bmpIcon.source="p_gift"+this.gift_id,t=window.hexToDec(e.user_name);var s=0;this.lblDesc.textFlow=(new egret.HtmlTextParser).parser("<font color=#FF6479>送出了"+data.DataManager.getGiftName(this.gift_id)+"</font>"),this.lblDesc1.textFlow=(new egret.HtmlTextParser).parser("<font color=#000000>送出了"+data.DataManager.getGiftName(this.gift_id)+"</font>"),Tools.getInstance().isIphone()?(this.lblName.text=t,this.lblName1.text=t,this.validateNow(),s=20*window.Emoji.emojiLength(t),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+s+5,this.lblDesc1.x=this.lblDesc.x+1):(this.lblName.textFlow=(new egret.HtmlTextParser).parser(window.Emoji.emojiReplace(t)),this.lblName1.text=this.lblName.text,this.validateNow(),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+5,this.lblDesc1.x=this.lblDesc.x+1),this.bmpIcon.x=this.lblDesc.textWidth+this.lblDesc.x+10;break;case 6:if(this.lblName.x=96,e.guard){if(1==e.guard.faith_guard){var i=new eui.Image;i.source="u_m1",i.width=30,i.height=45*(30/46),this.group_medal.addChild(i)}if(1==e.guard.angel_guard){var i=new eui.Image;i.source="u_m2",i.width=30,i.height=48*(30/73),this.group_medal.addChild(i)}if(1==e.guard.stars_guard){var i=new eui.Image;i.source="u_m3",i.width=30,i.height=51*(30/53),this.group_medal.addChild(i)}}this.lblName.x=this.group_medal.x+this.group_medal.width+2,this.lblName1.x=this.lblName.x+1,this.bmpIcon.visible=!1,this.lblTitle.visible=!0,this.bmpTitleBack.visible=!0,this.bmpBuluo.visible=!1,this.bmpTitleBack.source=data.DataManager.getintimateIcon(this.intimate_level),this.lblTitle.text=data.DataManager.getintimateLevel(this.intimate_level)+"",t=window.hexToDec(e.user_name);var s=0;this.lblDesc.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffffff>今日签到</font>"),this.lblDesc1.textFlow=(new egret.HtmlTextParser).parser("<font color=#000000>今日签到</font>"),Tools.getInstance().isIphone()?(this.lblName.text=t,this.lblName1.text=t,this.validateNow(),s=20*window.Emoji.emojiLength(t),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+s+5,this.lblDesc1.x=this.lblDesc.x+1):(this.lblName.textFlow=(new egret.HtmlTextParser).parser(window.Emoji.emojiReplace(t)),this.lblName1.text=this.lblName.text,this.validateNow(),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+5,this.lblDesc1.x=this.lblDesc.x+1),this.bmpIcon.x=this.lblDesc.textWidth+this.lblDesc.x+10;break;case 7:if(this.lblName.x=96,e.guard){if(1==e.guard.faith_guard){var i=new eui.Image;i.source="u_m1",i.width=30,i.height=45*(30/46),this.group_medal.addChild(i)}if(1==e.guard.angel_guard){var i=new eui.Image;i.source="u_m2",i.width=30,i.height=48*(30/73),this.group_medal.addChild(i)}if(1==e.guard.stars_guard){var i=new eui.Image;i.source="u_m3",i.width=30,i.height=51*(30/53),this.group_medal.addChild(i)}}this.lblName.x=this.group_medal.x+this.group_medal.width+2,this.lblName1.x=this.lblName.x+1,this.bmpIcon.visible=!1,this.lblTitle.visible=!0,this.bmpTitleBack.visible=!0,this.bmpBuluo.visible=!1,this.bmpTitleBack.source=data.DataManager.getintimateIcon(this.intimate_level),this.lblTitle.text=data.DataManager.getintimateLevel(this.intimate_level)+"",t=window.hexToDec(e.user_name);var s=0;this.lblDesc.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffffff>众筹贡献"+e.cost+"钻</font>"),this.lblDesc1.textFlow=(new egret.HtmlTextParser).parser("<font color=#000000>众筹贡献"+e.cost+"钻</font>"),Tools.getInstance().isIphone()?(this.lblName.text=t,this.lblName1.text=t,this.validateNow(),s=20*window.Emoji.emojiLength(t),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+s+5,this.lblDesc1.x=this.lblDesc.x+1):(this.lblName.textFlow=(new egret.HtmlTextParser).parser(window.Emoji.emojiReplace(t)),this.lblName1.text=this.lblName.text,this.validateNow(),this.lblDesc.x=this.lblName.x+this.lblName.textWidth+5,this.lblDesc1.x=this.lblDesc.x+1),this.bmpIcon.x=this.lblDesc.textWidth+this.lblDesc.x+10}},i.getStringLen=function(e){return e},i.clear=function(){for(this.bmpIcon.visible=!0,this.lblTitle.visible=!0,this.bmpTitleBack.visible=!0,this.bmpBuluo.visible=!1,this.lblTitle.text="",this.lblDesc.text="",this.lblDesc1.text="",this.bmpIcon.source=null;this.group_medal.numElements>0;){var e=this.group_medal.getElementAt(this.group_medal.numElements-1);e.parent&&e.parent.removeChild(e)}},t.cacheDict={},t}(eui.Component);e.MBarrageItem=t,egret.registerClass(t,"mbarrage.MBarrageItem")}(mbarrage||(mbarrage={}));var mbarrage;!function(e){var t=function(t){function a(){t.call(this),this.arrObj=[],this.canTip=!1,this.arr=[],this.canUpdate=!0,this.touch=!1,this.maxlength=10,this.jiange=50,this.isleave=!1,this.skinName="src/view/gameUI/mbarrage/MBarrageUISkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblTip.fontFamily="Heiti SC",this.lblTip1.fontFamily="Heiti SC",this.lblTip_1.fontFamily="Heiti SC",this.lblTip1_1.fontFamily="Heiti SC"),this.y=egret.MainContext.instance.stage.stageHeight-420,this.scroll1.addEventListener(eui.UIEvent.CHANGE_END,this.viweport_touch_end,this),this.scroll1.addEventListener(eui.UIEvent.CHANGE,this.viweport_touch_begin,this),this.bmpTip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.bmpTip_tap,this),this.btn_Tip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnTip_tap,this)},n.bmpTip_tap=function(e){3==this.tipObj.type&&GameApp.Manager.viewManager.gameMainUI.mainUI.disZC(this.tipObj,{head_img:this.tipObj.head_img}),e.stopPropagation()},n.btnTip_tap=function(e){this.tipObj&&this.tipObj.group_openid!=GameApp.Manager.dataManager.group_openid&&system.GroupJoin.join(this.tipObj.group_openid)},n.viweport_touch_begin=function(){this.touch||(console.log("viweport_touch_begin"),this.touch=!0,this.canUpdate=!1,egret.Tween.removeTweens(this.scroll1.viewport),egret.Tween.removeTweens(this))},n.viweport_touch_end=function(){this.touch&&(this.touch=!1,console.log("viweport_touch_end"),egret.Tween.removeTweens(this),egret.Tween.get(this).wait(2e3).call(function(){this.touchend()},this))},n.viweport_release_outside=function(){this.touch&&(this.touch=!1,console.log("viweport_release_outside"),egret.Tween.removeTweens(this),egret.Tween.get(this).wait(2e3).call(function(){this.touchend()},this))},n.touchend=function(){if(this.arrObj.length>this.maxlength){for(var t in this.arr){var a=this.arr[t];e.MBarrageItem.reclaim(a),a.parent&&a.parent.removeChild(a)}this.arr=[];for(var i=this.arrObj.length-this.maxlength;i<this.arrObj.length;i++){var n=e.MBarrageItem.produce();this.groupData.addChild(n),n.validateNow(),n.setData(this.arrObj[i]),n.y=this.arr.length*this.jiange,this.arr.push(n)}this.arrObj=[],egret.Tween.get(this.scroll1.viewport).to({scrollV:(this.arr.length-4)*this.jiange},300).call(function(){this.canUpdate=!0},this)}else if(this.arrObj.length>0){for(;this.arrObj.length>0;)this.addItem(this.arrObj.shift(),!1);egret.Tween.get(this.scroll1.viewport).to({scrollV:(this.arr.length-4)*this.jiange},300).call(function(){this.canUpdate=!0},this)}else this.canUpdate=!0},n.update=function(e){this.canUpdate&&!this.isleave&&(this.arrObj.length>0&&(this.canUpdate=!1,this.addItem(this.arrObj.shift())),this.addTip())},n.leave=function(){this.isleave=!0},n.come=function(){if(this.isleave){if(this.isleave=!1,this.arrObj.length>0){for(this.arrObj.length>this.maxlength&&(this.arrObj=this.arrObj.slice(this.arrObj.length-this.maxlength,this.arrObj.length-1));this.arrObj.length>0;)this.addItem(this.arrObj.shift(),!1);this.scroll1.viewport.scrollV=(this.arr.length-4)*this.jiange,this.canUpdate=!0}this.addTip()}},n.addItem=function(t,a){if(void 0===a&&(a=!0),this.arr.length==this.maxlength){var i=this.arr.shift();e.MBarrageItem.reclaim(i),i.parent&&i.parent.removeChild(i);for(var n=0;n<this.arr.length;n++){var s=this.arr[n];s.y=n*this.jiange}a&&(this.scroll1.viewport.scrollV=(this.arr.length-4)*this.jiange)}var r=e.MBarrageItem.produce();this.groupData.addChild(r),r.setData(t),r.y=this.arr.length*this.jiange,this.arr.push(r),a&&(this.arr.length>=4?egret.Tween.get(this.scroll1.viewport).to({scrollV:(this.arr.length-4)*this.jiange},100).call(function(){this.canUpdate=!0},this):(this.scroll1.viewport.scrollV=0,this.canUpdate=!0))},n.addTip=function(){if(this.canTip){console.log("addTip:",this.tipObj);var e=window.hexToDec(this.tipObj.group_name),t=23*window.Emoji.emojiLength(e);switch(this.tipObj.type){case 3:this.lblTip_1.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffffff>众筹成功</font>"),this.lblTip1_1.textFlow=(new egret.HtmlTextParser).parser("<font color=#000000>众筹成功</font>"),Tools.getInstance().isIphone()?(this.lblTip.text=e,this.lblTip1.text=e,this.validateNow(),t=23*window.Emoji.emojiLength(e),this.lblTip_1.x=this.lblTip.x+this.lblTip.textWidth+t+5,this.lblTip1_1.x=this.lblTip_1.x+1,this.groupTip.x=this.lblTip_1.x+this.lblTip_1.textWidth+10):(this.lblTip.textFlow=(new egret.HtmlTextParser).parser(window.Emoji.emojiReplace(e)),this.lblTip1.text=this.lblTip.text,this.validateNow(),this.lblTip_1.x=this.lblTip.x+this.lblTip.textWidth+t+5,this.lblTip1_1.x=this.lblTip_1.x+1,this.groupTip.x=this.lblTip_1.x+this.lblTip_1.textWidth+10),this.bmpTip.source="zfdy_font"+this.tipObj.crowdfunding_id,this.bmpTip.touchEnabled=!0;break;case 4:Tools.getInstance().isIphone()?(this.lblTip.text=e,this.lblTip1.text=e,this.validateNow(),t=23*window.Emoji.emojiLength(e),this.groupTip.x=this.lblTip.x+this.lblTip.textWidth+t+10):(this.lblTip.textFlow=(new egret.HtmlTextParser).parser(window.Emoji.emojiReplace(e)),this.lblTip1.text=this.lblTip.text,this.validateNow(),this.groupTip.x=this.lblTip.x+this.lblTip.textWidth+10,this.lblTip1.x=this.lblTip.x+1),this.bmpTip.source="p1_jjok",this.bmpTip.touchEnabled=!1}this.canTip=!1}},n.add=function(e){switch(console.log("addMBarrge:",e),e.type){case 3:case 4:this.tipObj=e,this.canTip=!0;break;default:this.arrObj.push(e)}},n.adds=function(e){for(;e.length>0;){var t=e.shift();switch(t.type){case 3:case 4:this.tipObj=t,this.canTip=!0;break;default:this.addItem(t,!1)}}this.arr.length>=4&&(this.scroll1.viewport.scrollV=(this.arr.length-4)*this.jiange),this.addTip()},n.setPoint=function(){for(var e=0;e<this.arr.length;e++){this.arr[e]}},n.clear=function(){this.lblTip.text="",this.lblTip1.text="",this.bmpTip.source=null,this.lblTip_1.text="",this.lblTip1_1.text="",this.tipObj=null;for(var t=0;t<this.arr.length;t++){var a=this.arr[t];a.parent&&a.parent.removeChild(this),e.MBarrageItem.reclaim(a)}this.groupData.removeChildren(),this.arrObj=[],this.arr=[],this.touch=!1,this.canUpdate=!0},a}(eui.Component);e.MBarrageUI=t,egret.registerClass(t,"mbarrage.MBarrageUI")}(mbarrage||(mbarrage={}));var module;!function(e){var t=function(e){function t(){e.call(this),this.anX=0,this.anY=0,this.isAnX=!1,this.img=new eui.Image,this.imgMask=new egret.Shape,this.addChild(this.img),this.addChild(this.imgMask),this.img.mask=this.imgMask}__extends(t,e);var a=(__define,t),i=a.prototype;return i.setData=function(e,t,a,i,n){console.log("url       ",e),this.anX=a,this.anY=i,(a>0||i>0)&&(this.isAnX=!0),n>0&&(this.imgK=new egret.Shape,this.imgK.graphics.clear(),this.imgK.graphics.beginFill(16116990),this.imgK.graphics.drawCircle(t/2,t/2,(t+2*n)/2),this.imgK.graphics.endFill(),this.addChildAt(this.imgK,0)),this.img.width=t,this.img.height=t,RES.getResByUrl(e,this.load_end,this,RES.ResourceItem.TYPE_IMAGE),this.imgMask.graphics.clear(),this.imgMask.graphics.beginFill(16711680),this.imgMask.graphics.drawCircle(t/2,t/2,t/2),this.imgMask.graphics.endFill()},i.setBack=function(e,t,a){this.imgK=new egret.Shape,this.imgK.graphics.clear(),this.imgK.graphics.beginFill(t),this.imgK.graphics.drawCircle(e/2,e/2,e/2),this.imgK.graphics.endFill(),this.addChild(this.imgK),a>0&&(this.imgK=new egret.Shape,this.imgK.graphics.clear(),this.imgK.graphics.beginFill(16777215),this.imgK.graphics.drawCircle(e/2,e/2,(e+2*a)/2),this.imgK.graphics.endFill(),this.addChildAt(this.imgK,0)),this.width=e,this.height=e},i.load_end=function(e){this.img.texture=e,this.isAnX&&(this.img.x=this.img.x-this.img.width/2,this.img.y=this.img.y-this.img.height/2,this.imgMask.x=this.img.x,this.imgMask.y=this.img.y)},i.clear=function(){this.img.source=null,this.img.x=0,this.img.y=0,this.imgMask.x=0,this.imgMask.x=0,this.imgMask.graphics.clear(),this.anX=0,this.anY=0,this.isAnX=!1,this.imgK&&(this.imgK.graphics.clear(),this.imgK.parent&&this.imgK.parent.removeChild(this.imgK),this.imgK=null),this.backSp&&(this.backSp.graphics.clear(),this.backSp.parent&&this.backSp.parent.removeChild(this.backSp),this.backSp=null)},t}(eui.Group);e.BaseCircleImage=t,egret.registerClass(t,"module.BaseCircleImage")}(module||(module={}));var module;!function(e){var t=function(e){function t(t){e.call(this,t),this.anX=0,this.anY=0,this.isAnX=!1,this.isLoad=!1}__extends(t,e);var a=(__define,t),i=a.prototype;return i.loadPic=function(e,t,a,i,n){this.url=e,this.anX=t,this.anY=a,(t>0||a>0)&&(this.isAnX=!0),this.fun=i,this.scope=n,this.url&&(this.isLoad=!0,RES.getResByUrl(this.url,this.load_end,this,RES.ResourceItem.TYPE_IMAGE))},i.load_end=function(e){this.texture=e,this.fun&&this.fun.call(this.scope),this.isAnX&&(this.anchorOffsetX=e._sourceWidth*this.anX,this.anchorOffsetY=e._sourceHeight*this.anY)},t}(eui.Image);e.BaseEuiImage=t,egret.registerClass(t,"module.BaseEuiImage")}(module||(module={}));var monthTie;!function(e){var t=function(t){function a(){t.call(this),this.bo=!1,this.arrHeatStarObj=[],this.arrHeatTableItem=[],this.arrFansObj=[],this.arrFansTableItem=[],this.arrStarObj=[],this.arrStarTableItem=[],this.isChange=!1,this.skinName="src/view/gameUI/monthTie/MonthTieSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;
return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_star.fontFamily="Heiti SC",this.lable_fans.fontFamily="Heiti SC",this.lable_heart.fontFamily="Heiti SC",this.lable_starName.fontFamily="Heiti SC",this.lable_starName1.fontFamily="Heiti SC",this.lable_starName2.fontFamily="Heiti SC",this.lable_HeatNumberOne.fontFamily="Heiti SC",this.lable_HeatNumberTwo.fontFamily="Heiti SC",this.lable_HeatNumberThree.fontFamily="Heiti SC",this.lable_qunName.fontFamily="Heiti SC",this.lable_qunName1.fontFamily="Heiti SC",this.lable_qunName2.fontFamily="Heiti SC",this.lable_Name.fontFamily="Heiti SC",this.lable_Name1.fontFamily="Heiti SC",this.lable_Name2.fontFamily="Heiti SC",this.lable_starClubIconOne.fontFamily="Heiti SC",this.lable_starClubIconOne1.fontFamily="Heiti SC",this.lable_starClubIconOne2.fontFamily="Heiti SC",this.lable_starClubIconOneName.fontFamily="Heiti SC",this.lable_starClubIconOneName1.fontFamily="Heiti SC",this.lable_starClubIconOneName2.fontFamily="Heiti SC",this.lable_Qi.fontFamily="Heiti SC"),this.scroll2.height=this.stage.stageHeight,this.lable_star.touchEnabled=!1,this.lable_fans.touchEnabled=!1,this.lable_heart.touchEnabled=!1,this.img_heatGray.addEventListener(egret.TouchEvent.TOUCH_TAP,this.heatRanking,this),this.img_fansClubGray.addEventListener(egret.TouchEvent.TOUCH_TAP,this.fansRanking,this),this.img_starClubGray.addEventListener(egret.TouchEvent.TOUCH_TAP,this.starRanking,this),this.btn_share.addEventListener(egret.TouchEvent.TOUCH_TAP,this.share,this),this.btn_fanghui.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.btn_heatDrop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addHeatItem,this),this.btn_dropFans.addEventListener(egret.TouchEvent.TOUCH_TAP,this.adddDropFans,this),this.btn_starDrop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addStarDrop,this),this.btn_drop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.updateMonthTie,this)},n.setData=function(t,a){this.mts=a,this.bo=!0,this.bo=!0;var i=new Date;if(i.setTime(parseInt(a)),this.lable_Qi.text=Tools.getInstance().getTime3(i),this.btn_drop.scaleY=1,this.img_buttonImg.y=315,!this.isChange){var n=e.MonthTieMonth.produce();this.group_month.addChildAt(n,0);var s=t.ts_list.length,r=t.ts_list[s-1]-432e5,o=new Date;o.setTime(r),n.setData(Tools.getInstance().getTime4(o,s),0,t.ts_list[s])}this.allObj=t,this.arrHeatStarObj=t.top_star,this.arrFansObj=t.top_group,this.arrStarObj=t.top_user,this.lable_starName.text=window.hexToDec(t.top_star[0].name),this.lable_starName1.text=window.hexToDec(t.top_star[1].name),this.lable_starName2.text=window.hexToDec(t.top_star[2].name),this.lable_HeatNumberOne.text="热度："+window.hexToDec(t.top_star[0].month_hot),this.lable_HeatNumberTwo.text="热度："+window.hexToDec(t.top_star[1].month_hot),this.lable_HeatNumberThree.text="热度："+window.hexToDec(t.top_star[2].month_hot),RES.getResByUrl(t.top_star[0].head_img,this.load_end0,this,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(t.top_star[1].head_img,this.load_end1,this,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(t.top_star[2].head_img,this.load_end2,this,RES.ResourceItem.TYPE_IMAGE);for(var h=0;7>h;h++)this.heatTableItem=new e.MonthTie_HeatTable_Item,this.heatTableItem.x=0,this.heatTableItem.y=130*h,this.heatTableItem.setData(t.top_star[h+3],h+4),this.group_heatTable.addChild(this.heatTableItem),this.arrHeatTableItem.push(this.heatTableItem);this.lable_qunName.text=window.hexToDec(t.top_group[0].group_name),this.lable_qunName1.text=window.hexToDec(t.top_group[1].group_name),this.lable_qunName2.text=window.hexToDec(t.top_group[2].group_name),this.lable_Name.text=window.hexToDec(t.top_group[0].star_name),this.lable_Name1.text=window.hexToDec(t.top_group[1].star_name),this.lable_Name2.text=window.hexToDec(t.top_group[2].star_name),RES.getResByUrl(t.top_group[0].group_face,this.load_endfans1,this,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(t.top_group[1].group_face,this.load_endfans2,this,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(t.top_group[2].group_face,this.load_endfans3,this,RES.ResourceItem.TYPE_IMAGE);for(var h=0;7>h;h++)this.FansTableItem=new e.MonthTie_FansTable_Item,this.FansTableItem.x=0,this.FansTableItem.y=130*h,this.FansTableItem.setData(t.top_group[h+3],h+4),this.group_fansTable.addChild(this.FansTableItem),this.arrFansTableItem.push(this.FansTableItem);this.lable_starClubIconOne.text=window.hexToDec(t.top_user[0].user_name),this.lable_starClubIconOne1.text=window.hexToDec(t.top_user[1].user_name),this.lable_starClubIconOne2.text=window.hexToDec(t.top_user[2].user_name),this.lable_starClubIconOneName.text=window.hexToDec(t.top_user[0].group_name),this.lable_starClubIconOneName1.text=window.hexToDec(t.top_user[1].group_name),this.lable_starClubIconOneName2.text=window.hexToDec(t.top_user[2].group_name),RES.getResByUrl(t.top_user[0].user_pic,this.load_endstar1,this,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(t.top_user[1].user_pic,this.load_endstar2,this,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(t.top_user[2].user_pic,this.load_endstar3,this,RES.ResourceItem.TYPE_IMAGE);for(var h=0;7>h;h++)this.StarTableItem=new e.MonthTie_StarTable_Item,this.StarTableItem.x=0,this.StarTableItem.y=130*h,this.StarTableItem.setData(t.top_user[h+3],h+4),this.group_starTable.addChild(this.StarTableItem),this.arrStarTableItem.push(this.StarTableItem);RES.getResByUrl(t.top_img,this.load_topImg,this,RES.ResourceItem.TYPE_IMAGE),this.img_heatDrop.touchEnabled=!1,this.img_fansDrop.touchEnabled=!1,this.img_starDrop.touchEnabled=!1,RES.getResByUrl(t.bottom_img,this.load_buttonImg,this,RES.ResourceItem.TYPE_IMAGE)},n.share=function(e){var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/starMonthlyRankShare",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,sign:t},function(e){system.Share.share(e,function(e){1==e&&system.TipText.produce().open("发送成功")})},!0,this)},n.addHeatItem=function(t){var a=this.arrHeatStarObj.length-(this.arrHeatTableItem.length+3),i=parseInt(a/10+""),n=this.arrHeatTableItem[this.arrHeatTableItem.length-1].y+130,s=this.arrHeatTableItem.length+3;if(i>0){for(var r=0;10>r;r++)this.heatTableItem=new e.MonthTie_HeatTable_Item,this.heatTableItem.x=0,this.heatTableItem.y=n+130*r,this.heatTableItem.setData(this.allObj.top_star[s+r],s+(r+1)),this.group_heatTable.addChild(this.heatTableItem),this.arrHeatTableItem.push(this.heatTableItem);this.group_heatDown.y+=1300,this.group_monthBing.y+=1300}if(0>=i){-1==this.img_heatDrop.scaleY&&(this.img_heatDrop.scaleY=1,this.deletHeatRanking());for(var r=0;a>r;r++)this.heatTableItem=new e.MonthTie_HeatTable_Item,this.heatTableItem.x=0,this.heatTableItem.y=n+130*r,this.heatTableItem.setData(this.allObj.top_star[s+r],s+(r+1)),this.group_heatTable.addChild(this.heatTableItem),this.arrHeatTableItem.push(this.heatTableItem);this.group_heatDown.y+=130*a,this.group_monthBing.y+=130*a}this.arrHeatStarObj.length==this.arrHeatTableItem.length+3&&(this.img_heatDrop.scaleY=-1)},n.adddDropFans=function(t){var a=this.arrFansObj.length-(this.arrFansTableItem.length+3),i=a/10,n=this.arrFansTableItem[this.arrFansTableItem.length-1].y+130,s=this.arrFansTableItem.length+3;if(parseInt(i+"")>0){for(var r=0;10>r;r++)this.FansTableItem=new e.MonthTie_FansTable_Item,this.FansTableItem.x=0,this.FansTableItem.y=n+130*r,this.FansTableItem.setData(this.allObj.top_group[s+r],s+(r+1)),this.group_fansTable.addChild(this.FansTableItem),this.arrFansTableItem.push(this.FansTableItem);this.group_fansDown.y+=1300,this.group_monthBing.y+=1300}if(parseInt(i+"")<=0){for(var r=0;a>r;r++)this.FansTableItem=new e.MonthTie_FansTable_Item,this.FansTableItem.x=0,this.FansTableItem.y=n+130*r,this.FansTableItem.setData(this.allObj.top_group[s+r],s+(r+1)),this.group_fansTable.addChild(this.FansTableItem),this.arrFansTableItem.push(this.FansTableItem);this.group_fansDown.y+=130*a,this.group_monthBing.y+=130*a,-1==this.img_fansDrop.scaleY&&(this.img_fansDrop.scaleY=1,this.deletFansTable())}this.arrFansObj.length==this.arrFansTableItem.length+3&&(this.img_fansDrop.scaleY=-1)},n.addStarDrop=function(t){var a=this.arrStarObj.length-(this.arrStarTableItem.length+3),i=a/10,n=this.arrStarTableItem[this.arrStarTableItem.length-1].y+130,s=this.arrStarTableItem.length+3;if(parseInt(i+"")>0){for(var r=0;10>r;r++)this.StarTableItem=new e.MonthTie_StarTable_Item,this.StarTableItem.x=0,this.StarTableItem.y=n+130*r,this.StarTableItem.setData(this.allObj.top_user[s+r],s+(r+1)),this.group_starTable.addChild(this.StarTableItem),this.arrStarTableItem.push(this.StarTableItem);this.group_starDown.y+=1300,this.group_monthBing.y+=1300}if(parseInt(i+"")<=0){-1==this.img_starDrop.scaleY&&(this.img_heatDrop.scaleY=1,this.deletStarRanking());for(var r=0;a>r;r++)this.StarTableItem=new e.MonthTie_StarTable_Item,this.StarTableItem.x=0,this.StarTableItem.y=n+130*r,this.StarTableItem.setData(this.allObj.top_user[s+r],s+(r+1)),this.group_starTable.addChild(this.StarTableItem),this.arrStarTableItem.push(this.StarTableItem);this.group_starDown.y+=130*a,this.group_monthBing.y+=130*a}this.arrStarObj.length==this.arrStarTableItem.length+3&&(this.img_starDrop.scaleY=-1)},n.load_end0=function(e){this.img_starIconOne.texture=e,this.img_starIconOne.width=234,this.img_starIconOne.height=234},n.load_end1=function(e){this.img_starIconTwo.texture=e,this.img_starIconTwo.width=184,this.img_starIconTwo.height=184},n.load_end2=function(e){this.img_starIconThree.texture=e,this.img_starIconThree.width=184,this.img_starIconThree.height=184},n.load_endfans1=function(e){this.img_fansIconOne.texture=e,this.img_fansIconOne.width=135,this.img_fansIconOne.height=135},n.load_endfans2=function(e){this.img_fansIconTwo.texture=e,this.img_fansIconTwo.width=113,this.img_fansIconTwo.height=113},n.load_endfans3=function(e){this.img_fansIconThree.texture=e,this.img_fansIconThree.width=113,this.img_fansIconThree.height=113},n.load_endstar1=function(e){this.img_starOne.texture=e,this.img_starOne.width=240,this.img_starOne.height=240},n.load_endstar2=function(e){this.img_starTwo.texture=e,this.img_starTwo.width=198,this.img_starTwo.height=198},n.load_endstar3=function(e){this.img_starThree.texture=e,this.img_starThree.width=196,this.img_starThree.height=196},n.load_topImg=function(e){this.img_starIcon.texture=e},n.load_buttonImg=function(e){this.img_buttonImg.texture=e},n.heatPos=function(){this.group_heatDown.y=2122,this.group_monthBing.y=2940},n.fansPos=function(){this.group_fansDown.y=1794,this.group_monthBing.y=2600},n.starPos=function(){this.group_starDown.y=2101,this.group_monthBing.y=2940},n.deletHeatRanking=function(){this.img_heatDrop.scaleY=1;for(var e=this.arrHeatTableItem.length-1;e>=7;e--){var t=this.arrHeatTableItem[e];this.group_heatTable.removeChild(t),this.arrHeatTableItem.splice(e,1)}this.heatPos(),this.scroll2.viewport.scrollV=0},n.deletFansTable=function(){this.img_fansDrop.scaleY=1;for(var e=this.arrFansTableItem.length-1;e>=7;e--){var t=this.arrFansTableItem[e];this.group_fansTable.removeChild(t),this.arrFansTableItem.splice(e,1)}this.fansPos(),this.scroll2.viewport.scrollV=0},n.deletStarRanking=function(){this.img_starDrop.scaleY=1;for(var e=this.arrStarTableItem.length-1;e>=7;e--){var t=this.arrStarTableItem[e];this.group_starTable.removeChild(t),this.arrStarTableItem.splice(e,1)}this.starPos(),this.scroll2.viewport.scrollV=0},n.updateMonthTie=function(t){if(-1==this.btn_drop.scaleY){this.btn_drop.scaleY=1;for(var a=this.group_month.numElements,i=a-1;i>0;i--){var n=this.group_month.getElementAt(i);e.MonthTieMonth.reclaim(n),n.parent&&n.parent.removeChild(n)}this.img_buttonImg.y=315}else{this.btn_drop.scaleY=-1;for(var i=0;i<this.allObj.ts_list.length;i++)if(this.allObj.ts_list[i]==this.mts);else{var s=e.MonthTieMonth.produce();this.group_month.addChildAt(s,1+i);var r=this.allObj.ts_list[i]-432e5,o=new Date;o.setTime(r);var h=Tools.getInstance().getTime4(o,i+1);s.setData(h,i+1,this.allObj.ts_list[i])}this.img_buttonImg.y=this.img_buttonImg.y+70*(this.allObj.ts_list.length-1)+4*(this.allObj.ts_list.length-1)}},n.heatRanking=function(e){this.img_heatOrange.visible=!0,this.img_fansClubOrange.visible=!1,this.img_fansClubGray.visible=!0,this.img_starClubOrange.visible=!1,this.img_starClubGray.visible=!0,this.group_heatStarRanking.visible=!0,this.group_fansClubRanking.visible=!1,this.group_starClubRanking.visible=!1,this.deletHeatRanking()},n.fansRanking=function(e){this.img_heatOrange.visible=!1,this.img_heatGray.visible=!0,this.img_fansClubGray.visible=!1,this.img_fansClubOrange.visible=!0,this.img_starClubOrange.visible=!1,this.img_starClubGray.visible=!0,this.group_fansClubRanking.visible=!0,this.group_heatStarRanking.visible=!1,this.group_starClubRanking.visible=!1,this.deletFansTable()},n.starRanking=function(e){this.img_starClubGray.visible=!1,this.img_starClubOrange.visible=!0,this.img_heatOrange.visible=!1,this.img_heatGray.visible=!0,this.img_fansClubOrange.visible=!1,this.img_fansClubGray.visible=!0,this.group_starClubRanking.visible=!0,this.group_heatStarRanking.visible=!1,this.group_fansClubRanking.visible=!1,this.deletStarRanking()},n.clear=function(){for(var t=this.arrHeatTableItem.length-1;t>=0;t--)this.group_heatTable.removeChildAt(t);for(var t=this.arrFansTableItem.length-1;t>=0;t--)this.group_fansTable.removeChildAt(t);for(var t=this.arrStarTableItem.length-1;t>=0;t--)this.group_starTable.removeChildAt(t);for(this.arrHeatStarObj=[],this.arrHeatTableItem=[],this.arrFansObj=[],this.arrFansTableItem=[],this.arrStarObj=[],this.arrStarTableItem=[];this.group_month.numElements>0;){var a=this.group_month.getElementAt(this.group_month.numElements-1);e.MonthTieMonth.reclaim(a),a.parent&&a.parent.removeChild(a)}this.heatRanking(null),this.deletFansTable(),this.deletStarRanking()},n.close=function(e){this.scroll2.viewport.scrollV=0,this.isChange=!1,"main"==this.type?(GameApp.Manager.controllerManager.monthTieController.hide(),GameApp.Manager.controllerManager.gameMainController.show()):(GameApp.Manager.controllerManager.monthTieController.hide(),GameApp.Manager.controllerManager.start())},a}(eui.Component);e.MonthTie=t,egret.registerClass(t,"monthTie.MonthTie")}(monthTie||(monthTie={}));var monthTie;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(e,t){this.mts=e,this.type=t,this.loaded?this.initUI():this.loading()},n.initUI=function(){var t=this;this.monthTie||(this.monthTie=new e.MonthTie,this.monthTie.type=this.type),this.BottomUIStage.addChild(this.monthTie);var a=(new md5).hex_md5(t.mts+"&");Util.sendJson1("http://115.159.190.186/getMonthly",{mts:t.mts,sign:a},function(e){t.monthTie.setData(e.data,t.mts)},!0,this)},n.hide=function(){this.monthTie.parent&&(this.BottomUIStage.removeChild(this.monthTie),this.monthTie.clear())},n.loading=function(){this.initUI()},a}(common.BaseView);e.MonthTieManager=t,egret.registerClass(t,"monthTie.MonthTieManager")}(monthTie||(monthTie={}));var monthTie;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/monthTie/MonthTieMonthSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.produce=function(e,t){void 0===e&&(e="1"),void 0===t&&(t=0),null==a.cacheDict[e]&&(a.cacheDict[e]=[]);var i,n=a.cacheDict[e];return i=n.length>0?n.pop():new a},a.reclaim=function(e,t){void 0===t&&(t="1"),null==a.cacheDict[t]&&(a.cacheDict[t]=[]);var i=a.cacheDict[t];-1==i.indexOf(e)&&(i.push(e),e.clear())},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_YearAndMonth.fontFamily="Heiti SC")},n.setData=function(e,t,a){this.lable_YearAndMonth.text=e,this.img_imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchOtherImg,this),this.index=t,this.mts=a},n.clear=function(){},n.touchOtherImg=function(t){if(GameApp.Manager.viewManager.monthTieManager.monthTie.isChange=!0,0==this.index){for(var a=GameApp.Manager.viewManager.monthTieManager.monthTie.group_month.numElements,i=a-1;i>0;i--){var n=GameApp.Manager.viewManager.monthTieManager.monthTie.group_month.getElementAt(i);e.MonthTieMonth.reclaim(n),n.parent&&n.parent.removeChild(n)}return GameApp.Manager.viewManager.monthTieManager.monthTie.img_buttonImg.y=315,void(GameApp.Manager.viewManager.monthTieManager.monthTie.btn_drop.scaleY=1)}for(var a=GameApp.Manager.viewManager.monthTieManager.monthTie.group_month.numElements,i=a-1;i>=0;i--){var n=GameApp.Manager.viewManager.monthTieManager.monthTie.group_month.getElementAt(i);e.MonthTieMonth.reclaim(n),n.parent&&n.parent.removeChild(n)}GameApp.Manager.viewManager.monthTieManager.monthTie.img_buttonImg.y=315,GameApp.Manager.viewManager.monthTieManager.monthTie.btn_drop.scaleY=1,GameApp.Manager.controllerManager.monthTieController.hide(),GameApp.Manager.controllerManager.monthTieController.show(this.mts,"main");var s=e.MonthTieMonth.produce();GameApp.Manager.viewManager.monthTieManager.monthTie.group_month.addChildAt(s,0),s.setData(this.lable_YearAndMonth.text,0,GameApp.Manager.viewManager.monthTieManager.monthTie.allObj.ts_list[this.index])},a.cacheDict={},a}(eui.Component);e.MonthTieMonth=t,egret.registerClass(t,"monthTie.MonthTieMonth")}(monthTie||(monthTie={}));var monthTie;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/monthTie/MonthTie_FansTable_ItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_fansNumber.fontFamily="Heiti SC",this.lable_fansClubName.fontFamily="Heiti SC",this.lable_fansName.fontFamily="Heiti SC")},i.setData=function(e,t){var a=t%2;0==a?(this.img_whiteBg.visible=!1,this.img_grayBg.visible=!0):(this.img_whiteBg.visible=!0,this.img_grayBg.visible=!1),this.lable_fansNumber.text=t+"",this.lable_fansClubName.text=window.hexToDec(e.group_name),this.lable_fansName.text=window.hexToDec(e.star_name),RES.getResByUrl(e.group_face,this.load_Icon,this,RES.ResourceItem.TYPE_IMAGE)},i.load_Icon=function(e){this.img_starIcon.texture=e,this.img_starIcon.width=72,this.img_starIcon.height=72},t}(eui.Component);e.MonthTie_FansTable_Item=t,egret.registerClass(t,"monthTie.MonthTie_FansTable_Item")}(monthTie||(monthTie={}));var monthTie;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/monthTie/MonthTie_HeatTable_ItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_rankImgNumber.fontFamily="Heiti SC",this.lable_heat.fontFamily="Heiti SC")},i.setData=function(e,t){var a=t%2;0==a?(this.img_itemBgWhite.visible=!1,this.img_itemBgGray.visible=!0):(this.img_itemBgWhite.visible=!0,this.img_itemBgGray.visible=!1),this.lable_rankImgNumber.text=t+"",this.lable_starName.text=window.hexToDec(e.name),this.lable_heat.text="热度："+window.hexToDec(e.month_hot),RES.getResByUrl(e.head_img,this.load_Icon,this,RES.ResourceItem.TYPE_IMAGE)},i.load_Icon=function(e){this.img_starIcon.texture=e,this.img_starIcon.width=94,this.img_starIcon.height=94},t}(eui.Component);e.MonthTie_HeatTable_Item=t,egret.registerClass(t,"monthTie.MonthTie_HeatTable_Item")}(monthTie||(monthTie={}));var monthTie;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/monthTie/MonthIie_StarTable_ItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_starNumber.fontFamily="Heiti SC",this.lable_starName.fontFamily="Heiti SC",this.lable_ClubName.fontFamily="Heiti SC")},i.setData=function(e,t){var a=t%2;0==a?(this.img_whiteBg.visible=!1,this.img_grayBg.visible=!0):(this.img_whiteBg.visible=!0,this.img_grayBg.visible=!1),this.lable_starNumber.text=t+"",this.lable_starName.text=window.hexToDec(e.user_name),this.lable_ClubName.text=window.hexToDec(e.group_name),RES.getResByUrl(e.user_pic,this.load_Icon,this,RES.ResourceItem.TYPE_IMAGE)},i.load_Icon=function(e){this.img_starIcon.texture=e,this.img_starIcon.width=77,this.img_starIcon.height=77},t}(eui.Component);e.MonthTie_StarTable_Item=t,egret.registerClass(t,"monthTie.MonthTie_StarTable_Item")}(monthTie||(monthTie={}));var newstar;!function(e){var t=function(e){function t(){e.call(this),this.isSelect=!1,this.key=0,this.skinName="src/view/gameUI/newstar/NewStarCheckBoxItemSkin.exml",this.touchEnabled=!0}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lbl1.fontFamily="Heiti SC"),this.bmpS.visible=!1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},i.tap=function(){this.isSelect?(this.isSelect=!1,this.bmpS.visible=!1):(this.isSelect=!0,this.bmpS.visible=!0)},i.setData=function(e,t){this.lbl1.text=e,this.key=t},t}(eui.Component);e.NewStarCheckBoxItem=t,egret.registerClass(t,"newstar.NewStarCheckBoxItem")}(newstar||(newstar={}));var newstar;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(){this.loaded?this.init():this.loading()},n.showSerach=function(t){this.newStarSerachUI||(this.newStarSerachUI=new e.NewStarSerachUI),this.BottomUIStage.addChild(this.newStarSerachUI),this.newStarSerachUI.serach(t)},n.init=function(){socketio.IoConnect.getInstance().initPomelo("0",GameApp.Manager.dataManager.uid),this.newStarUI||(this.newStarUI=new e.NewStarUI),this.BottomUIStage.addChild(this.newStarUI)},n.hide=function(){this.newStarUI&&(this.newStarUI.parent.removeChild(this.newStarUI),this.newStarUI.clear(),socketio.IoConnect.getInstance().disconnect())},n.hideSerach=function(){this.newStarSerachUI&&(this.newStarSerachUI.parent.removeChild(this.newStarSerachUI),this.newStarSerachUI.clear())},n.loading=function(){this.init()},n.load_end=function(){this.init(),this.loaded=!0},a}(common.BaseView);e.NewStarManager=t,egret.registerClass(t,"newstar.NewStarManager")}(newstar||(newstar={}));var newstar;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/newstar/NewStarSerachUISkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){var e=this;this.scroll1.height=this.stage.stageHeight-290-50,Tools.getInstance().isIphone()&&(this.lbl0.fontFamily="Heiti SC",this.lbl1.fontFamily="Heiti SC",this.lbl2.fontFamily="Heiti SC",this.lblStarName.fontFamily="Heiti SC"),this.lblStarName.addEventListener(egret.FocusEvent.FOCUS_IN,function(){"请输入明星姓名或组合全称"==e.lblStarName.text&&(e.lblStarName.text="",e.lblStarName.textColor=1358070)},this),this.lblStarName.addEventListener(egret.FocusEvent.FOCUS_OUT,function(){""==e.lblStarName.text||"请输入明星姓名或组合全称"==e.lblStarName.text?(e.lblStarName.text="请输入明星姓名或组合全称",e.lblStarName.textColor=12375519):e.serach(e.lblStarName.text)},this),this.btnSend.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.controllerManager.newStarController.hideSerach(),GameApp.Manager.controllerManager.newStarController.show()},this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.controllerManager.newStarController.hideSerach(),GameApp.Manager.viewManager.starPageManager.show()},this)},i.serach=function(e){var t=this;if(e){var a=window.decToHex(e),i=(new md5).hex_md5(GameApp.Manager.dataManager.uid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/searchStar",{user_id:GameApp.Manager.dataManager.uid,name:a,sign:i},function(e){t.clearData(),1==e.st?this.setData(e):(t.groupTip.visible=!0,t.lbl1.text="很遗憾,暂无“"+t.lblStarName.text+"”")},!0,this)}},i.setData=function(e){var t=e.stars_list;if(t.length>0){this.groupTip.visible=!1;for(var a in t){var i=new starPage.StarPageItem;this.groupData.addChild(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.headTap,this)}for(var n=t.length-1;n>=0;n--){var i=this.groupData.getElementAt(n);i.setData(t[n])}}else this.groupTip.visible=!0,this.lbl1.text="很遗憾,暂无“"+this.lblStarName.text+"”"},i.headTap=function(e){var t=e.currentTarget;GameApp.Manager.dataManager.bid=t.bid,console.log("选择:"+t.bid),GameApp.Manager.dataManager.topEnter=2,GameApp.Manager.controllerManager.newStarController.hideSerach(),GameApp.Manager.controllerManager.start()},i.clearData=function(){for(;this.groupData.numElements>0;){var e=this.groupData.getElementAt(this.groupData.numElements-1);e.parent&&e.parent.removeChild(e)}},i.clear=function(){this.lblStarName.text="请输入明星姓名或组合全称",this.lblStarName.textColor=12375519,this.clearData(),this.groupTip.visible=!1},i.close=function(){GameApp.Manager.controllerManager.newStarController.hideSerach(),GameApp.Manager.viewManager.starPageManager.show()},t}(eui.Component);e.NewStarSerachUI=t,egret.registerClass(t,"newstar.NewStarSerachUI")}(newstar||(newstar={}));var newstar;!function(e){var t=function(t){function a(){t.call(this),this.arrBoxItem=[],this.base64str="",this.skinName="src/view/gameUI/newstar/NewStarUISkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){var t=this;this.scroll1.height=egret.MainContext.instance.stage.stageHeight,this.bmpStar.mask=this.maskStar,Tools.getInstance().isIphone()&&(this.lbl0.fontFamily="Heiti SC",this.lbl1.fontFamily="Heiti SC",this.lbl2.fontFamily="Heiti SC",this.lbl3.fontFamily="Heiti SC",this.lbl4.fontFamily="Heiti SC",this.lbl5.fontFamily="Heiti SC",this.lbl6.fontFamily="Heiti SC",this.lbl7.fontFamily="Heiti SC",this.lbl8.fontFamily="Heiti SC",this.lbl9.fontFamily="Heiti SC",this.lbl10.fontFamily="Heiti SC",this.lbl11.fontFamily="Heiti SC",this.lbl12.fontFamily="Heiti SC",this.lbl13.fontFamily="Heiti SC",this.lbl14.fontFamily="Heiti SC",this.lblStarName.fontFamily="Heiti SC",this.lblStarDesc.fontFamily="Heiti SC");for(var a=0;6>a;a++){var i=new e.NewStarCheckBoxItem;switch(this.groupData.addChild(i),a){case 0:i.setData("歌手",a+1);break;case 1:i.setData("演员",a+1);break;case 2:i.setData("主持",a+1);break;case 3:i.setData("主播",a+1);break;case 4:i.setData("网红",a+1);break;case 5:i.setData("其他",a+1)}this.arrBoxItem.push(i)}this.lblStarName.addEventListener(egret.FocusEvent.FOCUS_IN,function(){"请输入明星姓名或组合全称"==t.lblStarName.text&&(t.lblStarName.text="",t.lblStarName.textColor=1358070)},this),this.lblStarName.addEventListener(egret.FocusEvent.FOCUS_OUT,function(){""==t.lblStarName.text&&(t.lblStarName.text="请输入明星姓名或组合全称",t.lblStarName.textColor=12375519)},this),this.lblStarDesc.addEventListener(egret.FocusEvent.FOCUS_IN,function(){"如代表作等"==t.lblStarDesc.text&&(t.lblStarDesc.text="",t.lblStarDesc.textColor=1358070)},this),this.lblStarDesc.addEventListener(egret.FocusEvent.FOCUS_OUT,function(){""==t.lblStarDesc.text&&(t.lblStarDesc.text="如代表作等",t.lblStarDesc.textColor=12375519)},this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.add_tap,this),this.btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ok_tap,this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},n.add_tap=function(){""==this.base64str&&(isWeixin()?selectImageWX(this.selectedHandler,this):selectImage(this.selectedHandler,this,0))},n.ok_tap=function(){if("请输入明星姓名或组合全称"==this.lblStarName.text)return void(this.lbl11.visible=!0);if("如代表作等"==this.lblStarDesc.text)return void(this.lbl12.visible=!0);var e=[];for(var t in this.arrBoxItem){var a=this.arrBoxItem[t];a.isSelect&&e.push(a.key)}if(0==e.length)return void(this.lbl13.visible=!0);var i=window.decToHex(this.lblStarName.text),n=window.decToHex(this.lblStarDesc.text);this.groupTip.visible=!0,this.lbl14.visible=!0,socketio.IoConnect.getInstance().upload(1,{user_id:GameApp.Manager.dataManager.uid,group_openid:GameApp.Manager.dataManager.group_openid,name:i,desc:n,type:JSON.stringify(e),imgData:this.base64str},function(e){console.log("提交over",e),1==e.st?aler.AlertPanel1.getInstance().show("","提交成功","确定",function(){this.groupTip.visible=!1,this.close()},this):aler.AlertPanel1.getInstance().show("","提交失败","确定",function(){this.groupTip.visible=!1},this),this.lbl14.visible=!1},this)},n.selectedHandler=function(e,t,a){RES.getResByUrl(t,e.compFunc,e,RES.ResourceItem.TYPE_IMAGE)},n.bytesHandler=function(e,t){console.log("大图数据:"+t)},n.compFunc=function(e){this.bmpStar.source=e,this.bmpStar.scaleX=this.bmpStar.scaleY=200/e.textureWidth,this.base64str=e.toDataURL("image/jpeg"),console.log("选择了:",this.base64str),this.rectStarBack.visible=!0},n.clear=function(){this.lblStarName.textColor=12375519,this.lblStarDesc.textColor=12375519,this.lblStarName.text="请输入明星姓名或组合全称",this.lblStarDesc.text="如代表作等",this.lbl11.visible=!1,this.lbl12.visible=!1,this.lbl13.visible=!1;for(var e in this.arrBoxItem){var t=this.arrBoxItem[e];t.isSelect&&t.tap()}this.base64str="",this.bmpStar.source=null,this.rectStarBack.visible=!1,this.groupTip.visible=!1,this.lbl14.visible=!0},n.close=function(){GameApp.Manager.controllerManager.newStarController.hide(),GameApp.Manager.viewManager.starPageManager.show()},a}(eui.Component);e.NewStarUI=t,egret.registerClass(t,"newstar.NewStarUI")}(newstar||(newstar={}));var pay;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.type=0,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.setLucky=function(){this.rankStarUI&&this.rankStarUI.setLucky()},n.show=function(e,t,a){t>=0&&(this.type=t),this.callback=e,this.isByModal=a,this.loaded?this.initUI():this.loading()},n.initUI=function(){this.callback&&this.callback.call(null),this.rankStarUI||(this.rankStarUI=new e.PayUI),this.rankStarUI.type=this.type,this.rankStarUI.isBuyModul=this.isByModal,this.BottomUIStage.addChild(this.rankStarUI),this.rankStarUI.setData()},n.hide=function(){this.rankStarUI.parent&&this.BottomUIStage.removeChild(this.rankStarUI)},n.loading=function(){GameApp.Manager.controllerManager.loader.moduleLoading(["public"],this.load_end,this)},n.load_end=function(){this.loaded=!0,this.initUI()},a}(common.BaseView);e.PayManager=t,egret.registerClass(t,"pay.PayManager")}(pay||(pay={}));var pay;!function(e){var t=function(e){function t(){e.call(this),this.type=0,this.skinName="src/view/gameUI/pay/PayUISkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblStar.fontFamily="Heiti SC",this.lblIOSID.fontFamily="Heiti SC",this.lbl1.fontFamily="Heiti SC",this.lbl2.fontFamily="Heiti SC",this.lbl3.fontFamily="Heiti SC",this.lbl4.fontFamily="Heiti SC",this.lbl5.fontFamily="Heiti SC",this.lbl6.fontFamily="Heiti SC",this.lbl7.fontFamily="Heiti SC",this.lbl8.fontFamily="Heiti SC",this.lbl9.fontFamily="Heiti SC",this.lbl10.fontFamily="Heiti SC",this.lbl11.fontFamily="Heiti SC",this.lbl12.fontFamily="Heiti SC",this.lbl13.fontFamily="Heiti SC",this.lbl14.fontFamily="Heiti SC",this.lbl15.fontFamily="Heiti SC",this.lable_uid.fontFamily="Heiti SC",this.lable_des.fontFamily="Heiti SC",this.lable_love.fontFamily="Heiti SC",this.lable_loveDsc.fontFamily="Heiti SC"),this.groupIOS.visible=!1,this.lblIOSID.text="用户ID:"+GameApp.Manager.dataManager.uid,this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn1_tap,this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn2_tap,this),this.btn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn3_tap,this),this.btn4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn4_tap,this),this.btn5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn5_tap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.btnCloseTip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeTip,this),this.btn8.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn8_tap,this)},i.btnIosClose=function(){this.groupIOS.visible=!1},i.setData=function(){this.setLucky(),this.lable_uid.text="ID: "+GameApp.Manager.dataManager.uid,t.isByGift?(this.group_canBuyLoveGift.visible=!0,this.lable_des.y=1024):(this.group_canBuyLoveGift.visible=!1,this.lable_des.y=905),this.lable_des.visible=!0
},i.setLucky=function(){this.lblStar.text=GameApp.Manager.dataManager.lucystar+""},i.btn1_tap=function(){this.pay(1)},i.btn2_tap=function(){this.pay(2)},i.btn3_tap=function(){this.pay(3)},i.btn4_tap=function(){this.pay(4)},i.btn5_tap=function(){this.pay(5)},i.btn6_tap=function(){this.pay(6)},i.btn7_tap=function(){this.pay(7)},i.btn8_tap=function(){this.pay(8)},i.pay=function(e){aler.AlertPanel1.getInstance().show("温馨提示","暂停充值，新版开放后则可继续充值。","确定",function(){GameApp.Manager.viewManager.clearMask()},this)},i.payCall=function(e){switch(console.log(e.st),e.st){case 1:this.jspay(e);break;case 2:}},i.jspay=function(e){var t=this;window.openGroup.pay({appid:e.appid,group_openid:e.group_openid,goodsname:e.goodsname,goodsdesc:e.goodsdesc,goodsurl:e.goodsurl,money:e.money,tid:e.tid,sign:e.sign,onSuccess:function(a){system.TipText.produce().open("购买成功",2e3,1e3),GameApp.Manager.viewManager.gameMainUI.getLuckyStarByServer(),2==t.isBuyModul&&userPanel.UserPanel.getInstance().changeMedal2Stage(),e.goods_id&&8==e.goods_id&&GameApp.Manager.viewManager.taskManager.taskUI.changeLiBaoPos()},onError:function(e){system.TipText.produce().open("购买失败",2e3,1e3)}})},i.closeTip=function(){this.groupIOS.visible=!1},i.close=function(){this.groupIOS.visible=!1,0==this.type?(GameApp.Manager.controllerManager.payController.hide(),GameApp.Manager.controllerManager.gameMainController.show()):(GameApp.Manager.controllerManager.payController.hide(),GameApp.Manager.viewManager.liveChatRoomManager.show(-1)),this.lable_des.visible=!1},t.getLuckyStarNum=3,t.isByGift=!1,t}(eui.Component);e.PayUI=t,egret.registerClass(t,"pay.PayUI")}(pay||(pay={}));var system;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/system/GroupBookSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},n.childrenCreated=function(){this.scorll1.height=this.stage.stageHeight,Tools.getInstance().isIphone()&&(this.lblTitle.fontFamily="Heiti SC",this.lbl1.fontFamily="Heiti SC",this.lbl2.fontFamily="Heiti SC",this.lbl3.fontFamily="Heiti SC",this.lbl4.fontFamily="Heiti SC",this.lbl5.fontFamily="Heiti SC",this.lbl6.fontFamily="Heiti SC",this.lbl7.fontFamily="Heiti SC",this.lbl8.fontFamily="Heiti SC",this.lbl9.fontFamily="Heiti SC",this.lbl10.fontFamily="Heiti SC",this.lbl11.fontFamily="Heiti SC",this.lbl12.fontFamily="Heiti SC"),this.lbl3.textFlow=(new egret.HtmlTextParser).parser("加官方群主QQ群：<font color=#316BE9>201758241（点击加群）</font>"),this.lbl2.textFlow=(new egret.HtmlTextParser).parser("关注部落：<font color=#316BE9>点击访问官方部落</font>"),this.btnJoin1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.join1_tap,this),this.btnJoin2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.join2_tap,this),this.btnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},n.join1_tap=function(){location.href="http://buluo.qq.com/p/barindex.html?bid=312564"},n.join2_tap=function(){e.GroupJoin.join("2970C88E2D2E0EDE54E8D57E14268B03")},n.show=function(){GameApp.Manager.viewManager.BottomUIStage.addChild(this)},n.close=function(){GameApp.Manager.viewManager.BottomUIStage.removeChild(this),GameApp.Manager.controllerManager.taskController.show()},a}(eui.Component);e.GroupBookUI=t,egret.registerClass(t,"system.GroupBookUI")}(system||(system={}));var rankGroup;!function(e){var t=function(e){function t(){e.call(this),this.group_openid="",this.bid="",this.skinName="src/view/gameUI/rankGroup/RankGroupItemSkin.exml",this.bmpIcon=new module.BaseCircleImage,this.bmpIcon.x=382,this.bmpIcon.y=116,this.iconNow=new task.TaskIcon}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblRank.fontFamily="Heiti SC",this.lblName.fontFamily="Heiti SC",this.lblNum.fontFamily="Heiti SC"),this.groupData.addChild(this.iconNow),this.addChildAt(this.bmpIcon,1),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},i.tap=function(e){system.GroupJoin.join(this.group_openid)},i.setData=function(e,t){this.group_openid=e.group_openid,this.bid=e.bid,this.bmpIcon.setData(e.group_face,116,116),this.lblRank.text="NO."+t,this.lblName.textFlow=(new egret.HtmlTextParser).parser(window.hexToDec(e.group_name)+""),this.lblNum.textFlow=(new egret.HtmlTextParser).parser("成员 <font color=#82ddff>"+e.member_num+"</font> 人"),this.iconNow.setText(e.level)},i.clear=function(){this.bmpIcon.clear()},t.cacheDict={},t}(eui.Component);e.RankGroupItem=t,egret.registerClass(t,"rankGroup.RankGroupItem")}(rankGroup||(rankGroup={}));var rankGroup;!function(e){var t=function(e){function t(){e.call(this),this.group_openid="",this.skinName="src/view/gameUI/rankGroup/RankGroupItem1Skin.exml",this.bmpIcon=new module.BaseCircleImage,this.bmpIcon.x=376.5,this.bmpIcon.y=68.5,this.iconNow=new task.TaskIcon}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblRank.fontFamily="Heiti SC",this.lblName.fontFamily="Heiti SC",this.lblNum.fontFamily="Heiti SC"),this.groupData.addChild(this.iconNow),this.addChildAt(this.bmpIcon,1),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},i.tap=function(e){system.GroupJoin.join(this.group_openid)},i.setData=function(e,t){this.group_openid=e.group_openid,2==t&&(this.bmpBack.source="p_no"+t),this.bmpIcon.setData(e.group_face,81,81),this.lblRank.text="NO."+t,this.lblName.textFlow=(new egret.HtmlTextParser).parser(window.hexToDec(e.group_name)),this.lblNum.textFlow=(new egret.HtmlTextParser).parser("成员 <font color=#82ddff>"+e.member_num+"</font> 人"),this.iconNow.setText(e.level),setTimeout(function(e){e.iconNow.x=e.lblName.x+15*Tools.getInstance().getTextLenChar(e.lblName.text)+10},50,this)},i.clear=function(){this.bmpIcon.clear()},t.cacheDict={},t}(eui.Component);e.RankGroupItem1=t,egret.registerClass(t,"rankGroup.RankGroupItem1")}(rankGroup||(rankGroup={}));var rankGroup;!function(e){var t=function(e){function t(){e.call(this),this.group_openid="",this.skinName="src/view/gameUI/rankGroup/RankGroupItem2Skin.exml",this.bmpIcon=new module.BaseCircleImage,this.bmpIcon.x=164.5,this.bmpIcon.y=64.5,this.iconNow=new task.TaskIcon,this.iconNow.x=550,this.iconNow.y=33}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblRank.fontFamily="Heiti SC",this.lblName.fontFamily="Heiti SC",this.lblNum.fontFamily="Heiti SC"),this.groupData.addChild(this.iconNow),this.addChildAt(this.bmpIcon,1),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},i.tap=function(e){system.GroupJoin.join(this.group_openid)},i.setData=function(e,t){this.group_openid=e.group_openid,this.bmpIcon.setData(e.group_face,81,81),this.lblRank.text="NO."+t,this.lblName.textFlow=(new egret.HtmlTextParser).parser(window.hexToDec(e.group_name)),this.lblNum.textFlow=(new egret.HtmlTextParser).parser("成员 <font color=#82ddff>"+e.member_num+"</font> 人"),this.iconNow.setText(e.level),setTimeout(function(e){e.iconNow.x=e.lblName.x+15*Tools.getInstance().getTextLenChar(e.lblName.text)+10},50,this)},i.clear=function(){this.bmpIcon.clear()},t.cacheDict={},t}(eui.Component);e.RankGroupItem2=t,egret.registerClass(t,"rankGroup.RankGroupItem2")}(rankGroup||(rankGroup={}));var rankGroup;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(){this.loaded?this.init():this.loading()},n.init=function(){this.rankGroupUI||(this.rankGroupUI=new e.RankGroupUI),this.BottomUIStage.addChild(this.rankGroupUI);var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+GameApp.Manager.dataManager.bid_save+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/groupLevelRank",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid_save,sign:t},function(e){1==e.st&&this.initUI(e.rank)},!0,this)},n.initUI=function(e){this.rankGroupUI.setData(e)},n.hide=function(){this.rankGroupUI&&(this.rankGroupUI.parent.removeChild(this.rankGroupUI),this.rankGroupUI.clear())},n.loading=function(){this.init()},n.load_end=function(){this.init(),this.loaded=!0},a}(common.BaseView);e.RankGroupManager=t,egret.registerClass(t,"rankGroup.RankGroupManager")}(rankGroup||(rankGroup={}));var rankGroup;!function(e){var t=function(t){function a(){t.call(this),this.arr=[],this.arr1=[],this.arr2=[],this.skinName="src/view/gameUI/rankGroup/RankGroupUISkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblTitle.fontFamily="Heiti SC"),this.scroll1.height=this.stage.stageHeight-95,this.rtnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},n.setData=function(t){for(var a=0,i=0;i<t.length;i++)switch(i){case 0:var n=e.RankGroupItem.produce();this.groupData.addChild(n),this.arr.push(n),n.setData(t[i],i+1),n.y=a,a+=302;break;case 1:var s=e.RankGroupItem1.produce();this.groupData.addChild(s),this.arr1.push(s),s.setData(t[i],i+1),s.y=a,a+=236;break;case 2:var s=e.RankGroupItem1.produce();this.groupData.addChild(s),this.arr1.push(s),s.setData(t[i],i+1),s.y=a,a+=236;break;default:var r=e.RankGroupItem2.produce();this.groupData.addChild(r),this.arr2.push(r),r.setData(t[i],i+1),r.y=a,a+=135}},n.clear=function(){for(;this.arr.length>0;){var t=this.arr.pop();e.RankGroupItem.reclaim(t),t.parent&&t.parent.removeChild(t)}for(;this.arr1.length>0;){var a=this.arr1.pop();e.RankGroupItem1.reclaim(a),a.parent&&a.parent.removeChild(a)}for(;this.arr2.length>0;){var i=this.arr2.pop();e.RankGroupItem2.reclaim(i),i.parent&&i.parent.removeChild(i)}},n.close=function(){GameApp.Manager.controllerManager.rankGroupController.hide(),GameApp.Manager.controllerManager.taskController.show()},a}(eui.Component);e.RankGroupUI=t,egret.registerClass(t,"rankGroup.RankGroupUI")}(rankGroup||(rankGroup={}));var groupXuan;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/rankGroupContribution/groupXuan/GroupXuanSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_title.fontFamily="Heiti SC",this.lable_groupName.fontFamily="Heiti SC"),this.rect_join.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){system.GroupJoin.join(this.group_openid)},this)},i.setData=function(e){this.lable_title.text=window.hexToDec(e.message),this.lable_groupName.text=window.hexToDec(e.group_name),RES.getResByUrl(e.group_face,this.addGroupIcon,this,RES.ResourceItem.TYPE_IMAGE),this.group_openid=e.group_openid},i.addGroupIcon=function(e){this.img_groupIcon.texture=e},t}(eui.Component);e.GroupXuan=t,egret.registerClass(t,"groupXuan.GroupXuan")}(groupXuan||(groupXuan={}));var rankGroupContribution;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.type=0,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(e){-1!=e&&(this.type=e),this.loaded?this.init():this.loading()},n.init=function(){this.rankGroupContributionUI||(this.rankGroupContributionUI=new e.RankGroupContributionUI),this.BottomUIStage.addChild(this.rankGroupContributionUI),this.rankGroupContributionUI.type=this.type;var t=(new md5).hex_md5(GameApp.Manager.dataManager.bid_save+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getGroupContributionRankList",{bid:GameApp.Manager.dataManager.bid_save,index:0,sign:t},function(e){1==e.st&&this.initUI(e)},!0,this)},n.initUI=function(e){this.rankGroupContributionUI.setData(e)},n.hide=function(){this.rankGroupContributionUI&&(this.rankGroupContributionUI.parent.removeChild(this.rankGroupContributionUI),this.rankGroupContributionUI.clear())},n.loading=function(){this.init()},n.load_end=function(){this.init(),this.loaded=!0},a}(common.BaseView);e.RankGroupContributionManager=t,egret.registerClass(t,"rankGroupContribution.RankGroupContributionManager")}(rankGroupContribution||(rankGroupContribution={}));var rankGroupContribution;!function(e){var t=function(t){function a(){t.call(this),this.gxrankArr=[],this.gxrank1Arr=[],this.bo=!1,this.currentGroup=0,this.disNum=10,this.index=0,this.arr=[],this.send=!1,this.skinName="src/view/gameUI/rankGroupContribution/RankGroupContributionUISkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.txt1.fontFamily="Heiti SC"),this.scroll1.height=egret.MainContext.instance.stage.stageHeight-100,this.groupBottom.y=egret.MainContext.instance.stage.stageHeight-152,this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.scroll1.addEventListener(eui.UIEvent.CHANGE,this.change,this)},a.groupsArr=function(t){e.RankGroupContributionUI.xunGroupArr=t.valid},a.addxuanGroups=function(t){e.RankGroupContributionUI.xunGroupArr.push(t)},n.change=function(){if(this.scroll1.viewport&&this.arr.length>0){var e=0==this.index?this.arr[0]:this.arr[this.index*this.disNum-this.disNum],t=(this.index+1)*this.disNum>=this.arr.length?this.arr[this.arr.length-1]:this.arr[(this.index+1)*this.disNum];this.scroll1.viewport.scrollV>=t.y-this.scroll1.height&&(this.index<this.arr.length/this.disNum-1?(this.index++,this.dis()):this.ajaxPost()),this.scroll1.viewport.scrollV<e.y&&this.index>0&&(this.index--,this.dis())}},n.ajaxPost=function(){if(!this.send){this.send=!0;var e=this;this.currentGroup++;var t=(new md5).hex_md5(GameApp.Manager.dataManager.bid_save+"&");Util.sendJson1("http://sf.xintiao100.com/getGroupContributionRankList",{bid:GameApp.Manager.dataManager.bid_save,index:this.currentGroup,sign:t},function(t){e.send=!1,1==t.st&&e.add(t)},!0,this)}},n.dis=function(){for(var e=0==this.index?0:this.index*this.disNum-this.disNum,t=(this.index+1)*this.disNum,a=0;a<this.arr.length;a++){var i=this.arr[a];a>=e&&t>a?this.groupData.addChild(i):i.parent&&i.parent.removeChild(i)}},n.setData=function(t){var a=this;t.data;this.add(t);var i=e.RankGroupContributionUI.xunGroupArr.length;i>0?(a.r=a.r||2,a.next=a.next||0,a.xuanGroup||a.xuanGroup1||(a.xuanGroup=new groupXuan.GroupXuan,a.xuanGroup.x=0,a.xuanGroup.y=100,a.scroll1.y=260,a.xuanGroup.setData(e.RankGroupContributionUI.xunGroupArr[a.next]),a.addChild(a.xuanGroup),a.next+=1,a.next>=i&&(a.next=0)),a.timer=new egret.Timer(3e3,0),a.timer.addEventListener(egret.TimerEvent.TIMER,function(){var t=e.RankGroupContributionUI.xunGroupArr.length;if(t>0){var i=(new Date).getTime();e.RankGroupContributionUI.xunGroupArr[a.next]&&i>e.RankGroupContributionUI.xunGroupArr[a.next].end_time?e.RankGroupContributionUI.xunGroupArr.splice(a.next,1):1!=t&&(2==a.r?(a.xuanGroup1=new groupXuan.GroupXuan,a.xuanGroup1.x=750,a.xuanGroup1.y=100,a.xuanGroup1.setData(e.RankGroupContributionUI.xunGroupArr[a.next]),a.addChild(a.xuanGroup1),a.next+=1,a.next>=t&&(a.next=0),egret.Tween.get(a.xuanGroup).to({x:-750},1e3).call(function(){a.xuanGroup.parent&&(a.xuanGroup.parent.removeChild(a.xuanGroup),a.xuanGroup=null)}),egret.Tween.get(a.xuanGroup1).to({x:0},1e3).call(function(){}),a.r=1):(a.xuanGroup=new groupXuan.GroupXuan,a.xuanGroup.x=750,a.xuanGroup.y=100,a.xuanGroup.setData(e.RankGroupContributionUI.xunGroupArr[a.next]),a.addChild(a.xuanGroup),a.next+=1,a.next>=t&&(a.next=0),egret.Tween.get(a.xuanGroup1).to({x:-750},1e3).call(function(){a.xuanGroup1.parent&&(a.xuanGroup1.parent.removeChild(a.xuanGroup1),a.xuanGroup1=null)}),egret.Tween.get(a.xuanGroup).to({x:0},1e3).call(function(){}),a.r=2))}else a.timer.stop(),2==a.r?a.xuanGroup.parent&&a.xuanGroup.parent.removeChild(a.xuanGroup):a.xuanGroup1.parent&&a.xuanGroup1.parent.removeChild(a.xuanGroup1),a.scroll1.y=100},a),a.timer.start()):a.scroll1.y=100},n.add=function(t){for(var a=t.data,i=this.arr.length,n=0;n<a.list.length;n++){var s=a.list[n];if(s.group_openid==GameApp.Manager.dataManager.group_openid){var r=e.RankGroupItem1.produce();this.groupData.addChild(r),r.y=125*i+125*n,this.arr.push(r),this.gxrank1Arr.push(r)}else{var o=e.RankGroupItem.produce();this.groupData.addChild(o),o.y=125*i+125*n,this.arr.push(o),this.gxrankArr.push(o)}}for(var n=this.arr.length-1;n>=i;n--){var s=a.list[n-i];if(console.log(n),s.group_openid==GameApp.Manager.dataManager.group_openid){var r=this.arr[n];r.setData(s)}else{var o=this.arr[n];o.setData(s)}}this.dis()},n.clear=function(){for(;this.gxrankArr.length>0;){var t=this.gxrankArr.pop();e.RankGroupItem.reclaim(t),t.parent&&t.parent.removeChild(t)}for(;this.gxrank1Arr.length>0;){var a=this.gxrank1Arr.pop();e.RankGroupItem1.reclaim(a),a.parent&&a.parent.removeChild(a)}this.gxrankArr=[],this.gxrank1Arr=[],this.arr=[],this.currentGroup=0,this.groupData.scrollV=0,this.index=0},n.close=function(){0==this.type?GameApp.Manager.controllerManager.gameMainController.show():GameApp.Manager.controllerManager.taskController.show(),this.timer&&this.timer.stop(),GameApp.Manager.controllerManager.rankGroupContributionController.hide()},a.xunGroupArr=[],a}(eui.Component);e.RankGroupContributionUI=t,egret.registerClass(t,"rankGroupContribution.RankGroupContributionUI")}(rankGroupContribution||(rankGroupContribution={}));var rankGroupContribution;!function(e){var t=function(e){function t(){e.call(this),this.group_openid="",this.bid="",this.skinName="src/view/gameUI/rankGroupContribution/RankGroupConItemSkin.exml",this.btnIcon=new task.TaskIcon,this.btnIcon.scaleX=this.btnIcon.scaleY=.8}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){var e=this;this.addChild(this.btnIcon),this.btnIcon.x=428,this.btnIcon.y=30,this.addChildAt(this.bmpIcon,2),Tools.getInstance().isIphone()&&(this.lblRank.fontFamily="Heiti SC",this.lblName.fontFamily="Heiti SC",this.lblGX.fontFamily="Heiti SC",this.lblMember.fontFamily="Heiti SC"),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this),this.btnJoin.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){system.GroupJoin.join(e.group_openid)},this)},i.tap=function(e){},i.setData=function(e){switch(this.group_openid=e.group_openid,this.bid=e.bid,e.rank+""){case"1":case"2":case"3":this.lblRank.visible=!1,this.bmpRank.visible=!0,this.bmpRank.source="p1_gxicon"+e.rank;break;default:this.lblRank.visible=!0,this.bmpRank.visible=!1,this.lblRank.text=""+e.rank}this.lblName.text=""+window.hexToDec(e.group_name),this.lblGX.textFlow=(new egret.HtmlTextParser).parser("本月贡献 <font color=#EDBE28>"+e.contribution+"</font>"),this.lblMember.text=e.member_num+"人";for(var t=0,a=0;a<this.lblName.text.length;a++){var i=this.lblName.text.charCodeAt(a);t+=i>=0&&128>=i?1:2}this.btnIcon.x=this.lblName.x+15*t+5,RES.getResByUrl(e.group_face,this.load_end,this,RES.ResourceItem.TYPE_IMAGE),this.btnIcon.setText(e.group_level)},i.load_end=function(e){this.bmpIcon.source=e},i.clear=function(){},t.cacheDict={},t}(eui.Component);e.RankGroupItem=t,egret.registerClass(t,"rankGroupContribution.RankGroupItem")}(rankGroupContribution||(rankGroupContribution={}));var rankGroupContribution;!function(e){var t=function(e){function t(){e.call(this),this.group_openid="",this.bid="",this.skinName="src/view/gameUI/rankGroupContribution/RankGroupConItem1Skin.exml",this.btnIcon=new task.TaskIcon,this.btnIcon.scaleX=this.btnIcon.scaleY=.8}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){this.addChild(this.btnIcon),this.btnIcon.x=440,this.btnIcon.y=35,this.addChildAt(this.bmpIcon,2),Tools.getInstance().isIphone()&&(this.lblRank.fontFamily="Heiti SC",this.lblName.fontFamily="Heiti SC",this.lblGX.fontFamily="Heiti SC",this.lblMember.fontFamily="Heiti SC"),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},i.tap=function(e){},i.setData=function(e){switch(this.group_openid=e.group_openid,this.bid=e.bid,e.rank+""){case"1":case"2":case"3":this.lblRank.visible=!1,this.bmpRank.visible=!0,this.bmpRank.source="p1_gxicon"+e.rank;break;default:this.lblRank.visible=!0,this.bmpRank.visible=!1,this.lblRank.text=""+e.rank}this.lblName.text=""+window.hexToDec(e.group_name),this.lblGX.textFlow=(new egret.HtmlTextParser).parser("本月贡献 <font color=#ffffff>"+e.contribution+"</font>"),this.lblMember.text=e.member_num+"人";for(var t=0,a=0;a<this.lblName.text.length;a++){var i=this.lblName.text.charCodeAt(a);t+=i>=0&&128>=i?1:2}this.btnIcon.x=this.lblName.x+16*t+10,RES.getResByUrl(e.group_face,this.load_end,this,RES.ResourceItem.TYPE_IMAGE),this.btnIcon.setText(e.group_level)},i.load_end=function(e){this.bmpIcon.source=e},i.clear=function(){},t.cacheDict={},t}(eui.Component);e.RankGroupItem1=t,egret.registerClass(t,"rankGroupContribution.RankGroupItem1")}(rankGroupContribution||(rankGroupContribution={}));var rankStar;!function(e){var t=function(e){function t(){e.call(this),this.bid="",this.group_openid1="0",this.group_openid2="0",this.group_openid3="0",this.uid1=0,this.uid2=0,this.uid3=0,this.skinName="src/view/gameUI/rankStar/RankStarItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblName.fontFamily="Heiti SC",this.hot.fontFamily="Heiti SC"),this.btnHead.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.dataManager.entenVisiter=2,socketio.IoConnect.getInstance().disconnect(),GameApp.Manager.controllerManager.start(this.bid)},this),this.btnicon1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openUserPanel1,this),this.btnicon2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openUserPanel2,this),this.btnicon3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openUserPanel3,this)},i.openUserPanel1=function(e){this.uid1>0&&userPanel.UserPanel.getInstance().open(this.uid1,this.bid,this.group_openid1),e.stopPropagation()},i.openUserPanel2=function(e){this.uid2>0&&userPanel.UserPanel.getInstance().open(this.uid2,this.bid,this.group_openid2),e.stopPropagation()},i.openUserPanel3=function(e){this.uid3>0&&userPanel.UserPanel.getInstance().open(this.uid3,this.bid,this.group_openid3),e.stopPropagation()},i.setData=function(e){this.bid=e.bid,this.lblName.text=window.hexToDec(e.name),this.hot.text=e.hot;for(var t=0;t<e.protector.length;t++)this.userRank(e.protector[t],t);RES.getResByUrl(e.head_img,this.load_end,this,RES.ResourceItem.TYPE_IMAGE),this.rankValueUI(e.rank)},i.load_end=function(e){this.img_head.source=e},i.userRank=function(e,t){var a=this;switch(t){case 0:this.uid1=e.user_id,this.group_openid1=e.group_openid,RES.getResByUrl(e.user_pic,function(e){a.img_icon1.source=e},this,RES.ResourceItem.TYPE_IMAGE);break;case 1:this.uid2=e.user_id,this.group_openid2=e.group_openid,RES.getResByUrl(e.user_pic,function(e){a.img_icon2.source=e},this,RES.ResourceItem.TYPE_IMAGE);break;case 2:this.uid3=e.user_id,this.group_openid3=e.group_openid,RES.getResByUrl(e.user_pic,function(e){a.img_icon3.source=e},this,RES.ResourceItem.TYPE_IMAGE)}},i.openUserPanel=function(e){var t=e.currentTarget;userPanel.UserPanel.getInstance().open(t.data.user_id,this.bid,"0")},i.rankValueUI=function(e){this.lable_rankNumber.text=e+"",100>e?this.lable_rankNumber.size=36:e>=100?this.lable_rankNumber.size=30:e>=1e3&&(this.lable_rankNumber.size=26)},i.clear=function(){this.img_icon1.source=null,this.img_icon2.source=null,this.img_icon3.source=null,this.img_head.source=null,this.uid1=0,this.uid2=0,this.uid3=0},t.cacheDict={},t}(eui.Component);e.RankStarItem=t,egret.registerClass(t,"rankStar.RankStarItem")}(rankStar||(rankStar={}));var rankStar;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(){this.loaded?this.init():this.loading()},n.init=function(){this.rankStarUI||(this.rankStarUI=new e.RankStarUI),this.BottomUIStage.addChild(this.rankStarUI);var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+GameApp.Manager.dataManager.bid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/starRank",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,sign:t},function(e){this.initUI(e.data.list,e.data.self),console.log(e)},!0,this)},n.initUI=function(e,t){this.rankStarUI.setData(e,t)},n.hide=function(){this.rankStarUI.parent&&(this.rankStarUI.parent.removeChild(this.rankStarUI),this.rankStarUI.clear())},n.loading=function(){this.init()},n.load_end=function(){this.init(),this.loaded=!0},a}(common.BaseView);e.RankStarManager=t,egret.registerClass(t,"rankStar.RankStarManager")}(rankStar||(rankStar={}));var rankStar;!function(e){var t=function(t){function a(){t.call(this),this.disNum=10,this.index=0,this.arr=[],this.skinName="src/view/gameUI/rankStar/RankStarUISkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.txt1.fontFamily="Heiti SC",this.lable_RankNum.fontFamily="Heiti SC",this.lable_Name.fontFamily="Heiti SC",this.lable_hotNumber.fontFamily="Heiti SC"),this.scroll1.height=egret.MainContext.instance.stage.stageHeight,this.groupButtom.y=egret.MainContext.instance.stage.stageHeight-80,this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.scroll1.addEventListener(eui.UIEvent.CHANGE,this.change,this),this.btn_Fx.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/starRankShare",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,sign:e},function(e){system.Share.share(e,function(e){1==e&&system.TipText.produce().open("发送成功")})},!0,this)},this),this.btn_buLuo.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){location.href="http://buluo.qq.com/p/barindex.html?bid="+GameApp.Manager.dataManager.bid},this),this.btn_pic.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.controllerManager.rankStarController.hide(),GameApp.Manager.controllerManager.uploadController.show()},this)},n.change=function(){if(this.scroll1.viewport&&this.arr.length>0){var e=0==this.index?this.arr[0]:this.arr[this.index*this.disNum-this.disNum],t=(this.index+1)*this.disNum>=this.arr.length?this.arr[this.arr.length-1]:this.arr[(this.index+1)*this.disNum];this.index<this.arr.length/this.disNum-1&&this.scroll1.viewport.scrollV>=t.y-(this.scroll1.height-615)&&(this.index++,this.dis()),this.index>0&&this.scroll1.viewport.scrollV<e.y+615&&(this.index--,this.dis())}},n.dis=function(){for(var e=0==this.index?0:this.index*this.disNum-this.disNum,t=(this.index+1)*this.disNum,a=0;a<this.arr.length;a++){var i=this.arr[a];a>=e&&t>a?this.groupData.addChild(i):i.parent&&i.parent.removeChild(i)}},n.setData=function(t,a){this.scroll1.viewport.scrollV=0,this.index=0,this.groupData.numElements>0&&this.groupData.removeChildren();var i=0;for(i=0;i<t.length;i++){var n=e.RankStarItem.produce();this.groupData.addChild(n),this.arr.push(n),n.y=180*i}for(i=t.length-1;i>=0;i--){var n=this.groupData.getElementAt(i);n.setData(t[i])}this.dis(),this.lable_RankNum.text=window.hexToDec(a.rank),this.lable_Name.text=window.hexToDec(a.name),this.lable_hotNumber.text=window.hexToDec(a.hot),RES.getResByUrl(a.head_img,this.load_end,this,RES.ResourceItem.TYPE_IMAGE);for(var s=a.crowdfunding.length,i=0;s>i;i++){var r=new mainUI.MainZcItem;this.group_ZC.addChild(r),r.setData(a.crowdfunding[i],{head_img:a.head_img})}},n.load_end=function(e){this.img_starIcon.texture=e},n.clear=function(){for(this.scroll1.viewport.scrollV=0,this.arr=[];this.groupData.numElements>0;){var t=this.groupData.getElementAt(this.groupData.numElements-1);e.RankStarItem.reclaim(t),t.parent&&t.parent.removeChild(t)}for(;this.group_ZC.numElements>0;){this.group_ZC.getElementAt(this.group_ZC.numElements-1);this.group_ZC.removeChildren()}},n.close=function(){GameApp.Manager.controllerManager.gameMainController.show(),GameApp.Manager.controllerManager.rankStarController.hide()},a}(eui.Component);e.RankStarUI=t,egret.registerClass(t,"rankStar.RankStarUI")}(rankStar||(rankStar={}));var rankUserContribution;!function(e){var t=function(e){function t(){e.call(this),this.user_id=0,this.skinName="src/view/gameUI/rankUserContribution/RankUserContributionItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){var e=this;this.addChildAt(this.bmpIcon,2),Tools.getInstance().isIphone()&&(this.lblRank.fontFamily="Heiti SC",this.lblName.fontFamily="Heiti SC",this.lblGX.fontFamily="Heiti SC",this.lblIntimate_Title.fontFamily="Heiti SC"),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this),this.btnIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){userPanel.UserPanel.getInstance().open(e.user_id,e.bid,e.group_openid+"")},this)},i.tap=function(e){},i.setData=function(e){switch(this.user_id=e.user_id,e.rank+""){case"1":case"2":case"3":this.lblRank.visible=!1,this.bmpRank.visible=!0,this.bmpRank.source="p1_gxicon"+e.rank;break;default:this.lblRank.visible=!0,this.bmpRank.visible=!1,this.lblRank.text=""+e.rank}this.lblName.text=""+window.hexToDec(e.user_name),this.lblGX.textFlow=(new egret.HtmlTextParser).parser("本月贡献 <font color=#EDBE28>"+e.contribution+"</font>");for(var t=0,a=0;a<this.lblName.text.length;a++){var i=this.lblName.text.charCodeAt(a);t+=i>=0&&128>=i?1:2}this.groupLevel.x=this.lblName.x+15*t+10,this.bmpTitleBack.source=data.DataManager.getintimateIcon(e.intimate_level),this.lblIntimate_Title.text=data.DataManager.getintimateLevel(e.intimate_level)+"",RES.getResByUrl(e.user_pic,this.load_end,this,RES.ResourceItem.TYPE_IMAGE)},i.load_end=function(e){this.bmpIcon.source=e},i.clear=function(){},t.cacheDict={},t}(eui.Component);e.RankUserContributionItem=t,egret.registerClass(t,"rankUserContribution.RankUserContributionItem")}(rankUserContribution||(rankUserContribution={}));var rankUserContribution;!function(e){var t=function(e){function t(){e.call(this),this.user_id=0,this.skinName="src/view/gameUI/rankUserContribution/RankUserContributionItem1Skin.exml"
}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){this.addChildAt(this.bmpIcon,2),Tools.getInstance().isIphone()&&(this.lblRank.fontFamily="Heiti SC",this.lblName.fontFamily="Heiti SC",this.lblGX.fontFamily="Heiti SC",this.lblIntimate_Title.fontFamily="Heiti SC")},i.setData=function(e){switch(this.user_id=e.user_id,e.rank+""){case"1":case"2":case"3":this.lblRank.visible=!1,this.bmpRank.visible=!0,this.bmpRank.source="p1_gxicon"+e.rank;break;default:this.lblRank.visible=!0,this.bmpRank.visible=!1,this.lblRank.text=""+e.rank}this.lblName.text=""+window.hexToDec(e.user_name),this.lblGX.textFlow=(new egret.HtmlTextParser).parser("今日贡献 <font color=#ffffff>"+e.contribution+"</font>");for(var t=0,a=0;a<this.lblName.text.length;a++){var i=this.lblName.text.charCodeAt(a);t+=i>=0&&128>=i?1:2}this.groupLevel.x=this.lblName.x+16*t+10,this.bmpTitleBack.source=data.DataManager.getintimateIcon(e.intimate_level),this.lblIntimate_Title.text=data.DataManager.getintimateLevel(e.intimate_level)+"",RES.getResByUrl(e.user_pic,this.load_end,this,RES.ResourceItem.TYPE_IMAGE)},i.load_end=function(e){this.bmpIcon.source=e},i.clear=function(){},t.cacheDict={},t}(eui.Component);e.RankUserContributionItem1=t,egret.registerClass(t,"rankUserContribution.RankUserContributionItem1")}(rankUserContribution||(rankUserContribution={}));var rankUserContribution;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.type=0,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(e,t){this.bid=e,this.group_openid=t,this.loaded?this.init():this.loading()},n.init=function(){this.rankUserContributionUI||(this.rankUserContributionUI=new e.RankUserContributionUI),this.BottomUIStage.addChild(this.rankUserContributionUI),this.rankUserContributionUI.bid=this.bid,this.rankUserContributionUI.group_openid=this.group_openid;var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+this.bid+this.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getGroupUserContributionRankList",{user_id:GameApp.Manager.dataManager.uid,bid:this.bid,group_openid:this.group_openid,index:0,sign:t},function(e){1==e.st&&this.initUI(e)},!0,this)},n.initUI=function(e){this.rankUserContributionUI.setData(e)},n.hide=function(){this.rankUserContributionUI&&(this.rankUserContributionUI.parent.removeChild(this.rankUserContributionUI),this.rankUserContributionUI.clear())},n.loading=function(){this.init()},n.load_end=function(){this.init(),this.loaded=!0},a}(common.BaseView);e.RankUserContributionManager=t,egret.registerClass(t,"rankUserContribution.RankUserContributionManager")}(rankUserContribution||(rankUserContribution={}));var rankUserContribution;!function(e){var t=function(t){function a(){t.call(this),this.gxrankArr=[],this.gxrank1Arr=[],this.currentGroup=0,this.disNum=10,this.index=0,this.arr=[],this.send=!1,this.skinName="src/view/gameUI/rankUserContribution/RankUserContributionUISkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.txt1.fontFamily="Heiti SC"),this.scroll1.height=egret.MainContext.instance.stage.stageHeight-100,this.groupBottom.y=egret.MainContext.instance.stage.stageHeight-152,this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.scroll1.addEventListener(eui.UIEvent.CHANGE,this.change,this)},n.change=function(){if(this.scroll1.viewport&&this.arr.length>0){var e=0==this.index?this.arr[0]:this.arr[this.index*this.disNum-this.disNum],t=(this.index+1)*this.disNum>=this.arr.length?this.arr[this.arr.length-1]:this.arr[(this.index+1)*this.disNum];console.log(this.scroll1.viewport.scrollV+" "+e.y+" "+(t.y-this.scroll1.height)),this.scroll1.viewport.scrollV>=t.y-this.scroll1.height&&(this.index<this.arr.length/this.disNum-1?(this.index++,this.dis()):this.ajaxPost()),this.scroll1.viewport.scrollV<e.y&&this.index>0&&(this.index--,this.dis())}},n.ajaxPost=function(){if(!this.send){this.send=!0;var e=this;this.currentGroup++;var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+this.bid+this.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getGroupUserContributionRankList",{user_id:GameApp.Manager.dataManager.uid,bid:this.bid,group_openid:this.group_openid,index:this.currentGroup,sign:t},function(t){e.send=!1,1==t.st&&e.add(t)},!0,this)}},n.dis=function(){var e=0==this.index?0:this.index*this.disNum-this.disNum,t=(this.index+1)*this.disNum;console.log("index:"+this.index+" 显示 min:"+e+" max:"+t);for(var a=0;a<this.arr.length;a++){var i=this.arr[a];a>=e&&t>a?(this.groupData.addChild(i),console.log("add"+a)):i.parent&&(i.parent.removeChild(i),console.log("删除"+a))}},n.setData=function(e){e.data;this.add(e)},n.add=function(t){var a=t.data;console.log("add:",a);for(var i=this.arr.length,n=0;n<a.list.length;n++){var s=a.list[n],r=e.RankUserContributionItem.produce();this.groupData.addChild(r),r.y=125*i+125*n,r.bid=this.bid,r.group_openid=this.group_openid,r.setData(s),this.arr.push(r),this.gxrankArr.push(r)}this.dis()},n.clear=function(){for(this.arr=[];this.gxrankArr.length>0;){var t=this.gxrankArr.pop();e.RankUserContributionItem.reclaim(t),t.parent&&t.parent.removeChild(t)}this.gxrankArr=[]},n.close=function(){GameApp.Manager.controllerManager.rankGroupContributionController.show(-1),GameApp.Manager.controllerManager.rankuserContributionController.hide()},a}(eui.Component);e.RankUserContributionUI=t,egret.registerClass(t,"rankUserContribution.RankUserContributionUI")}(rankUserContribution||(rankUserContribution={}));var starfanstv;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(){this.loaded?this.init():this.loading()},n.init=function(){socketio.IoConnect.getInstance().initPomelo("0",GameApp.Manager.dataManager.uid),this.starFanTVUI||(this.starFanTVUI=new e.StarFansTVUI),this.BottomUIStage.addChild(this.starFanTVUI);var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+GameApp.Manager.dataManager.bid_save+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getVideosList",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid_save,sign:t},function(e){1==e.st&&this.initUI(e.video_list)},!0,this)},n.initUI=function(e){this.starFanTVUI.setData(e)},n.hide=function(){this.starFanTVUI&&(this.starFanTVUI.parent.removeChild(this.starFanTVUI),this.starFanTVUI.clear(),socketio.IoConnect.getInstance().disconnect())},n.hideSerach=function(){this.starFanTVUI&&(this.starFanTVUI.parent.removeChild(this.starFanTVUI),this.starFanTVUI.clear())},n.loading=function(){this.init()},n.load_end=function(){this.init(),this.loaded=!0},a}(common.BaseView);e.StarFansTVManager=t,egret.registerClass(t,"starfanstv.StarFansTVManager")}(starfanstv||(starfanstv={}));var starfanstv;!function(e){var t=function(t){function a(){t.call(this),this.bo=!1,this.skinName="src/view/gameUI/starfanstv/StarFansTVUISkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.txt1.fontFamily="Heiti SC"),this.scroll1.height=this.stage.stageHeight-120,this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},n.setData=function(t){if(!this.bo){this.bo=!0;for(var a in t){var i=new e.StarFanTVItem;this.groupData.addChild(i),i.setData(t[a])}}},n.clear=function(){},n.close=function(){GameApp.Manager.controllerManager.gameMainController.show(),GameApp.Manager.controllerManager.starFansTVController.hide()},a}(eui.Component);e.StarFansTVUI=t,egret.registerClass(t,"starfanstv.StarFansTVUI")}(starfanstv||(starfanstv={}));var starfanstv;!function(e){var t=function(e){function t(){e.call(this),this.TVid="",this.skinName="src/view/gameUI/starfanstv/StarFansTVItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblTime.fontFamily="Heiti SC",this.lblTitle.fontFamily="Heiti SC")},i.createVideo=function(){this.video=new egret.Video,this.video.x=0,this.video.y=0,this.video.width=750,this.video.height=300,this.video.fullscreen=!1,this.addChildAt(this.video,0),this.video.load(this.obj.video),this.video.once(egret.Event.COMPLETE,this.onLoad,this),this.video.once(egret.IOErrorEvent.IO_ERROR,this.onLoadErr,this)},i.setData=function(e){this.obj=e,this.TVid=e.id,this.lblTime.text=Tools.getInstance().formatTime3(e.time),this.lblTitle.text=window.hexToDec(e.title),RES.getResByUrl(e.front_cover,this.load_end,this,RES.ResourceItem.TYPE_IMAGE),this.createVideo()},i.load_end=function(e){this.bmpBack.source=e},i.onLoad=function(e){this.btnPlay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.play,this)},i.onLoadErr=function(e){console.log("video load error happened")},i.play=function(e){this.video.position=0,this.video.play()},t}(eui.Component);e.StarFanTVItem=t,egret.registerClass(t,"starfanstv.StarFanTVItem")}(starfanstv||(starfanstv={}));var starPage;!function(e){var t=function(e){function t(){e.call(this),this.bid="",this.skinName="src/view/gameUI/starPage/StarPageItemSkin.exml",this.bmpIocn=new module.BaseCircleImage}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblName.fontFamily="Heiti SC",this.lblNum.fontFamily="Heiti SC",this.lblrz.fontFamily="Heiti SC"),this.addChild(this.bmpIocn),this.bmpIocn.x=41,this.bmpIocn.y=32,this.bmpIocn.touchEnabled=!1},i.init_tap=function(){GameApp.Manager.dataManager.bid=this.bid,this.getUrlAttribute("is_owner"),GameApp.Manager.viewManager.maskStage(.4),GameApp.Manager.dataManager.is_owner?aler.AlertPanel.getInstance().show("温馨提示","本群只有一次选择机会，确认入驻？","取消","确认",function(e){"ok"==e&&GameApp.Manager.viewManager.gameMainManager.joinStar(function(){GameApp.Manager.dataManager.topEnter=2,GameApp.Manager.viewManager.starPageManager.hide(),GameApp.Manager.controllerManager.start()}),GameApp.Manager.viewManager.clearMask()}):aler.AlertPanel.getInstance().show("温馨提示","只有群主才能入住哦，赶快呼唤群主吧","取消","确认",function(e){"ok"==e&&GameApp.Manager.viewManager.gameMainManager.joinStar(function(){}),GameApp.Manager.viewManager.clearMask()})},i.getUrlAttribute=function(e){var t,a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(a);null!=i&&(t=i[2]),a=null,i=null,null==t||""==t||"undefined"==t?t="":t,"1"==t?GameApp.Manager.dataManager.is_owner=!0:GameApp.Manager.dataManager.is_owner=!1},i.setData=function(e){e.recommend?this.rect.fillColor=14611963:this.rect.fillColor=16053492,this.bmpIocn.setData(e.head_img,143),this.lblName.text=window.hexToDec(e.name),this.lblNum.text=e.group_num+"个群已入驻",this.bid=e.bid},t}(eui.Component);e.StarPageItem=t,egret.registerClass(t,"starPage.StarPageItem")}(starPage||(starPage={}));var starPage;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(e){this.reset=e,this.loaded?this.initUI():this.loading()},n.initUI=function(){var t=this;if(this.starPageUI||(this.starPageUI=new e.StarPageUI),this.BottomUIStage.addChild(this.starPageUI),1==this.reset){console.log("1");var a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/starsChoosePage",{user_id:GameApp.Manager.dataManager.uid,group_openid:GameApp.Manager.dataManager.group_openid,reset:this.reset,sign:a},function(e){2==e.st?(GameApp.Manager.dataManager.reset=1,GameApp.Manager.dataManager.bid=e.bid,GameApp.Manager.viewManager.starPageManager.hide(),GameApp.Manager.controllerManager.start()):(GameApp.Manager.dataManager.reset=1,this.setData(e))},!0,t)}else{console.log("0");var a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/starsChoosePage",{user_id:GameApp.Manager.dataManager.uid,group_openid:GameApp.Manager.dataManager.group_openid,sign:a},function(e){2==e.st?(GameApp.Manager.dataManager.bid=e.bid,GameApp.Manager.viewManager.starPageManager.hide(),GameApp.Manager.controllerManager.start()):this.setData(e)},!0,t)}},n.setData=function(e){this.starPageUI.setData(e)},n.hide=function(){this.starPageUI.parent&&(this.BottomUIStage.removeChild(this.starPageUI),this.starPageUI.clear())},n.loading=function(){GameApp.Manager.controllerManager.loader.moduleLoading(["starpage"],this.load_end,this)},n.load_end=function(){this.loaded=!0,this.initUI()},a}(common.BaseView);e.StarPageManager=t,egret.registerClass(t,"starPage.StarPageManager")}(starPage||(starPage={}));var starPage;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/starPage/StarPageTipSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){var e=this;Tools.getInstance().isIphone()&&(this.lbl0.fontFamily="Heiti SC",this.lblStarName.fontFamily="Heiti SC"),this.lblStarName.addEventListener(egret.FocusEvent.FOCUS_IN,function(){"请输入明星姓名或组合全称"==e.lblStarName.text&&(e.lblStarName.text="",e.lblStarName.textColor=1358070)},this),this.lblStarName.addEventListener(egret.FocusEvent.FOCUS_OUT,function(){""==e.lblStarName.text&&(e.lblStarName.text="请输入明星姓名或组合全称",e.lblStarName.textColor=12375519),this.btn_tap()},this)},i.btn_tap=function(){console.log("starpagetipserach"+this.lblStarName.text),""!=this.lblStarName.text&&"请输入明星姓名或组合全称"!=this.lblStarName.text&&(GameApp.Manager.controllerManager.newStarController.showSerach(this.lblStarName.text),GameApp.Manager.viewManager.starPageManager.hide())},i.clear=function(){this.lblStarName.textColor=12375519,this.lblStarName.text="请输入明星姓名或组合全称"},t}(eui.Component);e.StarPageTip=t,egret.registerClass(t,"starPage.StarPageTip")}(starPage||(starPage={}));var starPage;!function(e){var t=function(t){function a(){t.call(this),this.bo=!1,this.index=0,this.arr=[],this.skinName="src/view/gameUI/starPage/StarPageUISkin.exml",this.btnSend=new e.StarPageTip}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lbl1.fontFamily="Heiti SC",this.lbl2.fontFamily="Heiti SC"),this.scroll1.height=egret.MainContext.instance.stage.stageHeight-160,this.btnSerach.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.controllerManager.newStarController.showSerach(),GameApp.Manager.viewManager.starPageManager.hide()},this),this.scroll1.addEventListener(eui.UIEvent.CHANGE,this.change,this)},n.change=function(){var e=0==this.index?this.arr[0]:this.arr[9*this.index-9],t=9*(this.index+1)>=this.arr.length?this.arr[this.arr.length-1]:this.arr[9*(this.index+1)];this.index<this.arr.length/9-1&&this.scroll1.viewport.scrollV>=t.y-this.scroll1.height&&(this.index++,this.dis()),this.index>0&&this.scroll1.viewport.scrollV<e.y&&(this.index--,this.dis())},n.setData=function(t){if(!this.bo){this.bo=!0,this.index=0;var a=t.stars_list,i=0,n=0;for(var s in a){var r=new e.StarPageItem;this.groupData.addChild(r),r.x=20+n%3*243,r.y=390*i,n++,n%3==0&&i++,r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.headTap,this),this.arr.push(r)}for(var o=a.length-1;o>=0;o--){var r=this.groupData.getElementAt(o);r.setData(a[o])}this.btnSend.y=this.groupData.getElementAt(this.groupData.numElements-1).y+390+50,this.btnSend.x=0,this.groupData.addChild(this.btnSend),this.dis()}},n.dis=function(){var e=0==this.index?0:9*this.index-9,t=9*(this.index+1);console.log("index:"+this.index+" 显示 min:"+e+" max:"+t);for(var a=0;a<this.arr.length;a++){var i=this.arr[a];a>=e&&t>a?this.groupData.addChild(i):i.parent&&i.parent.removeChild(i)}},n.headTap=function(e){var t=e.currentTarget;GameApp.Manager.dataManager.bid=t.bid,console.log("选择:"+t.bid),GameApp.Manager.dataManager.topEnter=2,GameApp.Manager.viewManager.starPageManager.hide(),GameApp.Manager.controllerManager.start()},n.clear=function(){this.btnSend.clear()},a}(eui.Component);e.StarPageUI=t,egret.registerClass(t,"starPage.StarPageUI")}(starPage||(starPage={}));var sweepsTasks;!function(e){var t=function(e){function t(){e.call(this),this.isRotate=!0,this.turnplate=8,this.skinName="src/view/gameUI/sweepsTasks/SweepsTasksSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lb1.fontFamily="Heiti SC",this.lb2.fontFamily="Heiti SC",this.lb3.fontFamily="Heiti SC",this.lb4.fontFamily="Heiti SC",this.lb5.fontFamily="Heiti SC",this.lb6.fontFamily="Heiti SC"),this.img_sweeps.anchorOffsetX=this.img_sweeps.width/2,this.img_sweeps.anchorOffsetY=this.img_sweeps.height/2,this.btn_arrow.anchorOffsetX=this.btn_arrow.width/2,this.btn_arrow.anchorOffsetY=this.btn_arrow.height/2,this.group_resultBg.anchorOffsetX=this.group_resultBg.width/2,this.group_resultBg.anchorOffsetY=this.group_resultBg.height/2,this.img_sweeps.x=(this.stage.stageWidth-this.img_sweeps.width)/2+this.img_sweeps.anchorOffsetX,this.img_sweeps.y=(this.stage.stageHeight-this.img_sweeps.height)/2+this.img_sweeps.anchorOffsetY,this.btn_arrow.x=(this.stage.stageWidth-this.btn_arrow.width)/2+this.btn_arrow.anchorOffsetX,this.btn_arrow.y=(this.stage.stageHeight-this.btn_arrow.height)/2+this.btn_arrow.anchorOffsetY-31,this.group_resultBg.x=(this.stage.stageWidth-this.group_resultBg.width)/2+this.group_resultBg.anchorOffsetX,this.group_resultBg.y=(this.stage.stageHeight-this.group_resultBg.height)/2+this.group_resultBg.anchorOffsetY,this.group_share.y=this.stage.stageHeight-150,this.btn_arrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.runRotate,this),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.rect_btn_sure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sure,this),this.btn_share.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/shareTimeLimitedActivity",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,count:this.iconCount,sign:e},function(e){system.Share.share(e,function(e){1==e&&system.TipText.produce().open("发送成功")})},!0,this)},this)},i.runRotate=function(e){var t=this;if(t.isRotate){var a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/joinTimeLimitedActivity",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,sign:a},function(e){if(t.isRotate=!1,1==e.st)if(e.data.use_free||e.data.lucky_star_enough){var a=t.changeId(e.data.reward_id).tempId*(360/t.turnplate)-360/(2*t.turnplate);a=270>=a?270-a-22.5:360-a+270-22.5,e.data.result.lucky_star&&(GameApp.Manager.dataManager.lucystar=e.data.result.lucky_star),e.data.result.hot&&(GameApp.Manager.dataManager.hot=e.data.result.hot),GameApp.Manager.dataManager.time_limited_activity_free=!1,egret.Tween.get(t.img_sweeps).to({rotation:a+3600},5e3,egret.Ease.sineInOut).wait(400).call(function(){egret.Tween.removeTweens(t.img_sweeps),3==t.changeId(e.data.reward_id).tempId?t.img_result_top.visible=!1:t.img_result_top.visible=!0,t.group_result.visible=!0,t.group_free.visible=!1,t.group_diamond.visible=!0,t.lb4.text=t.changeId(e.data.reward_id).title,t.lb5.text=t.changeId(e.data.reward_id).QQ},this)}else e.data.lucky_star_enough||(t.isRotate=!0,aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.sweepsTasksController.hide,0)},this));else-1==e.st&&(t.isRotate=!0,aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.sweepsTasksController.hide,0)},this))},!0,t)}},i.changeId=function(e){var t,a,i;switch(e){case 1:t=3,a="很遗憾未中奖，再接再厉哦！",i="";break;case 2:t=8,a="恭喜，您为明星贡献了5热度！",i="";break;case 3:t=4,a="恭喜，您获得了5钻石！",i="";break;case 4:t=7,a="恭喜，您获得了10钻石！",i="";break;case 5:t=2,a="恭喜，您为明星贡献了20热度！",i="";break;case 6:t=5,a="恭喜，您为明星贡献了50热度！",i="";break;case 7:t=1,a="恭喜，您获得了50钻石！",i="";break;case 8:t=6,a="恭喜，您获得了珍贵的粉丝团周边1个，请与粉丝团客服联系兑奖。",i="客服:3409474914"}return{tempId:t,title:a,QQ:i}},i.close=function(e){this.isRotate=!0,GameApp.Manager.controllerManager.sweepsTasksController.hide(),GameApp.Manager.controllerManager.gameMainController.show()},i.sure=function(e){this.group_result.visible=!1,this.img_result_top.visible=!1,this.isRotate=!0,this.lb4.text="",this.lb5.text=""},i.setData=function(){GameApp.Manager.dataManager.time_limited_activity_free?(this.group_free.visible=!0,this.group_diamond.visible=!1):(this.group_diamond.visible=!0,this.group_free.visible=!1)},i.clear=function(){this.group_free.visible=!1,this.group_diamond.visible=!1,this.img_sweeps.rotation=0,egret.Tween.removeTweens(this.img_sweeps)},t}(eui.Component);e.SweepsTasks=t,egret.registerClass(t,"sweepsTasks.SweepsTasks")}(sweepsTasks||(sweepsTasks={}));var sweepsTasks;!function(e){var t=function(t){function a(e){t.call(this,e),this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(){this.initUI()},n.initUI=function(){var t=this;this.sweepsTasks||(this.sweepsTasks=new e.SweepsTasks),t.sweepsTasks.setData(),this.BottomUIStage.addChild(this.sweepsTasks)},n.hide=function(){this.sweepsTasks.parent&&(this.BottomUIStage.removeChild(this.sweepsTasks),this.sweepsTasks.clear())},a}(common.BaseView);e.SweepsTasksManager=t,egret.registerClass(t,"sweepsTasks.SweepsTasksManager")}(sweepsTasks||(sweepsTasks={}));var system;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.join=function(e){var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+GameApp.Manager.dataManager.group_openid+e+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/joinGroup",{user_id:GameApp.Manager.dataManager.uid,group_openid:GameApp.Manager.dataManager.group_openid,target_group_openid:e,sign:t},function(e){1==e.st&&window.openGroup.join({appid:e.appid,openid:e.openid,openkey:e.openkey,source_group_openid:e.source_group_openid,group_openid:e.group_openid})},!0,this)},e}();e.GroupJoin=t,egret.registerClass(t,"system.GroupJoin")}(system||(system={}));var system;!function(e){var t=function(t){function a(){t.call(this),this.nt=0,this.nindex=1,this.maxt=0,this.skinName="src/view/gameUI/system/GroupRewardSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},n.childrenCreated=function(){Tools.getInstance().isIphone()?(this.lbl1.fontFamily="Heiti SC",this.lbl2.fontFamily="Heiti SC",this.lbl3.fontFamily="Heiti SC",this.lbl4.fontFamily="Heiti SC",this.lbl5.fontFamily="Heiti SC",this.lbl6.fontFamily="Heiti SC",this.lbl7.fontFamily="Heiti SC",this.lbl8.fontFamily="Heiti SC",this.lbl9.fontFamily="Heiti SC",this.lbl10.fontFamily="Heiti SC",this.lable_RechargeCord.fontFamily="Heiti SC",this.group1.visible=!1,this.lbl9.visible=!0):(this.lbl9.visible=!1,this.group1.visible=!0),this.group2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.lingqu,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.group1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.GroupJoin.join("2970C88E2D2E0EDE54E8D57E14268B03")},this)},n.close=function(){egret.Ticker.getInstance().unregister(this.tx,this),GameApp.Manager.viewManager.clearMask(),GameApp.Manager.viewManager.TopUIStage.removeChild(this);var e=setTimeout(function(){if(clearTimeout(e),0!=GameApp.Manager.dataManager.buluo){var t="您在部落中有"+GameApp.Manager.dataManager.buluo+"个幸运星，已自动转换为钻石";aler.AlertPanel1.getInstance().show("",t,"",function(){},this)}},300)},n.lingqu=function(){this.group2.visible=!1,this.btn1.visible=!0,e.TipText.produce().open("钻石+"+this.obj.total_reward)},n.show=function(e){if(e&&!this.obj){if(this.obj=e,!e.canReward)return;GameApp.Manager.viewManager.maskStage(.4),GameApp.Manager.viewManager.TopUIStage.addChild(this),this.x=12,this.y=(egret.MainContext.instance.stage.stageHeight-924)/2,this.lbl4.text="每日签到:"+e.sign_count+"人,奖励"+e.sign_reward+"钻,奖励"+e.sign_credits+"点群积分",this.lbl5.text="集结成功:"+e.mass_count+"次,奖励"+e.mass_credits+"点群积分",this.lbl6.text="完成众筹:"+e.crowdfunding_count+"次,奖励"+e.crowdfunding_reward+"钻,奖励"+e.crowdfunding_credits+"点群积分",this.lbl2.text=e.total_reward,this.lable_RechargeCord.text="昨日充值:本群昨日充值"+e.recharge_count+"元,奖励"+e.recharge_credits+"点群积分",e.canReward?(this.group2.visible=!0,this.btn1.visible=!1):(this.group2.visible=!1,this.btn1.visible=!0),egret.Ticker.getInstance().register(this.tx,this),this.bmpTX.source="p1_jltx1",this.maxt=1e3}},n.tx=function(e){this.nt+=e,this.nt>=this.maxt&&(this.nt=0,this.nindex++,this.bmpTX.source="p1_jltx"+this.nindex,7==this.nindex?(this.nindex=0,this.maxt=3e3):this.maxt=100)},a}(eui.Component);e.GroupReward=t,egret.registerClass(t,"system.GroupReward")}(system||(system={}));var system;!function(e){var t=function(e){function t(){e.call(this)}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e){void 0===e&&(e="1"),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var a,i=t.cacheDict[e];return a=i.length>0?i.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.setData=function(e){"hand"==e&&(this.source="p1_parseLiang"),"yuan"==e&&(this.source="j_imgButton")},i.clear=function(){this.source=null,this.alpha=1},t.cacheDict={},t}(eui.Image);e.Image1=t,egret.registerClass(t,"system.Image1")}(system||(system={}));var notice;!function(e){var t=function(e){function t(){e.call(this),this.init(),this.touchEnabled=!1,this.touchChildren=!1}__extends(t,e);var a=(__define,t),i=a.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},i.init=function(){this.bmpBack=new eui.Rect,this.bmpBack.width=750,this.bmpBack.height=140,this.bmpBack.fillColor=0,this.bmpBack.alpha=.5,this.addChild(this.bmpBack),this.group1=new eui.Group,this.bmpIcon=new module.BaseCircleImage,this.bmpIcon.y=20,this.group1.addChild(this.bmpIcon),this.lblText=new eui.Label,Tools.getInstance().isIphone()?this.lblText.fontFamily="Heiti SC":this.lblText.fontFamily="黑体",this.lblText.size=40,this.lblText.x=100,this.lblText.y=46,this.lblText.textColor=16777215,this.group1.addChild(this.lblText),this.group1.x=750,this.addChild(this.group1)},i.setData=function(e){console.log("进入公告",e,"3333333"),this.parent||(GameApp.Manager.stage.addChild(this),console.log("添加公告"));var t="";switch(e.type){case 1:t="<font color=#ffcc00>"+window.hexToDec(e.user_name)+"</font>发放真爱红包，大家快抢吧！",this.bmpIcon.setData(e.user_pic,92,0,0,2);break;case 2:t="Q群[<font color=#ffcc00>"+window.hexToDec(e.group_name)+"</font>]成功入驻"+GameApp.Manager.dataManager.star_name+"的超级粉丝团，发放红包福利！",this.bmpIcon.setData(e.group_face,92,0,0,2);break;case 3:t="Q群[<font color=#ffcc00>"+window.hexToDec(e.group_name)+"</font>]众筹礼物成功,为"+GameApp.Manager.dataManager.star_name+"送出[<font color=#ff0000>"+window.hexToDec(e.crowdfunding_name)+"</font>]",this.bmpIcon.setData(e.group_face,92,0,0,2);break;case 4:t="Q群[<font color=#ffcc00>"+window.hexToDec(e.group_name)+"</font>]为"+GameApp.Manager.dataManager.star_name+"集结成功!展现了强大的粉丝实力!",this.bmpIcon.setData(e.group_face,92,0,0,2)}this.lblText.textFlow=(new egret.HtmlTextParser).parser(t),this.move()},i.move=function(){this.group1.x=750,egret.Tween.removeTweens(this.group1),egret.Tween.get(this.group1).to({x:-(this.lblText.textWidth+this.lblText.x)},1e4).call(function(){this.end()},this)},i.end=function(){this.parent&&GameApp.Manager.stage.removeChild(this),this.group1.x=750,this.lblText.text="",this.bmpIcon.clear()},t}(eui.Group);e.Notice=t,egret.registerClass(t,"notice.Notice")}(notice||(notice={}));var Publish;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/system/Publish/NewPublishSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lb1.fontFamily="Heiti SC",this.lb2.fontFamily="Heiti SC",this.lb3.fontFamily="Heiti SC"),this.Part1=new e.Part1,this.Part1.x=0,this.Part1.y=0,this.groupData.addChild(this.Part1),this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=this;e.parent&&e.parent.removeChild(e)},this),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=this;e.parent&&e.parent.removeChild(e)},this)},n.setData=function(){},a}(eui.Component);e.NewPublish=t,egret.registerClass(t,"Publish.NewPublish")}(Publish||(Publish={}));var Publish;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/system/Publish/part1Skin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lb0.fontFamily="Heiti SC",this.lb1.fontFamily="Heiti SC",this.lb2.fontFamily="Heiti SC",this.lb3.fontFamily="Heiti SC",this.lb4.fontFamily="Heiti SC",this.lb5.fontFamily="Heiti SC",this.lb6.fontFamily="Heiti SC",this.lb7.fontFamily="Heiti SC",this.lb8.fontFamily="Heiti SC",this.lb10.fontFamily="Heiti SC",this.lb12.fontFamily="Heiti SC",this.lb13.fontFamily="Heiti SC")},t}(eui.Component);e.Part1=t,egret.registerClass(t,"Publish.Part1")}(Publish||(Publish={}));var system;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.share=function(e,t){window.openGroup.share({appid:e.appid,openid:e.openid,group_openid:e.group_openid,title:e.title,desc:e.desc,share_url:e.share_url,image_url:e.image_url,debug:e.debug,onSuccess:function(){t.call(this,1),console.log("success",arguments)},onCancel:function(){t.call(this,2),console.log("cancel",arguments)},onError:function(){var e="";for(var a in arguments)e+="key: "+a+":"+arguments[a];t.call(this,3),console.log("error",e)}})},e}();e.Share=t,egret.registerClass(t,"system.Share")}(system||(system={}));var system;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/system/TipTextSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC")},i.open=function(e,t,a){void 0===t&&(t=500),void 0===a&&(a=500),GameApp.Manager.viewManager.TopUIStage.addChild(this),this.lblText.text=e,this.x=178,this.y=500,this.alpha=1,egret.Tween.get(this).wait(t).to({y:400,alpha:0},a).call(function(){this.close()},this)},i.close=function(){t.reclaim(this)},i.clear=function(){this.lblText.text="",this.parent.removeChild(this)},t.cacheDict={},t}(eui.Component);e.TipText=t,egret.registerClass(t,"system.TipText")}(system||(system={}));var system;!function(e){var t=function(e){function t(){e.call(this),this._size=24,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.init,this)}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e){void 0===e&&(e="1"),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var a,i=t.cacheDict[e];return a=i.length>0?i.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.init=function(){Tools.getInstance().isIphone()?this.fontFamily="Heiti SC":this.fontFamily="Heiti"
},i.setData=function(e,t,a){void 0===t&&(t=24),void 0===a&&(a=16777215),this.size=t,this.textColor=a,this.text=e},i.clear=function(){this.text="",this.alpha=1},t.cacheDict={},t}(eui.Label);e.TipText1=t,egret.registerClass(t,"system.TipText1")}(system||(system={}));var TopScreenOfGroupRank;!function(e){var t=function(t){function a(){t.call(this),this.scHeight=0,this.arr=[],this.disNum=10,this.skinName="src/view/gameUI/system/TopScreenOfGroupRank/TopGroupRankSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_focusTitlt.fontFamily="Heiti SC",this.lable_workTitle.fontFamily="Heiti SC",this.lable_myStar.fontFamily="Heiti SC",this.lable_starName.fontFamily="Heiti SC",this.lable_hot.fontFamily="Heiti SC",this.lable_RankStar.fontFamily="Heiti SC",this.lable_go.fontFamily="Heiti SC",this.lable_focusTitlt0.fontFamily="Heiti SC",this.lable_workTitle0.fontFamily="Heiti SC"),this.scro1.height=this.stage.stageHeight,this.scro1.addEventListener(eui.UIEvent.CHANGE,this.change,this),this.group_comeToMyStar.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.controllerManager.topGroupRankController.hide()},this),this.group_top.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.controllerManager.headLinesController.show(1,0,3),GameApp.Manager.controllerManager.topGroupRankController.hide()},this)},n.setData=function(t){RES.getResByUrl(t.headlineData.poster,this.setHeadLine,this,RES.ResourceItem.TYPE_IMAGE),this.lable_workTitle.text=window.hexToDec(t.headlineData.title),this.lable_workTitle0.text=window.hexToDec(t.headlineData.title),console.log(this.group_top.height,"heigth"),RES.getResByUrl(t.selfStarData.head_img,this.setIconImg,this,RES.ResourceItem.TYPE_IMAGE),this.lable_starName.text=window.hexToDec(t.selfStarData.star_name),this.lable_hot.text=window.hexToDec(t.selfStarData.hot),this.index=0,1==t.selfStarData.rank?this.img_rankIMg.source="fistpag_1":2==t.selfStarData.rank?this.img_rankIMg.source="fistpag_2":3==t.selfStarData.rank?this.img_rankIMg.source="fistpag_3":this.img_rankIMg.source="fistpag_4",t.selfStarData.rank>=10&&(this.lable_rankNumber.size=24),this.lable_rankNumber.text=t.selfStarData.rank+"",this.scHeight=this.group_top.height+this.group_comeToMyStar.height;for(var a=0;a<t.starRankData.length;a++){var i=(t.starRankData[a],e.TopRank.produce());i.x=0,i.y=a*i.height,this.group_GroupRank.addChild(i),this.arr.push(i)}for(var n=(t.starRankData.length,t.starRankData.length-1);n>=0;n--){var s=this.group_GroupRank.getElementAt(n);s.setData(t.starRankData[n],n+1)}this.dis()},n.change=function(){if(this.scro1.viewport&&this.arr.length>0){var e=0==this.index?this.arr[0]:this.arr[this.index*this.disNum-this.disNum],t=(this.index+1)*this.disNum>=this.arr.length?this.arr[this.arr.length-1]:this.arr[(this.index+1)*this.disNum];this.index<this.arr.length/this.disNum-1&&this.scro1.viewport.scrollV>=t.y-752&&(this.index++,this.dis()),this.index>0&&this.scro1.viewport.scrollV<e.y+752&&(this.index--,this.dis())}},n.dis=function(){for(var e=(0==this.index?0:this.index*this.disNum-this.disNum,(this.index+1)*this.disNum),t=0;t<this.arr.length;t++){var a=this.arr[t];e>t?this.group_GroupRank.addChild(a):a.parent&&a.parent.removeChild(a)}},n.setHeadLine=function(e){this.img_focus.texture=e,this.img_focus.width=750;var t=750/e.textureWidth;this.img_focus.height=e.textureHeight*t},n.setIconImg=function(e){this.img_icon.texture=e},n.clear=function(){for(this.img_focus.source=null,this.img_focus.texture=null,this.img_icon.source=null,this.scro1.viewport.scrollV=0,this.img_rankIMg.source=null,this.arr=[];this.group_GroupRank.numElements>0;){var t=this.group_GroupRank.getElementAt(this.group_GroupRank.numElements-1);e.TopRank.reclaim(t),t.parent&&t.parent.removeChild(t)}},a}(eui.Component);e.TopGroupRank=t,egret.registerClass(t,"TopScreenOfGroupRank.TopGroupRank")}(TopScreenOfGroupRank||(TopScreenOfGroupRank={}));var TopScreenOfGroupRank;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(){this.loaded?this.initUI():this.loading()},n.initUI=function(){var t=this;this.topGroupRank||(this.topGroupRank=new e.TopGroupRank),this.garbageUiStage.addChild(this.topGroupRank);var a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+GameApp.Manager.dataManager.bid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getEnterPage",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,sign:a},function(e){1==e.st&&this.topGroupRank.setData(e.data)},!0,t)},n.hide=function(){this.topGroupRank.parent&&(this.topGroupRank.parent.removeChild(this.topGroupRank),this.topGroupRank.clear())},n.load_end=function(){this.loaded=!0,this.initUI()},n.loading=function(){this.load_end()},a}(common.BaseView);e.TopGroupRankManager=t,egret.registerClass(t,"TopScreenOfGroupRank.TopGroupRankManager")}(TopScreenOfGroupRank||(TopScreenOfGroupRank={}));var TopScreenOfGroupRank;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/system/TopScreenOfGroupRank/TopRankSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_starName.fontFamily="Heiti SC",this.lable_hot.fontFamily="Heiti SC",this.lable_rankNumber.fontFamily="Heiti SC"),this.img_pro.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoFanke,this)},i.gotoFanke=function(e){GameApp.Manager.dataManager.entenVisiter=1,GameApp.Manager.controllerManager.start(this.bid)},i.setData=function(e,t){this.lable_starName.text=window.hexToDec(e.star_name),this.lable_hot.text=window.hexToDec(e.hot),1==e.rank?(this.img_number.source="fistpag_1",this.img_pro.source="fistpag_no1"):2==e.rank?(this.img_number.source="fistpag_2",this.img_pro.source="fistpag_no2"):3==e.rank?(this.img_number.source="fistpag_3",this.img_pro.source="fistpag_no3"):(this.img_number.source="fistpag_4",this.img_pro.source="fistpag_no4"),RES.getResByUrl(e.head_img,this.setIcon,this,RES.ResourceItem.TYPE_IMAGE),this.lable_rankNumber.text=t+"",this.bid=e.bid},i.setIcon=function(e){this.img_ico.texture=e},i.clear=function(){this.img_ico.source=null,this.img_number.source=null,this.img_pro.source=null,this.lable_starName.text="",this.lable_hot.text=""},t.cacheDict={},t}(eui.Component);e.TopRank=t,egret.registerClass(t,"TopScreenOfGroupRank.TopRank")}(TopScreenOfGroupRank||(TopScreenOfGroupRank={}));var aggregation;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/task/aggregation/AggregationIconSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){this.img_personIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){this.userId>0&&userPanel.UserPanel.getInstance().open(this.userId,GameApp.Manager.dataManager.bid_save,GameApp.Manager.dataManager.group_openid),e.stopPropagation()},this)},i.setData=function(e){this.userId=e.user_id,RES.getResByUrl(e.user_pic,this.load_personIcon,this,RES.ResourceItem.TYPE_IMAGE)},i.load_personIcon=function(e){this.img_personIcon.texture=e,this.img_personIcon.width=100,this.img_personIcon.height=100},i.clear=function(){this.img_personIcon.texture=null},t.cacheDict={},t}(eui.Component);e.AggregationIcon=t,egret.registerClass(t,"aggregation.AggregationIcon")}(aggregation||(aggregation={}));var task;!function(e){var t=function(t){function a(){t.call(this),this.type=0,this.task_timeJilu=0,this.timeVar=0,this.isHer=!1,this.skinName="src/view/gameUI/task/aggregation/AggregationIcon1Skin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_time.fontFamily="Heiti SC",this.lable_personCount.fontFamily="Heiti SC",this.lable_contribute.fontFamily="Heiti SC",this.lable_hZQY.fontFamily="Heiti SC",this.lable_jijie.fontFamily="Heiti SC"),this.btn_startJijie.addEventListener(egret.TouchEvent.TOUCH_TAP,this.starJi,this),this.btn_jHZ.addEventListener(egret.TouchEvent.TOUCH_TAP,this.zhqy,this),this.btn_comeBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.comeToHost,this),this.img0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchOneImg,this),this.img1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchtwoImg,this),this.img2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchthreeImg,this),this.img3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchffourImg,this),this.img4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchfiveImg,this),this.img5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchsixImg,this),this.img6.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchsevenImg,this),this.img7.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toucheightImg,this),this.img8.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchfnineImg,this),this.img9.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchtenImg,this),this.lable_contribute.textFlow=(new egret.HtmlTextParser).parser("集结成功，群经验+100,在线玩家<font color= #ff0000 size= 32>+10</font>钻")},n.touchOneImg=function(e){this.changPOs(0),this.updateHostImg(0)},n.touchtwoImg=function(e){this.changPOs(1),this.updateHostImg(1)},n.touchthreeImg=function(e){this.changPOs(2),this.updateHostImg(2)},n.touchffourImg=function(e){this.changPOs(3),this.updateHostImg(3)},n.touchfiveImg=function(e){this.changPOs(4),this.updateHostImg(4)},n.touchsixImg=function(e){this.changPOs(5),this.updateHostImg(5)},n.touchsevenImg=function(e){this.changPOs(6),this.updateHostImg(6)},n.toucheightImg=function(e){this.changPOs(7),this.updateHostImg(7)},n.touchfnineImg=function(e){this.changPOs(8),this.updateHostImg(8)},n.touchtenImg=function(e){this.changPOs(9),this.updateHostImg(9)},n.changPOs=function(e){var t=this.group_icon.getElementAt(e),a=this.getMyselfIcon();this.Myself=a,a.x=t.x,a.y=t.y},n.getMyselfIcon=function(){for(var e=this.group_up.numElements,t=0;e>t;t++){var a=this.group_up.getElementAt(t);if(a.userId==GameApp.Manager.dataManager.uid)return a}},a.setData=function(e){this.Allobj=e,this.img_buttonIcon=e.star_img,a.activeObject()},a.updateChangeValue=function(t){this.Allobj=t,a.activeObject(),this.img_buttonIcon=t.star_img?t.star_img:this.img_buttonIcon,a.isChange&&(a.isChange=!1,GameApp.Manager.viewManager.aggregation.aggregation.upTriceIcon()),GameApp.Manager.viewManager.aggregation.aggregation&&(GameApp.Manager.viewManager.aggregation.aggregation.showAgger(),GameApp.Manager.viewManager.aggregation.aggregation.isHer=!1),e.TaskManager.groupMass()},n.upTriceIcon=function(){if(GameApp.Manager.viewManager.aggregation.aggregation.Myself){this.isHer=!0,console.log("true");for(var e=GameApp.Manager.viewManager.aggregation.aggregation.group_up;e.numElements>0;){var t=e.getElementAt(e.numElements-1);t.userId==this.Myself.userId?e.removeChild(this.Myself):(aggregation.AggregationIcon.reclaim(t),t.parent&&t.parent.removeChild(t))}GameApp.Manager.viewManager.aggregation.aggregation.showAgger()}else GameApp.Manager.viewManager.aggregation.aggregation.showAgger(),console.log("false"),this.isHer=!1},a.activeObject=function(){this.crrentTime=(new Date).getTime(),console.log("type",this.Allobj),this.Allobj.type&&2==this.Allobj.type},n.addUpImg=function(){this.aggregationUp=new aggregation.AggregationIconUp,this.aggregationUp.x=157,this.aggregationUp.y=254,this.addChild(this.aggregationUp)},n.showAgger=function(){var t=this,i=a.Allobj;if(!a.isChange)switch(a.isChange=!0,i.type){case 1:if(this.lable_jijie.visible=!1,this.btn_startJijie.visible=!1,this.lable_time.visible=!0,this.lable_personCount.visible=!0,!i.user_list)return;this.lable_personCount.text="在线人数"+i.user_list.length+"/10";var n=i.user_list.length;n>=9?this.iconCount=9:this.iconCount=n,t.task_timeJilu=(new Date).getTime();var s=i.time-(this.task_timeJilu-a.crrentTime);if(clearInterval(t.timeVar),t.timeVar=setInterval(function(){var e=(new Date).getTime(),a=s-(e-t.task_timeJilu);t.lable_time.text="还差"+Tools.getInstance().formatTime4(a)+"结束",0>=a&&clearInterval(t.timeVar)},980),t.lable_time.text="还差"+Tools.getInstance().formatTime4(s)+"结束",!this.isHer){console.log("false");for(var r=this.aggregationUp.group_iconFM.numElements,o=0;r>o;o++)this.aggregationUp.group_iconFM.getElementAt(o).visible=!0;for(;this.group_up.numElements>0;){var h=this.group_up.getElementAt(this.group_up.numElements-1);aggregation.AggregationIcon.reclaim(h),h.parent&&this.group_up.removeChild(h)}for(var o=0;o<i.user_list.length;o++){var h=aggregation.AggregationIcon.produce();h.x=this.group_icon.getChildAt(o).x,h.y=this.group_icon.getChildAt(o).y,this.group_up.addChild(h),h.Index=o;var l=this.aggregationUp.group_iconFM.getChildAt(o);l.visible=!1,h.setData(i.user_list[o]),i.user_list[o].user_id==GameApp.Manager.dataManager.uid&&(this.Myself=h)}}if(this.isHer){console.log("showAgger  true");for(var r=this.aggregationUp.group_iconFM.numElements,o=0;r>o;o++)this.aggregationUp.group_iconFM.getElementAt(o).visible=!0;for(var o=0,g=0,c=!0;c;){var d=i.user_list[o];if(d.user_id!=this.Myself.userId){g==this.Myself.Index&&(g++,console.log("n++le:"+g));var h=aggregation.AggregationIcon.produce();h.x=this.group_icon.getChildAt(g).x,h.y=this.group_icon.getChildAt(g).y,this.group_up.addChild(h),h.Index=g;var l=this.aggregationUp.group_iconFM.getChildAt(g);l.visible=!1,h.setData(d),console.log("n="+g),g++}else{console.log("添加自己"+this.Myself.Index),this.group_up.addChild(this.Myself),this.Myself.x=this.group_icon.getChildAt(this.Myself.Index).x,this.Myself.y=this.group_icon.getChildAt(this.Myself.Index).y;var l=this.aggregationUp.group_iconFM.getChildAt(this.Myself.Index);l.visible=!1,this.Myself.Index<=o&&g++}if(o++,o==i.user_list.length){c=!1;break}}}RES.getResByUrl(e.AggregationIcon1.img_buttonIcon,t.load_personIcon,this,RES.ResourceItem.TYPE_IMAGE);break;case 2:GameApp.Manager.viewManager.taskManager.taskUI&&GameApp.Manager.viewManager.taskManager.taskUI.addGroupExp(i),clearInterval(this.timeVar),this.clear(),a.Allobj.type=-1,this.close();break;case 3:clearInterval(this.timeVar),this.clear(),a.Allobj.type=-1,this.close()}},n.load_personIcon=function(e){this.img_startImg.texture=e,this.img_startImg.width=436,this.img_startImg.height=702},n.updateHostImg=function(e){var t=this.getMyselfIcon(),a=t.Index;this.aggregationUp.group_iconFM.getElementAt(a).visible=!0,this.aggregationUp.group_iconFM.getElementAt(e).visible=!1,t.Index=e},n.clear=function(){for(this.img_startImg.texture=null,this.removeChild(this.aggregationUp),this.Myself=null,a.isChange=!1,this.isHer=!1;this.group_up.numElements>0;){var e=this.group_up.getElementAt(this.group_up.numElements-1);aggregation.AggregationIcon.reclaim(e),e.parent&&e.parent.removeChild(e)}},n.starJi=function(e){socketio.IoConnect.getInstance().sendMessage(data.PomeloData.sendjijie,{},function(e){},this),GameApp.Manager.viewManager.aggregation.aggregation.upTriceIcon(),this.lable_jijie.visible=!1,this.btn_startJijie.visible=!1,this.lable_time.visible=!0,this.lable_personCount.visible=!0},n.zhqy=function(e){var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/inviteGroupFriendsForMass",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,count:this.iconCount,sign:t},function(e){system.Share.share(e,function(e){1==e&&system.TipText.produce().open("发送成功")})},!0,this)},n.comeToHost=function(e){this.close()},n.close=function(){this.lable_jijie.visible=!0,this.btn_startJijie.visible=!0,this.lable_time.visible=!1,this.lable_personCount.text="",this.lable_personCount.visible=!1,0==this.type?(GameApp.Manager.controllerManager.aggregationController.hide(),GameApp.Manager.controllerManager.gameMainController.show()):(GameApp.Manager.controllerManager.aggregationController.hide(),GameApp.Manager.controllerManager.taskController.show())},a.crrentTime=0,a.isChange=!1,a}(eui.Component);e.AggregationIcon1=t,egret.registerClass(t,"task.AggregationIcon1")}(task||(task={}));var aggregation;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/task/aggregation/AggregationIconUpSkin.exml"}__extends(t,e);var a=(__define,t);a.prototype;return t}(eui.Component);e.AggregationIconUp=t,egret.registerClass(t,"aggregation.AggregationIconUp")}(aggregation||(aggregation={}));var task;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(e,t){this.type=e,this.num=t,this.loaded?this.initUI():this.loading()},n.initUI=function(){console.log("进入下一个界面"),this.aggregation||(this.aggregation=new e.AggregationIcon1),this.aggregation.type=this.type,this.BottomUIStage.addChild(this.aggregation),this.aggregation.addUpImg(),2==this.num&&this.aggregation.upTriceIcon()},n.hide=function(){this.aggregation.parent&&(this.BottomUIStage.removeChild(this.aggregation),this.aggregation.clear())},n.loading=function(){this.initUI()},n.load_end=function(){this.loaded=!0,this.initUI()},a}(common.BaseView);e.AggregationManager=t,egret.registerClass(t,"task.AggregationManager")}(task||(task={}));var task;!function(e){var t=function(t){function a(){t.call(this),this.type=0,this.bo1=!1,this.bo2=!1,this.isSend=!1,this.cftime=0,this.ttime=0,this.skinName="src/view/gameUI/task/giftcf/GiftCfSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lbltab1.fontFamily="Heiti SC",this.lbltab2.fontFamily="Heiti SC",this.lbl1.fontFamily="Heiti SC",this.lbl2.fontFamily="Heiti SC",this.lbl3.fontFamily="Heiti SC",this.lbl4.fontFamily="Heiti SC",this.lbl5.fontFamily="Heiti SC",this.lb6.fontFamily="Heiti SC",this.lblTitle.fontFamily="Heiti SC",this.lblDate.fontFamily="Heiti SC",this.lblLucky.fontFamily="Heiti SC",this.lblPro.fontFamily="Heiti SC",this.lblFansNum.fontFamily="Heiti SC",this.lblGX.fontFamily="Heiti SC",this.lblJL.fontFamily="Heiti SC"),this.scroll1.height=this.stage.stageHeight,this.btn1=new e.GiftCfBtn(1),this.btn2=new e.GiftCfBtn(2),this.btn3=new e.GiftCfBtn(3),this.btn4=new e.GiftCfBtn(4),this.groupBtn.addChild(this.btn1),this.groupBtn.addChild(this.btn2),this.groupBtn.addChild(this.btn3),this.groupBtn.addChild(this.btn4),this.groupEnd.parent&&this.removeChild(this.groupEnd),this.btntab1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn1_tap,this),this.btntab2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn2_tap,this),this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buy_1,this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buy_2,this),this.btn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buy_3,this),this.btn4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buy_4,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.help_tap,this),this.btnZH.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/inviteGroupFriendsForCrowdfunding",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,sign:t},function(e){system.Share.share(e,function(e){1==e&&system.TipText.produce().open("发送成功")})},!0,this)},this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},n.help_tap=function(){this.groupTip3.visible=!0,GameApp.Manager.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.help_end,this)},n.help_end=function(){this.groupTip3.visible=!1,GameApp.Manager.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.help_end,this)},n.buy_1=function(){this.isSend||(GameApp.Manager.dataManager.lucystar>=1?(this.isSend=!0,socketio.IoConnect.getInstance().sendMessage(data.PomeloData.sendGiftCf,{record_id:a.obj.current.info.record_id,num:1},this.buy_call,this)):aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&(GameApp.Manager.viewManager.taskManager.giftCfManager.hide(),GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.taskController.hide,0))},this))},n.buy_2=function(){this.isSend||(GameApp.Manager.dataManager.lucystar>=59?(this.isSend=!0,socketio.IoConnect.getInstance().sendMessage(data.PomeloData.sendGiftCf,{record_id:a.obj.current.info.record_id,num:2},this.buy_call,this)):aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&(GameApp.Manager.viewManager.taskManager.giftCfManager.hide(),GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.taskController.hide,0))},this))},n.buy_3=function(){this.isSend||(GameApp.Manager.dataManager.lucystar>=99?(this.isSend=!0,socketio.IoConnect.getInstance().sendMessage(data.PomeloData.sendGiftCf,{record_id:a.obj.current.info.record_id,num:3},this.buy_call,this)):aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&(GameApp.Manager.viewManager.taskManager.giftCfManager.hide(),GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.taskController.hide,0))},this))},n.buy_4=function(){this.isSend||(GameApp.Manager.dataManager.lucystar>=999?(this.isSend=!0,socketio.IoConnect.getInstance().sendMessage(data.PomeloData.sendGiftCf,{record_id:a.obj.current.info.record_id,num:4},this.buy_call,this)):aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&(GameApp.Manager.viewManager.taskManager.giftCfManager.hide(),GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.taskController.hide,0))},this))},n.buy_call=function(e){this.isSend=!1,1==e.st&&(console.log("buycall",e),GameApp.Manager.dataManager.lucystar=e.data.user_lucky_star,flower.FlowerUI.getInstance().setLucky(),system.TipText.produce().open("贡献成功"))},n.btn1_tap=function(){this.groupEnd.parent&&(this.btntab1.alpha=1,this.lbltab1.textColor=16777215,this.btntab2.alpha=0,this.lbltab2.textColor=11250603,this.removeChild(this.groupEnd),this.addChild(this.groupStart),this.showTab1())},n.btn2_tap=function(){this.groupStart.parent&&(this.btntab2.alpha=1,this.lbltab2.textColor=16777215,this.btntab1.alpha=0,this.lbltab1.textColor=11250603,this.removeChild(this.groupStart),this.addChild(this.groupEnd),this.showTab2())},a.setData=function(e){this.obj=e,console.log("众筹初始化数据:",e)},a.updateCf=function(e){console.log(e,"obj11111111111"),201==e.code?(a.obj=e,GameApp.Manager.viewManager.taskManager.giftCfManager.giftCf&&(GameApp.Manager.viewManager.taskManager.giftCfManager.giftCf.group_des.visible=!0)):e&&(console.log("update",e),e.isFinish?(a.obj=e.crowdfunding,GameApp.Manager.viewManager.gameMainUI.mainUI.setHotNum(e.current_star_hot),GameApp.Manager.viewManager.taskManager.giftCfManager.giftCf&&GameApp.Manager.viewManager.taskManager.giftCfManager.giftCf.parent&&GameApp.Manager.viewManager.taskManager.giftCfManager.giftCf.updatePanel()):e.num!=a.obj.current.info.num&&(a.active(e),GameApp.Manager.viewManager.taskManager.giftCfManager.giftCf&&GameApp.Manager.viewManager.taskManager.giftCfManager.giftCf.parent&&(GameApp.Manager.viewManager.taskManager.giftCfManager.giftCf.updatePro(),GameApp.Manager.viewManager.taskManager.giftCfManager.giftCf.updateUser(e.user))))},a.active=function(e){if(a.obj.current.info.num=e.num,e.user){var t=a.obj.current.userArray,i=!1;for(var n in t)if(t[n].user_id==e.user.user_id){t[n].num+=e.user.num,i=!0;break}i||t.push(e.user)}},n.updatePro=function(){if(this.bo1){var e=a.obj.current;this.lblLucky.text=e.info.num+"",this.lblPro.text="当前进度:"+parseInt(e.info.num/e.info.need_num*100+"")+"%",this.pro1.value=e.info.num/e.info.need_num*100}},n.updateUser=function(t){var a,i=0,n=0;for(i=0;i<this.groupData.numElements;i++){var s=this.groupData.getElementAt(i);if(s.uid==t.user_id){a=s,console.log("找到item:"+a.uid);break}if(i==this.groupData.numElements){console.log("未找到"+t.user_id);break}}if(a)for(a.updateNum(t.num),n=0;n<this.groupData.getChildIndex(a);n++){var r=this.groupData.getElementAt(n);if(r.num<a.num){this.groupData.addChildAt(a,n);break}}else{for(n=0;n<this.groupData.numElements;n++){var r=this.groupData.getElementAt(n);if(r.num<t.num){a=e.GiftCfItem.produce(),this.groupData.addChildAt(a,n),a.setData(t,n+1);break}}a||(a=e.GiftCfItem.produce(),this.groupData.addChild(a),a.setData(t,this.groupData.numElements+1))}for(i=0;i<this.groupData.numElements;i++){var o=this.groupData.getElementAt(i);o.updateRank(i+1)}this.lblFansNum.text=this.groupData.numElements+"粉丝参加"},n.updatePanel=function(){this.clear(),this.groupStart.parent?this.showTab1():this.showTab2()},n.show=function(){201==a.obj.code?this.group_des.visible=!0:this.showTab1()},n.showTab1=function(){this.groupTip.visible=!1;var t=a.obj.current;if(!this.bo1&&(this.bo1=!0,t)){this.lblTitle.text=window.hexToDec(t.info.name),this.showEndDate(t),this.lblLucky.text=t.info.num+"",this.lblPro.text="当前进度:"+parseInt(t.info.num/t.info.need_num*100+"")+"%",this.pro1.value=t.info.num/t.info.need_num*100,this.lblFansNum.text=t.userArray.length+"粉丝参加",this.lblGX.textFlow=(new egret.HtmlTextParser).parser("贡献<font color=#e88319>"+t.info.need_num+"</font>颗钻石"),this.lblJL.textFlow=(new egret.HtmlTextParser).parser(GameApp.Manager.dataManager.star_name+"<font color=#e88319>+"+t.info.star_hot+"</font>热度,本群<font color=#e88319>+"+t.info.group_exp+"</font>经验"),RES.getResByUrl(t.info.pic,this.load_end,this,RES.ResourceItem.TYPE_IMAGE);for(var i=t.userArray,n=0;n<i.length;n++)for(var s=i.length-1;s>n;s--)if(i[s].num>i[s-1].num){var r=this.swapuserobj({},i[s]);this.swapuserobj(i[s],i[s-1]),this.swapuserobj(i[s-1],r)}for(var o=0;o<t.userArray.length;o++){var h=e.GiftCfItem.produce();this.groupData.addChild(h),h.setData(t.userArray[o],o+1)}}},n.swapuserobj=function(e,t){return e.num=t.num,e.user_id=t.user_id,e.user_name=t.user_name,e.user_pic=t.user_pic,e},n.showEndDate=function(e){var t=this,a=new Date;this.cftime=e.info.end_time,this.ttime=e.info.end_time-a.getTime();var i=new Date(this.ttime);i.getDate()>1?this.lblDate.textFlow=(new egret.HtmlTextParser).parser("结束日期:还差<font color=#ff0000>"+i.getDate()+"</font>天结束"):(this.timeVar&&clearInterval(this.timeVar),this.timeVar=setInterval(function(){var e=(new Date).getTime(),a=t.cftime-e;0>=a?t.lblDate.text="日期已过期":t.lblDate.textFlow=(new egret.HtmlTextParser).parser("结束日期:还差<font color=#ff0000>"+Tools.getInstance().formatTime2(a)+"</font>结束")},980))},n.load_end=function(e){this.bmpIcon.source=e},n.showTab2=function(){var t=a.obj.history;if(!this.bo2){this.bo2=!0;for(var i=0;i<t.length;i++){var n=e.GiftCfItem1.produce();this.groupEnd.addChild(n),n.setData(t[i])}}0==this.groupEnd.numElements&&(this.groupTip.visible=!0)},n.formatTime=function(e){var t=new Date(e);return t.getMonth()+1+"-"+t.getDate()},n.clear=function(){for(this.groupTip.visible=!1,this.bo1=!1,this.bo2=!1,this.lblTitle.text="",this.lblDate.text="",this.lblLucky.text="",this.lblPro.text="",this.pro1.value=0,this.lblFansNum.text="",this.lblGX.text="",this.lblJL.text="";this.groupData.numElements>0;){var t=this.groupData.getElementAt(this.groupData.numElements-1);e.GiftCfItem.reclaim(t),t.parent&&t.parent.removeChild(t)}for(;this.groupEnd.numElements>0;){var a=this.groupData.getElementAt(this.groupData.numElements-1);e.GiftCfItem1.reclaim(a),a.parent&&a.parent.removeChild(a)}this.group_des.visible=!1},n.close=function(){0==this.type?GameApp.Manager.controllerManager.gameMainController.show():GameApp.Manager.controllerManager.taskController.show(),GameApp.Manager.viewManager.taskManager.giftCfManager.hide()},a}(eui.Component);e.GiftCf=t,egret.registerClass(t,"task.GiftCf")}(task||(task={}));var task;!function(e){var t=function(e){function t(t){e.call(this),this.type=0,this.skinName="src/view/gameUI/task/giftcf/GiftCfBtnSkin.exml",this.type=t}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){switch(Tools.getInstance().isIphone()&&(this.lbl1.fontFamily="Heiti SC",this.lblNum.fontFamily="Heiti SC"),this.type){case 1:this.lblNum.text="1",this.bmpBack.fillColor=4904070;break;case 2:this.lblNum.text="59",this.bmpBack.fillColor=3849920;break;case 3:this.lblNum.text="99",this.bmpBack.fillColor=16753488;break;case 4:this.lblNum.text="999",this.bmpBack.fillColor=15761766}},t}(eui.Component);e.GiftCfBtn=t,egret.registerClass(t,"task.GiftCfBtn")}(task||(task={}));var task;!function(e){var t=function(e){function t(){e.call(this),this.uid=0,this.num=0,this.skinName="src/view/gameUI/task/giftcf/GiftCfItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblName.fontFamily="Heiti SC",this.lblDesc.fontFamily="Heiti SC"),this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){userPanel.UserPanel.getInstance().open(this.uid,GameApp.Manager.dataManager.bid_save,GameApp.Manager.dataManager.group_openid+""),e.stopPropagation()},this)},i.setData=function(e,t){switch(this.uid=e.user_id,this.lblName.text=window.hexToDec(e.user_name),this.num=e.num,this.lblDesc.textFlow=(new egret.HtmlTextParser).parser("支持<font color=#e88319>"+e.num+"钻石</font>"),t){case 1:this.bmpIconBack.source="t_zc2";break;case 2:this.bmpIconBack.source="t_zc3";break;case 3:this.bmpIconBack.source="t_zc4";break;default:this.bmpIconBack.source="t_zc5"}RES.getResByUrl(e.user_pic,this.load_end,this,RES.ResourceItem.TYPE_IMAGE)},i.updateRank=function(e){switch(e){case 1:this.bmpIconBack.source="t_zc2";break;case 2:this.bmpIconBack.source="t_zc3";break;case 3:this.bmpIconBack.source="t_zc4";break;default:this.bmpIconBack.source="t_zc5"}},i.updateNum=function(e){console.log("this.num:"+this.num+" "+e),this.num=this.num+e,console.log("22this.num:"+this.num+" "+e),this.lblDesc.textFlow=(new egret.HtmlTextParser).parser("支持<font color=#e88319>"+this.num+"钻石</font>")},i.load_end=function(e){this.bmpIcon.source=e},i.clear=function(){this.bmpIcon.source=null,this.bmpIconBack.source=null},t.cacheDict={},t}(eui.Component);e.GiftCfItem=t,egret.registerClass(t,"task.GiftCfItem")}(task||(task={}));var task;!function(e){var t=function(t){function a(){t.call(this),this.state="close",this.skinName="src/view/gameUI/task/giftcf/GiftCfItem1Skin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.produce=function(e,t){void 0===e&&(e="1"),void 0===t&&(t=0),null==a.cacheDict[e]&&(a.cacheDict[e]=[]);var i,n=a.cacheDict[e];return i=n.length>0?n.pop():new a},a.reclaim=function(e,t){void 0===t&&(t="1"),null==a.cacheDict[t]&&(a.cacheDict[t]=[]);var i=a.cacheDict[t];-1==i.indexOf(e)&&(i.push(e),e.clear())},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lbl1.fontFamily="Heiti SC",this.lbl2.fontFamily="Heiti SC",this.lblTitle.fontFamily="Heiti SC",this.lblGX.fontFamily="Heiti SC",this.lblNum.fontFamily="Heiti SC"),this.groupData.parent&&this.removeChild(this.groupData),this.rectCon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rectCon_tap,this)
},n.rectCon_tap=function(){"open"==this.state?this.state="close":this.state="open",this.showlist()},n.setData=function(t){var a=t.info,i=t.userArray;this.lblTitle.text=window.hexToDec(a.name),this.lblGX.textFlow=(new egret.HtmlTextParser).parser("贡献<font color=#e88319>"+a.need_num+"</font>颗钻石"),this.lblNum.text=i.length+"";for(var n=0;n<i.length;n++){var s=e.GiftCfItem.produce();this.groupData.addChild(s),s.setData(i[n],n+1)}this.showlist(),RES.getResByUrl(t.pic,this.load_end,this,RES.ResourceItem.TYPE_IMAGE)},n.load_end=function(e){this.bmpIcon.source=e},n.showlist=function(){"open"==this.state?this.addChild(this.groupData):this.groupData.parent&&this.removeChild(this.groupData)},n.clear=function(){for(this.bmpIcon.source=null;this.groupData.numElements>0;){var t=this.groupData.getElementAt(this.groupData.numElements-1);e.GiftCfItem.reclaim(t),t.parent&&t.parent.removeChild(t)}},a.cacheDict={},a}(eui.Component);e.GiftCfItem1=t,egret.registerClass(t,"task.GiftCfItem1")}(task||(task={}));var task;!function(e){var t=function(t){function a(e){t.call(this,e)}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(t){this.giftCf||(this.giftCf=new e.GiftCf),this.giftCf.type=t,this.BottomUIStage.addChild(this.giftCf),this.giftCf.show()},n.hide=function(){this.giftCf&&(this.giftCf.parent.removeChild(this.giftCf),this.giftCf.clear())},a}(common.BaseView);e.GiftManager=t,egret.registerClass(t,"task.GiftManager")}(task||(task={}));var groupManagement;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/task/groupManagement/GroupManagementSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){this.scroll2.height=this.stage.stageHeight-245},n.setData=function(t){for(var a=0;a<t.list.length;a++){var i=t.list[a],n=e.GroupManagementItem.produce();this.group_addManagement.addChild(n),n.setData(i.title,a,i)}},a}(eui.Component);e.GroupManagement=t,egret.registerClass(t,"groupManagement.GroupManagement")}(groupManagement||(groupManagement={}));var groupManagement;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/task/groupManagement/GroupManagementAuditSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_taskWarn.fontFamily="Heiti SC"),this.scor1.height=this.stage.stageHeight-127-245,this.groupBottom.y=this.stage.stageHeight-127-245,this.btn_taskWarn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.taskWarm,this)},n.setData=function(t,a){console.log(t.list);for(var i=(t.member_num,0);i<t.list.length;i++){var n=t.list[i],s=e.GroupManagementAuditItem.produce();this.group_audit.addChild(s),s.setData(n,a,2),console.log(n,"对象")}},n.taskWarm=function(e){var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/inviteGroupFriendsForTask",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,sign:t},function(e){system.Share.share(e,function(e){1==e&&system.TipText.produce().open("发送成功")})},!0,this)},a}(eui.Component);e.groupManagementAudit=t,egret.registerClass(t,"groupManagement.groupManagementAudit")}(groupManagement||(groupManagement={}));var groupManagement;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/task/groupManagement/GroupManagementAuditItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_auditTitle.fontFamily="Heiti SC",this.lable_auditInformation.fontFamily="Heiti SC"),this.btn_left.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goToNextScreen,this)},i.setData=function(e,t,a){this.lable_auditTitle.text=window.hexToDec(e.title),this.title=e.title;var i;i=1==a?0:e.count,this.lable_auditInformation.text="今日完成情况("+i+"/"+t+")",this.open_task_Id=e.open_task_id},i.goToNextScreen=function(e){GameApp.Manager.controllerManager.groupManagerAuditController.show(this.open_task_Id,this.title),GameApp.Manager.controllerManager.groupManagerController.hide()},i.clear=function(){},t.cacheDict={},t}(eui.Component);e.GroupManagementAuditItem=t,egret.registerClass(t,"groupManagement.GroupManagementAuditItem")}(groupManagement||(groupManagement={}));var groupManagement;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/task/groupManagement/groupManagementAuditItemInformationSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_itemTitle.fontFamily="Heiti SC",this.lable_yj.fontFamily="Heiti SC"),this.scro2.height=this.stage.stageHeight-127-245,this.groupButton.y=this.stage.stageHeight-127,this.btn_reward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.reward,this),this.btn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.comeToGroupManagerScreen,this)},n.setData=function(t,a,i){this.clear(),this.lable_itemTitle.text=window.hexToDec(i),this.open_id=a;var n=t.data.length;0==n?(this.rect_henggang.visible=!1,this.btn_reward.visible=!1,this.lable_yj.visible=!1,this.lable_ZW.visible=!0):(this.lable_ZW.visible=!1,this.btn_reward.visible=!0,this.lable_yj.visible=!0,this.rect_henggang.visible=!0),console.log(n,"长度");for(var s=0;n>s;s++){var r=e.GroupManagementAuditItemInformationItem.produce();this.group_itemInformation.addChild(r),r.setData(t.data[s],a)}},n.disLarge=function(e){console.log(e),RES.getResByUrl(e,this.loadlarge_end,this,RES.ResourceItem.TYPE_IMAGE),this.startx()},n.loadlarge_end=function(e){this.bmpLarge.source=e,this.groupLarge.visible=!0,this.endtx(),this.groupTip.visible=!1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addLargeLis,this)},n.addLargeLis=function(){this.groupLarge.visible=!1,this.bmpLarge.source=null,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addLargeLis,this)},n.startx=function(){this.groupTip.visible=!0,this.bmpTX.visible=!0,egret.Tween.get(this.bmpTX,{loop:!0}).to({rotation:360},1e3)},n.endtx=function(){this.bmpTX.visible=!1,egret.Tween.removeTweens(this.bmpTX)},n.reward=function(e){system.TipText.produce().open("所有粉丝都已奖励");var t=this,a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.group_openid+this.open_id+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/rewardRedFlowerAll",{user_id:GameApp.Manager.dataManager.uid,group_openid:GameApp.Manager.dataManager.group_openid,open_task_id:this.open_id,sign:a},function(e){if(1==e.st)for(var a=t.group_itemInformation.numElements,i=0;a>i;i++)for(var n=t.group_itemInformation.getElementAt(i),s=0;s<e.data.length;s++){var r=e.data[s].user_id;console.log(r,n.target_id,"id"),n.target_id==r&&(n.lable_getCount.text="获得"+window.hexToDec(e.data[s].red_flower_num)+"次",n.lable_getRedFlower.text="已奖励")}},!0,this)},n.comeToGroupManagerScreen=function(){GameApp.Manager.controllerManager.groupManagerAuditController.hide(),GameApp.Manager.controllerManager.groupManagerController.show("管理任务")},n.clear=function(){for(console.log("删除——————————————————————————");this.group_itemInformation.numElements>0;){var t=this.group_itemInformation.getElementAt(this.group_itemInformation.numElements-1);e.GroupManagementAuditItemInformationItem.reclaim(t),t.parent&&t.parent.removeChild(t)}},a}(eui.Component);e.GroupManagementAuditItemInformation=t,egret.registerClass(t,"groupManagement.GroupManagementAuditItemInformation")}(groupManagement||(groupManagement={}));var groupManagement;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/task/groupManagement/GroupManagementAuditItemInformationItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_name.fontFamily="Heiti SC",this.lable_count.fontFamily="Heiti SC",this.lable_getCount.fontFamily="Heiti SC",this.lable_getRedFlower.fontFamily="Heiti SC"),this.img_cutPc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickImg,this),this.btn_rewordRedFlower.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rewordRedFlower,this),this.img_cutPc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.small_click,this)},i.setData=function(e,t){this.open_id=t,this.objValue=e,this.largeImg=e.user_upload_pic.largeImg,this.target_id=e.user_id,console.log(t,this.target_id,"=========="),console.log(e,"888888888888888888888888888"),this.lable_count.text="累计完成"+window.hexToDec(e.finish_num)+"次",this.lable_getCount.text="获得"+window.hexToDec(e.red_flower_num)+"次",this.lable_name.text=window.hexToDec(e.user_name),0==e.can_send_flower&&(this.lable_getRedFlower.text="已奖励"),1==e.can_send_flower&&(this.lable_getRedFlower.text="奖励小红花"),RES.getResByUrl(e.user_pic,this.PersonIcon,this,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(e.user_upload_pic.smallImg,this.bitIcon,this,RES.ResourceItem.TYPE_IMAGE)},i.addFlower=function(){var e=parseInt(this.objValue.red_flower_num)+1,t=e+"";this.lable_getCount.text="获得"+window.hexToDec(t)+"次",console.log(e,t,"次数")},i.small_click=function(e){GameApp.Manager.viewManager.groupManagerAudit.groupManagerAuditInfor.disLarge(this.largeImg),e.stopPropagation()},i.PersonIcon=function(e){this.img_icon.texture=e},i.bitIcon=function(e){this.img_cutPc.texture=e},i.clickImg=function(e){},i.rewordRedFlower=function(e){var t=this,a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+this.target_id+GameApp.Manager.dataManager.group_openid+this.open_id+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/rewardRedFlower",{user_id:GameApp.Manager.dataManager.uid,target_user_id:this.target_id,group_openid:GameApp.Manager.dataManager.group_openid,open_task_id:this.open_id,sign:a},function(e){1==e.st&&(console.log("获得小红花"),t.addFlower(),t.lable_getRedFlower.text="已奖励")},!0,this)},i.clear=function(){console.log("回收"),this.lable_name.text="",this.lable_count.text="",this.lable_getCount.text="",this.lable_getRedFlower.text="",this.img_icon.texture=null,this.img_cutPc.texture=null},t.cacheDict={},t}(eui.Component);e.GroupManagementAuditItemInformationItem=t,egret.registerClass(t,"groupManagement.GroupManagementAuditItemInformationItem")}(groupManagement||(groupManagement={}));var groupManagement;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(e,t){this.open_id=e,this.title=t,this.loaded?this.initUI():this.loading()},n.initUI=function(){var t=this;this.groupManagerAuditInfor||(this.groupManagerAuditInfor=new e.GroupManagementAuditItemInformation,this.BottomUIStage.addChild(this.groupManagerAuditInfor)),this.BottomUIStage.addChild(this.groupManagerAuditInfor);var a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.group_openid+this.open_id+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/reviewOpenTask",{user_id:GameApp.Manager.dataManager.uid,group_openid:GameApp.Manager.dataManager.group_openid,open_task_id:this.open_id,sign:a},function(e){1==e.st&&(console.log("接收群任务成功"),t.groupManagerAuditInfor.setData(e,t.open_id,t.title))},!0,this)},n.hide=function(){this.groupManagerAuditInfor.parent&&(this.BottomUIStage.removeChild(this.groupManagerAuditInfor),this.groupManagerAuditInfor.clear())},n.loading=function(){this.load_end()},n.load_end=function(){this.loaded=!0,this.initUI()},a}(common.BaseView);e.GroupManagementAuditManager=t,egret.registerClass(t,"groupManagement.GroupManagementAuditManager")}(groupManagement||(groupManagement={}));var groupManagement;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/task/groupManagement/GroupManagementItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_managementTitle.fontFamily="Heiti SC"),this.btn_nextScreen.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextScreen,this)},i.setData=function(e,t,a){this.managementObj=GameApp.Manager.viewManager.groupManager.hostManager.allObj,this.lable_managementTitle.text=window.hexToDec(e),this.gMI_open_task_id=a.open_task_id},i.nextScreen=function(e){var t=this;console.log(t.gMI_open_task_id,"==========="),GameApp.Manager.viewManager.groupManager.hostManager.group_manageInfo.visible=!0,GameApp.Manager.viewManager.groupManager.hostManager.group_manager.visible=!1;for(var a=GameApp.Manager.viewManager.groupManager.hostManager.groupManagementItemInformation.group_addToImg1.numElements,i=0;a>i;i++){GameApp.Manager.viewManager.groupManager.hostManager.groupManagementItemInformation.group_addToImg1.getElementAt(i)}for(var n=GameApp.Manager.viewManager.groupManager.hostManager.objArr.length,s=0;n>s;s++){var r=GameApp.Manager.viewManager.groupManager.hostManager.objArr[s];console.log(r.open_task_id),t.gMI_open_task_id==r.open_task_id&&(console.log("下一页"),GameApp.Manager.viewManager.groupManager.hostManager.groupManagementItemInformation.setData(r,t.gMI_open_task_id),GameApp.Manager.viewManager.groupManager.hostManager.group_manageInfo.addChild(GameApp.Manager.viewManager.groupManager.hostManager.groupManagementItemInformation))}},i.clear=function(){},t.cacheDict={},t}(eui.Component);e.GroupManagementItem=t,egret.registerClass(t,"groupManagement.GroupManagementItem")}(groupManagement||(groupManagement={}));var groupManagement;!function(e){var t=function(t){function a(){t.call(this),this.imgDataArr=[],this.skinName="src/view/gameUI/task/groupManagement/GroupManagementItemInformationSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_taskTitle.fontFamily="Heiti SC",this.lable_taskDirections.fontFamily="Heiti SC",this.lable_taskLink.fontFamily="Heiti SC",this.lable_taskScreenshot.fontFamily="Heiti SC",this.lable_delete.fontFamily="Heiti SC",this.lable_sava.fontFamily="Heiti SC",this.lable_warmTitle.fontFamily="Heiti SC",this.lable_warmLink.fontFamily="Heiti SC"),this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.updateImageStarte,this),this.img_open.addEventListener(egret.TouchEvent.TOUCH_TAP,this.updateImageStarte1,this),this.btn_save.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sava,this),this.btn_delete.addEventListener(egret.TouchEvent.TOUCH_TAP,this["delete"],this),this.text_title.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){(this.text_title.text="如:部落签到")&&(this.text_title.text="")},this),this.text_taskDirections.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){(this.text_taskDirections.text="如何做任务的说明和指引")&&(this.text_taskDirections.text="")},this),this.text_taskLink.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){(this.text_taskLink.text="请输入任务链接")&&(this.text_taskLink.text="")},this)},n.setData=function(t,a){for(this.itemIndex=a,this.isCutPc=0,this.text_title.text=window.hexToDec(t.title),this.text_taskDirections.text=window.hexToDec(t.content),this.text_taskLink.text=window.hexToDec(t.link),this.open_task_id=t.open_task_id,this.title=this.text_title.text,this.content=this.text_taskDirections.text,this.link=this.text_taskLink.text,console.log(t,this.open_task_id,"管理界面的每个Id","==========","------------------------"),console.log(this.group_addToImg1.numElements,"数组中元素"),this.obj_value=t;this.group_addToImg1.numElements>0;)this.group_addToImg1.removeChildren();var i=t.task_pic.length;if(console.log(t.task_pic,"888888888888888888888888888888"),console.log(i,"长度"),0==i){var n=new e.GroupManagerPushImage1;this.group_addToImg1.addChild(n),n.index=0}else{for(var s=0;i>s;s++){var n=new e.GroupManagerPushImage1;this.group_addToImg1.addChild(n),n.index=1,n.setImage(t.task_pic[s].largeImg)}if(4>i){var n=new e.GroupManagerPushImage1;this.group_addToImg1.addChild(n),n.index=0}}},n.selectedHandler=function(e,t,a){RES.getResByUrl(t,e.compFunc,e,RES.ResourceItem.TYPE_IMAGE)},n.compFunc=function(e){var t=e.toDataURL("image/jpeg");this.imgData=t},n.updateImageStarte=function(e){this.img_close.visible=!1,this.img_open.visible=!0,this.isCutPc=1},n.updateImageStarte1=function(e){this.img_open.visible=!1,this.img_close.visible=!0,this.isCutPc=0},n.sava=function(e){this.imgDataArr=[];var t=this;if(""==this.text_title.text||"如:部落签到"==this.text_title.text)return void(this.lable_warmTitle.visible=!0);if(this.lable_warmTitle.visible=!1,""==this.text_taskLink.text||"请输入任务链接"==this.text_taskLink.text)return void(this.lable_warmLink.visible=!0);this.lable_warmLink.visible=!1,this.title=window.decToHex(this.text_title.text),this.content=window.decToHex(this.text_taskDirections.text),this.link=this.text_taskLink.text,this.need_pic_feedback=this.isCutPc;for(var a=(this.imgData?this.imgData:"",this.open_task_id?this.open_task_id:""),i=this.group_addToImg1.numElements,n=0;i>n;n++){var s=this.group_addToImg1.getElementAt(n);(2==s.index||3==s.index)&&this.imgDataArr.push({index:n,smallImg:s.addImage?s.addImage:"",largeImg:s.addSmallImg?s.addSmallImg:""})}var i=this.group_addToImg1.numElements,r={title:this.title,content:this.content,link:this.link,need_pic_feedback:this.need_pic_feedback,imgData:this.imgDataArr,open_task_id:a};GameApp.Manager.viewManager.maskStage(.4,!0),socketio.IoConnect.getInstance().upload(3,r,function(e){if(console.log(e,"-----------"),1==e.st){var a=e.data.task_pic,i=a.length;console.log("发送成功",a,i);setTimeout(function(){var a,i=!1;GameApp.Manager.viewManager.groupManager.hostManager.group_manageInfo.removeChildren(),GameApp.Manager.viewManager.groupManager.hostManager.group_manager.visible=!0,GameApp.Manager.viewManager.groupManager.hostManager.group_manageInfo.visible=!1;for(var n=GameApp.Manager.viewManager.groupManager.hostManager.groupManagement.group_addManagement.numElements,s=GameApp.Manager.viewManager.groupManager.hostManager.objArr.length,r=0;n>r;r++){var o=GameApp.Manager.viewManager.groupManager.hostManager.groupManagement.group_addManagement.getElementAt(r);if(o.gMI_open_task_id==t.itemIndex){o.lable_managementTitle.text=t.text_title.text;var h=GameApp.Manager.viewManager.groupManager.hostManager.groupManagementAudit.group_audit.getElementAt(r);h.lable_auditTitle.text=t.text_title.text}}for(var r=0;s>r;r++){var l=GameApp.Manager.viewManager.groupManager.hostManager.objArr[r];l.open_task_id==t.itemIndex&&(console.log(l,"数组中每一项"),i=!0,a=r)}if(i){GameApp.Manager.viewManager.groupManager.hostManager.objArr[a].title=window.decToHex(t.text_title.text),GameApp.Manager.viewManager.groupManager.hostManager.objArr[a].content=window.decToHex(t.text_taskDirections.text),GameApp.Manager.viewManager.groupManager.hostManager.objArr[a].link=window.decToHex(t.text_taskLink.text),GameApp.Manager.viewManager.groupManager.hostManager.objArr[a].need_pic_feedback=t.isCutPc,GameApp.Manager.viewManager.groupManager.hostManager.objArr[a].task_pic=[];for(var g=0;g<e.data.task_pic.length;g++)GameApp.Manager.viewManager.groupManager.hostManager.objArr[a].task_pic.push(e.data.task_pic[g])}},300);aler.AlertPanel1.getInstance().show("温馨提示","发布成功","确定",function(){GameApp.Manager.viewManager.clearMask()},this)}else console.log("发布失败"),aler.AlertPanel1.getInstance().show("温馨提示","发布失败","确定",function(){GameApp.Manager.viewManager.clearMask()},this)},this)},n["delete"]=function(e){var t,a,i=!1,n=!1,s=this,r=this.open_task_id?this.open_task_id:"",o=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.group_openid+r+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/removeCustomOpenTask",{user_id:GameApp.Manager.dataManager.uid,group_openid:GameApp.Manager.dataManager.group_openid,open_task_id:r,sign:o},function(e){if(1==e.st){for(var r=GameApp.Manager.viewManager.groupManager.hostManager.objArr.length,o=(setTimeout(function(){GameApp.Manager.viewManager.groupManager.hostManager.group_manageInfo.removeChildren(),GameApp.Manager.viewManager.groupManager.hostManager.group_manageInfo.visible=!1;for(var e=GameApp.Manager.viewManager.groupManager.hostManager.groupManagementAudit.group_audit.numElements,t=0;e>t;t++){var i=GameApp.Manager.viewManager.groupManager.hostManager.groupManagement.group_addManagement.getElementAt(t);console.log(i.gMI_open_task_id,"删除的id",s.itemIndex),i.gMI_open_task_id==s.itemIndex&&(n=!0,a=t)}n&&(GameApp.Manager.viewManager.groupManager.hostManager.groupManagementAudit.group_audit.removeChildAt(a),GameApp.Manager.viewManager.groupManager.hostManager.groupManagement.group_addManagement.removeChildAt(a)),GameApp.Manager.viewManager.groupManager.hostManager.group_manager.visible=!0},300),0);r>o;o++){var h=GameApp.Manager.viewManager.groupManager.hostManager.objArr[o];h.open_task_id==s.itemIndex&&(i=!0,t=o)}i&&GameApp.Manager.viewManager.groupManager.hostManager.objArr.splice(t,1)}},!0,this)},a}(eui.Component);e.GroupManagementItemInformation=t,egret.registerClass(t,"groupManagement.GroupManagementItemInformation")}(groupManagement||(groupManagement={}));var groupManagement;!function(e){var t=function(t){function a(){t.call(this),this.imgDataArr=[],this.skinName="src/view/gameUI/task/groupManagement/GroupManagementPushSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_taskTitle.fontFamily="Heiti SC",this.lable_taskDirections.fontFamily="Heiti SC",this.lable_taskLink.fontFamily="Heiti SC",this.lable_taskScreenshot.fontFamily="Heiti SC",this.lable_push.fontFamily="Heiti SC",this.text_title.fontFamily="Heiti SC",this.text_taskDirections.fontFamily="Heiti SC",this.text_taskLink.fontFamily="Heiti SC",this.lable_warmTitle.fontFamily="Heiti SC",this.lable_warmLink.fontFamily="Heiti SC"),this.btn_push.addEventListener(egret.TouchEvent.TOUCH_TAP,this.push,this),this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.updateImageStarte,this),this.img_open.addEventListener(egret.TouchEvent.TOUCH_TAP,this.updateImageStarte1,this),this.text_title.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){(this.text_title.text="如:部落签到")&&(this.text_title.text="")},this),this.text_taskDirections.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){(this.text_taskDirections.text="如何做任务的说明和指引")&&(this.text_taskDirections.text="")},this),this.text_taskLink.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){(this.text_taskLink.text="请输入任务链接")&&(this.text_taskLink.text="")},this)},n.updateImageStarte=function(e){this.img_close.visible=!1,this.img_open.visible=!0,this.isCutPc=1},n.updateImageStarte1=function(e){this.img_open.visible=!1,this.img_close.visible=!0,this.isCutPc=0},n.setData=function(t){this.totalCunt=t,this.isCutPc=0,this.text_title.text="如:部落签到",this.text_taskDirections.text="如何做任务的说明和指引",this.text_taskLink.text="请输入任务链接";var a=new e.GroupManagerPushImage;a.index=0,a.x=0,a.y=0,this.group_addToImg.addChild(a)},n.push=function(t){var a=this;if(this.imgDataArr=[],""==this.text_title.text||"如:部落签到"==this.text_title.text)return void(this.lable_warmTitle.visible=!0);if(this.lable_warmTitle.visible=!1,""==this.text_taskLink.text||"请输入任务链接"==this.text_taskLink.text)return void(this.lable_warmLink.visible=!0);this.lable_warmLink.visible=!1,this.title=window.decToHex(this.text_title.text);"如何做任务的说明和指引"==this.text_taskDirections.text||""==this.text_taskDirections.text?this.content="":this.content=window.decToHex(this.text_taskDirections.text),this.link=this.text_taskLink.text,this.need_pic_feedback=this.isCutPc;var i=this.group_addToImg.numElements;console.log(i,"数量");for(var n=0;i>n;n++){var s=this.group_addToImg.getElementAt(n);(1==s.index||2==s.index||3==s.index)&&(console.log(s,"发送到后端的值"),this.imgDataArr.push({index:n,smallImg:s.addSmallImg?s.addSmallImg:"",largeImg:s.addImage?s.addImage:""}))}var r={title:this.title,content:this.content,link:this.link,need_pic_feedback:this.need_pic_feedback,imgData:this.imgDataArr};GameApp.Manager.viewManager.maskStage(.4,!0),socketio.IoConnect.getInstance().upload(3,r,function(t){if(1==t.st){console.log("发布成功111",t.data),GameApp.Manager.viewManager.groupManager.hostManager.objArr.push(t.data);var i=e.GroupManagementAuditItem.produce();GameApp.Manager.viewManager.groupManager.hostManager.groupManagementAudit.group_audit.addChild(i),i.setData(t.data,a.totalCunt,1);var n=e.GroupManagementItem.produce();for(GameApp.Manager.viewManager.groupManager.hostManager.groupManagement.group_addManagement.addChild(n),n.setData(t.data.title,0,t.data),a.text_title.text="如:部落签到",a.text_taskDirections.text="如何做任务的说明和指引",a.text_taskLink.text="请输入任务链接";a.group_addToImg.numElements>0;)a.group_addToImg.removeChildren();var s=new e.GroupManagerPushImage;s.index=0,s.x=0,s.y=0,this.group_addToImg.addChild(s),aler.AlertPanel1.getInstance().show("温馨提示","发布成功","确定",function(){GameApp.Manager.viewManager.clearMask()},this)}else console.log("发布失败"),aler.AlertPanel1.getInstance().show("温馨提示","发布失败","确定",function(){GameApp.Manager.viewManager.clearMask()},this)},this)},a}(eui.Component);e.GroupManagementPush=t,egret.registerClass(t,"groupManagement.GroupManagementPush")}(groupManagement||(groupManagement={}));var groupManagement;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(e){this.title=e,this.loaded?this.initUI():this.loading()},n.initUI=function(){var t=this;if(!this.hostManager){var t=this;this.hostManager=new e.HostManagement}this.BottomUIStage.addChild(this.hostManager);var a=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getCustomOpenTaskList",{user_id:GameApp.Manager.dataManager.uid,group_openid:GameApp.Manager.dataManager.group_openid,sign:a},function(e){1==e.st&&(console.log("接收群任务成功",e),t.obj=e,t.hostManager.setData(e.data,t.title),console.log("3"))},!0,this),console.log("4")},n.hide=function(){this.hostManager.parent&&(this.BottomUIStage.removeChild(this.hostManager),this.hostManager.clear())},n.loading=function(){this.load_end()},n.load_end=function(){this.loaded=!0,this.initUI()},a}(common.BaseView);e.GroupManager=t,egret.registerClass(t,"groupManagement.GroupManager")}(groupManagement||(groupManagement={}));var groupManagement;!function(e){var t=function(t){function a(){t.call(this),this.index=0,this.skinName="src/view/gameUI/task/groupManagement/GroupManagerPushImageSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){this.btn_add.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changerImagePic,this)},n.changerImagePic=function(e){selectImage(this.selectedHandler,this,250)},n.setImage=function(e){RES.getResByUrl(e,this.setPic,this,RES.ResourceItem.TYPE_IMAGE)},n.setPic=function(e){this.btn_add.texture=e,this.btn_add.width=133,this.btn_add.height=133},n.selectedHandler=function(e,t,a,i){RES.getResByUrl(t,e.compFunc,e,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(i,e.compFunc1,e,RES.ResourceItem.TYPE_IMAGE)},n.compFunc=function(t){var a=t.toDataURL("image/jpeg");if(this.addImage=a,1==this.index&&RES.getResByUrl(a,this.changePic1,this,RES.ResourceItem.TYPE_IMAGE),2==this.index&&RES.getResByUrl(a,this.changePic3,this,RES.ResourceItem.TYPE_IMAGE),3==this.index&&RES.getResByUrl(a,this.changePic1,this,RES.ResourceItem.TYPE_IMAGE),!(GameApp.Manager.viewManager.groupManager.hostManager.groupManagementPush.group_addToImg.numElements>4)&&0==this.index){console.log("添加一项"),RES.getResByUrl(a,this.changePic2,this,RES.ResourceItem.TYPE_IMAGE);var i=new e.GroupManagerPushImage;GameApp.Manager.viewManager.groupManager.hostManager.groupManagementPush.group_addToImg.addChild(i),i.index=0}},n.compFunc1=function(e){var t=e.toDataURL("image/jpeg");this.addSmallImg=t},n.changePic1=function(e){this.btn_add.texture=null,this.btn_add.texture=e,this.btn_add.width=133,this.btn_add.height=133,this.index=2},n.changePic3=function(e){this.btn_add.texture=null,this.btn_add.texture=e,this.btn_add.width=133,this.btn_add.height=133,this.index=2},n.changePic2=function(e){this.btn_add.texture=null,this.btn_add.texture=e,this.btn_add.width=133,this.btn_add.height=133,this.index=3},a}(eui.Component);e.GroupManagerPushImage=t,egret.registerClass(t,"groupManagement.GroupManagerPushImage")}(groupManagement||(groupManagement={}));var groupManagement;!function(e){var t=function(t){function a(){t.call(this),this.index=0,this.skinName="src/view/gameUI/task/groupManagement/GroupManagerPushImageSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){this.btn_add.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changerImagePic,this)},n.changerImagePic=function(e){selectImage(this.selectedHandler,this,250)},n.setImage=function(e){RES.getResByUrl(e,this.setPic,this,RES.ResourceItem.TYPE_IMAGE)},n.setPic=function(e){this.btn_add.texture=e,this.btn_add.width=133,this.btn_add.height=133},n.selectedHandler=function(e,t,a,i){RES.getResByUrl(t,e.compFunc,e,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(i,e.compFunc1,e,RES.ResourceItem.TYPE_IMAGE)},n.compFunc=function(t){var a=t.toDataURL("image/jpeg");if(this.addImage=a,1==this.index&&RES.getResByUrl(a,this.changePic1,this,RES.ResourceItem.TYPE_IMAGE),2==this.index&&RES.getResByUrl(a,this.changePic3,this,RES.ResourceItem.TYPE_IMAGE),3==this.index&&RES.getResByUrl(a,this.changePic1,this,RES.ResourceItem.TYPE_IMAGE),!(GameApp.Manager.viewManager.groupManager.hostManager.groupManagementItemInformation.group_addToImg1.numElements>4)&&0==this.index){console.log("添加一项"),console.log("--------------------------------------------------"),RES.getResByUrl(a,this.changePic2,this,RES.ResourceItem.TYPE_IMAGE);var i=new e.GroupManagerPushImage1;GameApp.Manager.viewManager.groupManager.hostManager.groupManagementItemInformation.group_addToImg1.addChild(i),i.index=0}},n.compFunc1=function(e){var t=e.toDataURL("image/jpeg");this.addSmallImg=t},n.changePic1=function(e){this.btn_add.texture=null,this.btn_add.texture=e,this.btn_add.width=133,this.btn_add.height=133,this.index=2},n.changePic3=function(e){this.btn_add.texture=null,this.btn_add.texture=e,this.btn_add.width=133,this.btn_add.height=133,this.index=2},n.changePic2=function(e){this.btn_add.texture=null,this.btn_add.texture=e,this.btn_add.width=133,this.btn_add.height=133,this.index=3},a}(eui.Component);e.GroupManagerPushImage1=t,egret.registerClass(t,"groupManagement.GroupManagerPushImage1")}(groupManagement||(groupManagement={}));var groupManagement;!function(e){var t=function(t){function a(){t.call(this),this.objArr=[],this.skinName="src/view/gameUI/task/groupManagement/HostManagementSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_taskManagement.fontFamily="Heiti SC",this.lable_Publish.fontFamily="Heiti SC",this.lable_audit.fontFamily="Heiti SC",this.lable_management.fontFamily="Heiti SC"),this.groupManagementPush=new e.GroupManagementPush,this.groupManagementPush.x=0,this.groupManagementPush.y=0,this.groupManagementAudit=new e.groupManagementAudit,this.groupManagementAudit.x=0,this.groupManagementAudit.y=0,this.groupManagement=new e.GroupManagement,this.groupManagement.x=0,this.groupManagement.y=0,this.groupManagementItemInformation=new e.GroupManagementItemInformation,this.groupManagementItemInformation.x=0,this.groupManagementItemInformation.y=0,this.btn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.comeBack,this)
},n.task_publish=function(){var e=this;for(console.log(e.groupManagementPush.group_addToImg.numElements,"1");e.groupManagementPush.group_addToImg.numElements>0;)e.groupManagementPush.group_addToImg.removeChildren();console.log(e.groupManagementPush.group_addToImg.numElements,"2"),e.groupManagementPush.isCutPc=0,e.groupManagementPush.text_title.text="如:部落签到",e.groupManagementPush.text_taskDirections.text="如何做任务的说明和指引",e.groupManagementPush.text_taskLink.text="请输入任务链接",e.crateGroupItem(1)},n.task_shenYue=function(){var e=this;e.crateGroupItem(2)},n.task_guangLi=function(){var e=this;e.crateGroupItem(3)},n.changePos=function(e){var t=Math.sqrt((this.img_jt.x-e.x)*(this.img_jt.x-e.x)),a=t/2,i=e.x;egret.Tween.get(this.img_jt).to({x:i-50},a)},n.crateGroupItem=function(e){switch(e){case 1:this.group_push.visible=!0,this.group_manager.visible=!1,this.group_audit.visible=!1,this.group_manageInfo.visible=!1;break;case 2:this.group_audit.visible=!0,this.group_push.visible=!1,this.group_manager.visible=!1,this.group_manageInfo.visible=!1;break;case 3:this.group_manager.visible=!0,this.group_push.visible=!1,this.group_audit.visible=!1,this.group_manageInfo.visible=!1}},n.setData=function(e,t){this.lable_taskManagement.text=t,this.allObj=e;for(var a=0;a<e.list.length;a++){var i=e.list[a];this.objArr.push(i)}this.group_push.addChild(this.groupManagementPush),this.groupManagementPush.setData(e.member_num),this.group_audit.addChild(this.groupManagementAudit),this.groupManagementAudit.setData(this.allObj,e.member_num),this.group_manager.addChild(this.groupManagement),this.groupManagement.setData(this.allObj)},n.clear=function(){for(console.log("删除"),this.lable_taskManagement.text="";this.group_push.numElements>0;){var t=this.group_push.getElementAt(this.group_push.numElements-1);t.parent&&t.parent.removeChild(t)}for(;this.groupManagementAudit.group_audit.numElements>0;){var a=this.groupManagementAudit.group_audit.getElementAt(this.groupManagementAudit.group_audit.numElements-1);e.GroupManagementAuditItem.reclaim(a),a.parent&&a.parent.removeChild(a)}for(;this.groupManagement.group_addManagement.numElements>0;){var i=this.groupManagement.group_addManagement.getElementAt(this.groupManagement.group_addManagement.numElements-1);e.GroupManagementItem.reclaim(i),i.parent&&i.parent.removeChild(i)}for(;this.groupManagementPush.group_addToImg.numElements>0;)this.groupManagementPush.group_addToImg.removeChildren()},n.comeBack=function(){GameApp.Manager.controllerManager.taskController.show(),GameApp.Manager.controllerManager.groupManagerController.hide()},a}(eui.Component);e.HostManagement=t,egret.registerClass(t,"groupManagement.HostManagement")}(groupManagement||(groupManagement={}));var groupXuan;!function(e){var t=function(e){function t(){e.call(this),this.isBuy=!1,this.skinName="src/view/gameUI/task/groupXuan/TaskGroupXuanSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_call.fontFamily="Heiti SC",this.Edit_xuanGroupDes.fontFamily="Heiti SC",this.lable_xuanGroupTitle.fontFamily="Heiti SC",this.lable_pushXuanGroup.fontFamily="Heiti SC");var e=this;this.rect_pushXuanGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){""==e.Edit_xuanGroupDes.text||"限制长度30字以内"==e.Edit_xuanGroupDes.text?system.TipText.produce().open("宣群口号不能为空",1e3,800):GameApp.Manager.dataManager.lucystar>=50?socketio.IoConnect.getInstance().sendMessage(data.PomeloData.getAndReceiveAnnounceGroup,{message:window.decToHex(e.Edit_xuanGroupDes.text)},function(t){console.log(t,"data"),1==t.st?(e.isBuy=!0,GameApp.Manager.dataManager.lucystar=t.data.lucky_star,console.log(t.data.lucky_star,GameApp.Manager.dataManager.lucystar,"data"),system.TipText.produce().open("宣群成功，请到群排行查看",1e3,800)):-1==t.st&&2==t.msg.code?system.TipText.produce().open("3小时之内不能重复宣群",1e3,800):-1==t.st&&1==t.msg.code?system.TipText.produce().open("钻石不够，请购买钻石",1e3,800):-1==t.st&&0==t.msg.code&&system.TipText.produce().open("宣群失败",1e3,800)},this):aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(t){"ok"==t&&(e.close(),GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.taskController.hide,0))},this)},this),this.Edit_xuanGroupDes.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.Edit_xuanGroupDes.text=""},this),this.btn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.close()},this)},t.init=function(e){t.obj=e},i.setData=function(){this.isBuy||(t.obj.self&&t.obj.self.message?GameApp.Manager.viewManager.taskManager.taskUI.xuanGrop.Edit_xuanGroupDes.text=window.hexToDec(t.obj.self.message):GameApp.Manager.viewManager.taskManager.taskUI.xuanGrop.Edit_xuanGroupDes.text="限制长度30字以内")},i.close=function(){this.parent&&this.parent.removeChild(this)},t}(eui.Component);e.TaskGroupXuan=t,egret.registerClass(t,"groupXuan.TaskGroupXuan")}(groupXuan||(groupXuan={}));var task;!function(e){var t=function(t){function a(){t.call(this),this.type=0,this.skinName="src/view/gameUI/task/signIn/SignInSkin.exml",this.taskTip=new e.TaskTip}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_continuousDay.fontFamily="Heiti SC",this.labla_crit.fontFamily="Heiti SC",this.lable_firstSign.fontFamily="Heiti SC",this.lable_fansName1.fontFamily="Heiti SC",this.lable_fansName2.fontFamily="Heiti SC",this.lable_fansName3.fontFamily="Heiti SC",this.lable_reward.fontFamily="Heiti SC",this.lable_reward2.fontFamily="Heiti SC",this.lable_reward3.fontFamily="Heiti SC",this.lable_todaySignNumber.fontFamily="Heiti SC",this.lable_lb1.fontFamily="Heiti SC",this.lable_signIn.fontFamily="Heiti SC",this.lable_getExpAndDia.fontFamily="Heiti SC"),this.scroll1.height=this.stage.stageHeight,this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.help_tap,this),this.btn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn_comeBack,this),this.rect_haoZhao.addEventListener(egret.TouchEvent.TOUCH_TAP,this.SignHaoZhao,this),this.img_conDayIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchContinus,this),this.img_critIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchCrit,this),this.img_firstDayIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchtoday,this)},n.touchContinus=function(e){this.uid1>0&&userPanel.UserPanel.getInstance().open(this.uid1,GameApp.Manager.dataManager.bid_save,GameApp.Manager.dataManager.group_openid),e.stopPropagation()},n.touchCrit=function(e){this.uid2>0&&userPanel.UserPanel.getInstance().open(this.uid2,GameApp.Manager.dataManager.bid_save,GameApp.Manager.dataManager.group_openid),e.stopPropagation()},n.touchtoday=function(e){this.uid3>0&&userPanel.UserPanel.getInstance().open(this.uid3,GameApp.Manager.dataManager.bid_save,GameApp.Manager.dataManager.group_openid),e.stopPropagation()},n.setData=function(t){this.allObj=t,t.signedLongest.user_id?(this.uid1=t.signedLongest.user_id,this.lable_continuousDay.text="连续"+window.hexToDec(t.signedLongest.num)+"天",this.lable_fansName1.text=window.hexToDec(t.signedLongest.user_name),this.lable_reward.text="奖励："+ +window.hexToDec(t.signedLongest.longest_sign_reward),this.img_d1.visible=!0,RES.getResByUrl(t.signedLongest.user_pic,this.conDayIcon,this,RES.ResourceItem.TYPE_IMAGE)):(this.lable_continuousDay.text="连续签到",this.lable_fansName1.text="暂无",this.lable_reward.text="暂无",this.img_d1.visible=!1),t.signedCrit.user_id?(this.uid2=t.signedCrit.user_id,this.lable_fansName2.text=window.hexToDec(t.signedCrit.user_name),this.lable_reward2.text="奖励："+window.hexToDec(t.signedCrit.crit_sign_reward),this.img_d2.visible=!0,RES.getResByUrl(t.signedCrit.user_pic,this.critIcon,this,RES.ResourceItem.TYPE_IMAGE)):(this.lable_fansName2.text="暂无",this.img_d2.visible=!1,this.lable_reward2.text="暂无"),t.signedFirst.user_id?(this.uid3=t.signedFirst.user_id,this.lable_fansName3.text=window.hexToDec(t.signedFirst.user_name),this.lable_reward3.text="奖励："+window.hexToDec(t.signedFirst.group_first_sign_reward),this.img_d3.visible=!0,RES.getResByUrl(t.signedFirst.user_pic,this.firstDayIcon,this,RES.ResourceItem.TYPE_IMAGE)):(this.lable_fansName3.text="暂无",this.lable_reward3.text="暂无",this.img_d3.visible=!1);for(var a=t.signedUserArray,i=0;i<a.length;i++){var n=e.SignPersonIcon.produce();this.group_signPersonIcon.addChild(n)}for(var i=this.group_signPersonIcon.numElements-1;i>=0;i--){var s=this.group_signPersonIcon.getElementAt(i);s.setData(a[i])}},n.help_tap=function(){this.groupTip1.visible=!0,GameApp.Manager.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.help_end,this)},n.help_end=function(){this.groupTip1.visible=!1,GameApp.Manager.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.help_end,this)},n.btnSign=function(e){if(!this.allObj.isSigned){var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.group_openid+this.allObj.signInfo.id+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/signIn",{user_id:GameApp.Manager.dataManager.uid,group_openid:GameApp.Manager.dataManager.group_openid,id:this.allObj.signInfo.id,sign:t},function(e){1==e.st},!0,this)}},n.SignHaoZhao=function(e){if(this.allObj.isSigned){var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/inviteGroupFriends",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,sign:t},function(e){system.Share.share(e,function(e){1==e&&system.TipText.produce().open("发送成功")})},!0,this)}},n.signOK=function(e){console.log("签到返回值"),this.diaNumber=e.add_lucky_star,this.expNumber=e.each_sign_group_exp,e.isSignFrist&&(this.lable_getExpAndDia.text="获得"+e.add_lucky_star+"钻，"+e.each_sign_group_exp+"点群经验!",this.lable_getExpAndDia.visible=!0),e.isSignFrist||(this.lable_getExpAndDia.text="获得"+e.each_sign_group_exp+"点群经验!",this.lable_getExpAndDia.visible=!1),this.taskTip.x=202,this.taskTip.y=500,GameApp.Manager.dataManager.lucystar=e.lucky_star,GameApp.Manager.viewManager.gameMainUI.setLucky()},n.updatePOsAndStay=function(e,t){this.lable_signIn.text="今日已签到!",e>0&&(this.lable_getExpAndDia.text="获得"+e+"钻，"+t+"点群经验!")},n.setUpdateValue=function(t){if(t.group_openid==GameApp.Manager.dataManager.group_openid){1==t.isSignFirst&&(this.taskTip.show(t.add_lucky_star),this.addChild(this.taskTip)),console.log(t,"0000=");var a=e.SignPersonIcon.produce();this.group_signPersonIcon.addChild(a),console.log(t,"-------"),a.setData1(t),t.isSignedLongest&&(this.lable_continuousDay.text="连续"+t.userSignedNum+"天",this.lable_fansName1.text=GameApp.Manager.dataManager.user_name,this.lable_reward.text="奖励："+window.hexToDec(this.allObj.signedLongest.longest_sign_reward),this.img_d1.visible=!0,RES.getResByUrl(t.user_pic,this.conDayIcon,this,RES.ResourceItem.TYPE_IMAGE)),t.isTodaySignedCrit&&(this.lable_fansName2.text=GameApp.Manager.dataManager.user_name,this.lable_reward2.text="奖励："+window.hexToDec(this.allObj.signedCrit.crit_sign_reward),this.img_d2.visible=!0,RES.getResByUrl(t.user_pic,this.critIcon,this,RES.ResourceItem.TYPE_IMAGE)),t.isTodaySignedFrist&&(this.lable_fansName3.text=GameApp.Manager.dataManager.user_name,this.lable_reward3.text="奖励："+window.hexToDec(this.allObj.signedFirst.group_first_sign_reward),this.img_d3.visible=!0,RES.getResByUrl(t.user_pic,this.firstDayIcon,this,RES.ResourceItem.TYPE_IMAGE))}},n.conDayIcon=function(e){this.img_conDayIcon.texture=e},n.critIcon=function(e){this.img_critIcon.texture=e},n.firstDayIcon=function(e){this.img_firstDayIcon.texture=e},n.clear=function(){for(;this.group_signPersonIcon.numElements>0;){var t=this.group_signPersonIcon.getElementAt(this.group_signPersonIcon.numElements-1);e.SignPersonIcon.reclaim(t),t.parent&&t.parent.removeChild(t)}this.img_conDayIcon.texture=null,this.img_critIcon.texture=null,this.img_firstDayIcon.texture=null,this.scroll1.viewport.scrollV=0},n.btn_comeBack=function(){GameApp.Manager.controllerManager.signController.hide(),0==this.type?GameApp.Manager.controllerManager.gameMainController.show():GameApp.Manager.controllerManager.taskController.show()},a}(eui.Component);e.SignIn=t,egret.registerClass(t,"task.SignIn")}(task||(task={}));var signIn;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(e){this.type=e,this.loaded?this.initUI():this.loading()},n.initUI=function(){var e=this;this.signIn||(this.signIn=new task.SignIn);var t=this.signIn.group_signPersonIcon.numElements;for(console.log(t,"n");this.signIn.group_signPersonIcon.numElements>0;){var i=this.signIn.group_signPersonIcon.getElementAt(this.signIn.group_signPersonIcon.numElements-1);task.SignPersonIcon.reclaim(i),i.parent&&i.parent.removeChild(i)}this.BottomUIStage.addChild(this.signIn),this.signIn.type=this.type,this.signIn.setData(a.updataObj),1==a.updataObj.isSigned&&(this.diaNumber=this.signIn.diaNumber?this.signIn.diaNumber:a.updataObj.award,this.expNumber=this.signIn.expNumber?this.signIn.expNumber:a.updataObj.signInfo.each_sign_group_exp,this.signIn.updatePOsAndStay(this.diaNumber,this.expNumber)),0==a.updataObj.isSigned&&socketio.IoConnect.getInstance().sendMessage(10,{},function(t){console.log(t,"签到返回数据"),1==t.st&&(e.signIn.signOK(t.data),a.updataObj.isSigned=!0)},this)},a.init=function(e){this.updataObj=e,console.log(e,"---------初始化")},a.setData=function(t){if(6==t.type){console.log(t,"--------跟新的值"),GameApp.Manager.viewManager.sign.signIn?(GameApp.Manager.viewManager.sign.signIn.setUpdateValue(t),console.log("在的情况")):console.log("不在的情况"),t.group_openid!=GameApp.Manager.dataManager.group_openid||(this.updataObj.signedUserArray.push({user_pic:t.user_pic,user_id:t.user_id?t.user_id:t.uid}),t.isSignedLongest&&(e.SignInManager.updataObj.signedLongest.user_id=t.user_id?t.user_id:t.uid,e.SignInManager.updataObj.signedLongest.num=t.userSignedNum,e.SignInManager.updataObj.signedLongest.user_pic=t.user_pic,e.SignInManager.updataObj.signedLongest.user_name=t.user_name),t.isTodaySignedCrit&&(e.SignInManager.updataObj.signedCrit.user_id=t.user_id?t.user_id:t.uid,e.SignInManager.updataObj.signedCrit.user_pic=t.user_pic,e.SignInManager.updataObj.signedCrit.user_name=t.user_name),t.isTodaySignedFrist&&(e.SignInManager.updataObj.signedFirst.user_id=t.user_id?t.user_id:t.uid,e.SignInManager.updataObj.signedFirst.user_pic=t.user_pic,e.SignInManager.updataObj.signedFirst.user_name=t.user_name))}},n.hide=function(){this.signIn.parent&&(this.BottomUIStage.removeChild(this.signIn),this.signIn.clear())},n.loading=function(){this.initUI()},n.load_end=function(){this.loaded=!0,this.initUI()},a}(common.BaseView);e.SignInManager=t,egret.registerClass(t,"signIn.SignInManager")}(signIn||(signIn={}));var task;!function(e){var t=function(e){function t(){e.call(this),this.num=0,this.skinName="src/view/gameUI/task/signIn/signPersonIconSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){this.img_personIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){this.uid1>0&&console.log("点击里面"),console.log(this.uid1,GameApp.Manager.dataManager.bid_save,GameApp.Manager.dataManager.group_openid),userPanel.UserPanel.getInstance().open(this.uid1,GameApp.Manager.dataManager.bid_save,GameApp.Manager.dataManager.group_openid),e.stopPropagation()},this)},i.setData=function(e){RES.getResByUrl(e.user_pic,this.load_personIcon,this,RES.ResourceItem.TYPE_IMAGE),this.uid1=e.user_id,this.userId=e.user_id},i.setData1=function(e){RES.getResByUrl(e.user_pic,this.load_personIcon,this,RES.ResourceItem.TYPE_IMAGE),this.userId=e.user_id,this.uid1=e.uid},i.load_personIcon=function(e){this.img_personIcon.texture=e,this.img_personIcon.width=85,this.img_personIcon.height=85},i.clear=function(){this.img_personIcon.texture=null},t.cacheDict={},t}(eui.Component);e.SignPersonIcon=t,egret.registerClass(t,"task.SignPersonIcon")}(task||(task={}));var task;!function(e){var t=function(e){function t(){e.call(this),this.uid=0,this.skinName="src/view/gameUI/task/TaskHallofFameSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},i.tap=function(e){userPanel.UserPanel.getInstance().open(this.uid,GameApp.Manager.dataManager.bid_save,GameApp.Manager.dataManager.group_openid+""),e.stopPropagation()},i.setData=function(e,t){void 0===t&&(t=-1),this.uid=e.user_id,t>0?(this.bmpRank.source="p1_r"+t,this.bmpRank.visible=!0):this.bmpRank.visible=!1,RES.getResByUrl(e.user_pic,this.load_end,this,RES.ResourceItem.TYPE_IMAGE)},i.load_end=function(e){this.bmpIcon.source=e},i.clear=function(){this.bmpIcon.source=null},t.cacheDict={},t}(eui.Component);e.TaskHallofFame=t,egret.registerClass(t,"task.TaskHallofFame")}(task||(task={}));var task;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/task/TaskIconSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){},i.setText=function(e){this.bmp1.source="t_icon"+Math.ceil(e/9),this.bmp2.source="t_fst"+data.DataManager.getGroupLevelByLevel(e)},t}(eui.Button);e.TaskIcon=t,egret.registerClass(t,"task.TaskIcon")}(task||(task={}));var task;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/task/TaskItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.itmTtle.fontFamily="Heiti SC",this.itmRwd.fontFamily="Heiti SC",this.btnTxt.fontFamily="Heiti SC")},i.setData=function(e,t,a){this.url=e.img,RES.getResByUrl(this.url,this.load_end,this,RES.ResourceItem.TYPE_IMAGE);var i=window.hexToDec(e.name)+"("+window.hexToDec(e.desc)+"<font color=#fe5a4e>"+e.num+"</font>/"+e.need_num+")";this.itmTtle.textFlow=(new egret.HtmlTextParser).parser(i),this.itmRwd.text=this.getRwdText(e),0!=e.type?(this.taskBtn.visible=!1,this.btnTxt.visible=!1):this.signBtn(e,t,a)},i.signBtn=function(e,t,a){var i=this;0!=e.user_num&&(i.taskBtn.visible=!1,i.btnTxt.text="已签到",i.taskBtn.touchEnabled=!1),t.is_final&&e.num==e.need_num&&(i.taskBtn.fillColor=4934475,i.taskBtn.visible=!1,i.btnTxt.text="已完成",i.taskBtn.touchEnabled=!1),0==e.type&&this.taskBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var n=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/signIn",{user_id:GameApp.Manager.dataManager.uid,group_openid:GameApp.Manager.dataManager.group_openid,sign:n},function(n){if(1==n.st){n.add_lucky_star>0&&(system.TipText.produce().open("钻石+"+n.add_lucky_star),GameApp.Manager.dataManager.lucystar=n.lucky_star),GameApp.Manager.viewManager.gameMainUI.setLucky(),i.taskBtn.touchEnabled=!1,i.taskBtn.fillColor=4934475,i.taskBtn.visible=!1,i.btnTxt.text="已签到";var s=window.hexToDec(e.name)+"("+window.hexToDec(e.desc)+"<font color=#fe5a4e>"+(e.num+1)+"</font>/"+e.need_num+")";if(i.itmTtle.textFlow=(new egret.HtmlTextParser).parser(s),console.log(e.num+1,e.need_num),(e.num+1).toString()==e.need_num){if(!t.is_final){var s=window.hexToDec(e.name)+"("+window.hexToDec(e.desc)+"<font color=#fe5a4e>"+(e.num+1)+"</font>/"+t.next.count+")";i.itmTtle.textFlow=(new egret.HtmlTextParser).parser(s),this.itmRwd.text=this.getRwdText(t.next),a.lb2.text="等级"+t.groupInfo.level+"  经验:"+(t.groupInfo.exp+e.group_exp)+"/"+t.groupInfo.need_exp}t.groupInfo.exp+e.group_exp>=t.groupInfo.need_exp&&(a.lb2.text="等级"+(t.groupInfo.level+1)+"  经验:0/"+t.groupInfo.next_exp)}}},!0,this)},this)},i.getRwdText=function(e){var t="奖励:";return e.group_exp&&(t+="本群经验+"+e.group_exp+" "),e.intimate&&(t+="亲密度+"+e.intimate+" "),e.lucky_star&&(t+="钻石+"+e.lucky_star+" "),0==e.type&&(t+="首签+10钻石 "),t},i.load_end=function(e){this.itmImgId.texture=e},i.clear=function(){this.itmImgId.source=null,this.itmTtle.text="",this.itmRwd.text=""},t.cacheDict={},t}(eui.Component);e.TaskItem=t,egret.registerClass(t,"task.TaskItem")}(task||(task={}));var task;!function(e){var t=function(t){function a(a){t.call(this,a),this.taskOpenManager=new e.TaskOpenManager(a),this.giftCfManager=new e.GiftManager(a)}__extends(a,t);var i=(__define,a),n=i.prototype;return a.go1=function(){GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.taskController.show(0)},a.go2=function(){GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.taskController.show(1)},a.go3=function(){GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.controllerManager.taskController.show(2)},a.groupMass=function(){GameApp.Manager.viewManager.taskManager.taskUI&&GameApp.Manager.viewManager.taskManager.taskUI.parent&&GameApp.Manager.viewManager.taskManager.taskUI.groupMass()},n.show=function(t){void 0===t&&(t=-1);var a=this;switch(this.taskUI||(this.taskUI=new e.TaskUI),t){case 0:this.taskUI.btn1_tap();break;case 2:this.taskUI.btn3_tap();break;default:this.BottomUIStage.addChild(this.taskUI);var i=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getGroupData",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,sign:i},function(e){1==e.st&&a.taskUI.setData(e.data)},!0,this)}},n.hide=function(){this.taskUI&&(this.taskUI.parent&&this.taskUI.parent.removeChild(this.taskUI),this.taskUI.clear())},a}(common.BaseView);e.TaskManager=t,egret.registerClass(t,"task.TaskManager")}(task||(task={}));var task;!function(e){var t=function(t){function a(e){t.call(this,e)}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(t,a){void 0===a&&(a=null);var i=this;if(this.taskOpenUI||(this.taskOpenUI=new e.TaskOpenUI),this.BottomUIStage.addChild(this.taskOpenUI),a)i.taskOpenUI.setData(a);else{var n=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.group_openid+GameApp.Manager.dataManager.bid_save+t+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getOpenTaskDetail",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid_save,group_openid:GameApp.Manager.dataManager.group_openid,open_task_id:t,sign:n},function(e){1==e.st&&(e.data.type=1,i.taskOpenUI.setData(e.data))},!0,this)}},n.hide=function(){this.taskOpenUI&&(this.taskOpenUI.parent.removeChild(this.taskOpenUI),this.taskOpenUI.clear())},a}(common.BaseView);e.TaskOpenManager=t,egret.registerClass(t,"task.TaskOpenManager")}(task||(task={}));var task;!function(e){var t=function(t){function a(){t.call(this),this.tid="",this.url="",this.skinName="src/view/gameUI/task/taskoepn/TaskOpenUISkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lbl1.fontFamily="Heiti SC",this.lbl2.fontFamily="Heiti SC",this.lbl3.fontFamily="Heiti SC",this.lbl4.fontFamily="Heiti SC",this.lbl6.fontFamily="Heiti SC",this.lbl7.fontFamily="Heiti SC",this.lbl8.fontFamily="Heiti SC",this.lbl9.fontFamily="Heiti SC",this.lbl10.fontFamily="Heiti SC",this.lbl11.fontFamily="Heiti SC"),this.hideg1(),this.hideg2(),this.scroll1.height=this.stage.stageHeight,this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnGo_tap,this),this.btnUpload.addEventListener(egret.TouchEvent.TOUCH_TAP,this.upload_tap,this)},n.disg1=function(){this.group2.addChild(this.group2_1)},n.disg2=function(){this.group2.addChild(this.group2_2)},n.hideg1=function(){this.group2_1.parent&&this.group2_1.parent.removeChild(this.group2_1)},n.hideg2=function(){this.group2_2.parent&&this.group2_2.parent.removeChild(this.group2_2)},n.upload_tap=function(){selectImage(this.selectedHandler,this,250)},n.selectedHandler=function(e,t,a,i){e.startx(),RES.getResByUrl(t,e.compFunc,e,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(i,e.compFunc1,e,RES.ResourceItem.TYPE_IMAGE)},n.compFunc=function(e){var t=e.toDataURL("image/jpeg");this.largeImg=t,this.socketsend()},n.compFunc1=function(e){var t=e.toDataURL("image/jpeg");this.smallImg=t,this.socketsend()},n.socketsend=function(){var e=this;0==this.obj.info.need_pic_feedback?(console.log("fasong"),socketio.IoConnect.getInstance().upload(4,{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,open_task_id:e.tid,imgData:{}},function(t){1==t.st&&(e.hideg1(),e.disg2()),e.groupTip.visible=!1,e.endtx()},this)):this.largeImg&&this.smallImg&&socketio.IoConnect.getInstance().upload(4,{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,open_task_id:e.tid,imgData:{smallImg:e.smallImg,largeImg:e.largeImg}},function(t){console.log("socketcall:",t),1==t.st&&(e.hideg1(),e.disg2()),e.groupTip.visible=!1,e.endtx()},this)},n.btnGo_tap=function(){this.obj.isFinish||this.socketsend(),-1==this.url.indexOf("http")?window.location.href="http://"+this.url:window.location.href=""+this.url},n.setData=function(t){switch(this.obj=t,console.log(t.type),t.type){case 1:this.tid=t.info.open_task_id,this.lbl1.text=window.hexToDec(t.info.title),t.info.content?(this.groupData.addChildAt(this.group0,1),this.lbl3.text=window.hexToDec(t.info.content)):t.info.task_pic.length>0?this.groupData.addChildAt(this.group0,1):this.group0.parent&&this.group0.parent.removeChild(this.group0),this.lbl7.text="已完成("+t.userArray.length+"/"+t.info.member_num+")",this.url=t.info.link,this.obj.isFinish?(this.hideg1(),this.disg2()):0==this.obj.info.need_pic_feedback?(this.hideg1(),this.hideg2()):(this.disg1(),this.hideg2());var a=t.info.task_pic;if(a)for(var i=0;i<a.length;i++){var n=new module.BaseEuiImage;this.groupTaskImg.addChild(n),n.data=a[i],n.loadPic(a[i].smallImg),n.width=156,n.height=250,n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.item1_tap,this)}var s=t.flowerArray;if(s)if(s.length>0){this.group1.visible=!0;for(var i=0;i<s.length;i++){var r=e.TaskHallofFame.produce();this.groupHeadFlower.addChild(r)}for(var i=s.length-1;i>=0;i--){var r=this.groupHeadFlower.getElementAt(i);r.setData(s[i])}}else this.group1.visible=!1;var o=t.userArray;if(o){for(var i=0;i<o.length;i++){var r=e.TaskHallofFame.produce();this.groupHeadGroup.addChild(r)}for(var i=o.length-1;i>=0;i--){var r=this.groupHeadGroup.getElementAt(i);r.setData(o[i])}}this.group1.y=this.lbl3.y+this.lbl3.textHeight+50,t.pic?RES.getResByUrl(t.pic,this.load_end,this,RES.ResourceItem.TYPE_IMAGE):this.group2.y=this.group1.y+110+30,this.group3.y=this.group2.y+213+25;break;case 2:this.tid=t.extension_task_id,this.lbl1.text=window.hexToDec(t.title),this.group1.parent&&this.group1.parent.removeChild(this.group1),this.group2.parent&&this.group2.parent.removeChild(this.group2),this.group3.parent&&this.group3.parent.removeChild(this.group3);var a=t.task_pic;if(a)for(var i=0;i<a.length;i++){var n=new module.BaseEuiImage;this.groupTaskImg.addChild(n),n.data=a[i],n.loadPic(a[i].smallImg),n.width=156,n.height=250,n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.item1_tap,this)}}},n.item1_tap=function(e){var t=e.currentTarget;this.disLarge(t.data.largeImg)},n.disLarge=function(e){console.log(e),RES.getResByUrl(e,this.loadlarge_end,this,RES.ResourceItem.TYPE_IMAGE),this.startx()},n.loadlarge_end=function(e){this.bmpLarge.source=e,this.groupLarge.visible=!0,this.endtx(),this.groupTip.visible=!1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addLargeLis,this)},n.addLargeLis=function(){this.groupLarge.visible=!1,this.bmpLarge.source=null,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addLargeLis,this)},n.startx=function(){this.groupTip.visible=!0,this.bmpTX.visible=!0,egret.Tween.get(this.bmpTX,{loop:!0}).to({rotation:360},1e3)},n.endtx=function(){this.bmpTX.visible=!1,egret.Tween.removeTweens(this.bmpTX)},n.load_end=function(e){},n.clear=function(){for(this.lbl1.text="",this.lbl3.text="",this.smallImg="",this.largeImg="",this.hideg1(),this.hideg2(),this.groupData.addChildAt(this.group1,2),this.groupData.addChildAt(this.group2,3),this.groupData.addChildAt(this.group3,4);this.groupTaskImg.numElements>0;){var t=this.groupTaskImg.getElementAt(this.groupTaskImg.numElements-1);t.parent&&t.parent.removeChild(t)}for(;this.groupHeadGroup.numElements>0;){var a=this.groupHeadGroup.getElementAt(this.groupHeadGroup.numElements-1);e.TaskHallofFame.reclaim(a),a.parent&&a.parent.removeChild(a)}for(;this.groupHeadFlower.numElements>0;){var a=this.groupHeadFlower.getElementAt(this.groupHeadFlower.numElements-1);e.TaskHallofFame.reclaim(a),a.parent&&a.parent.removeChild(a)}},n.close=function(){GameApp.Manager.viewManager.taskManager.taskOpenManager.hide(),GameApp.Manager.controllerManager.taskController.show()},a}(eui.Component);e.TaskOpenUI=t,egret.registerClass(t,"task.TaskOpenUI")}(task||(task={}));var task;!function(e){var t=function(e){function t(){e.call(this),this.type=0,this.tid=0,this.skinName="src/view/gameUI/task/TaskOpenSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblName.fontFamily="Heiti SC"),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},i.tap=function(){switch(this.type){case 1:GameApp.Manager.controllerManager.taskController.hide(),GameApp.Manager.viewManager.taskManager.taskOpenManager.show(this.tid);break;case 2:GameApp.Manager.controllerManager.taskController.hide(),GameApp.Manager.viewManager.taskManager.taskOpenManager.show(this.tid,this.obj)}},i.setData=function(e,t){switch(this.type=t,this.obj=e,this.obj.type=t,this.type){case 1:this.tid=e.open_task_id,this.lblName.text=window.hexToDec(e.title)+"("+e.finish_count+"/"+e.member_num+")";break;case 2:this.tid=e.extension_task_id,this.lblName.text=window.hexToDec(e.title)}},i.clear=function(){this.lblName.text=""},t.cacheDict={},t}(eui.Component);e.TaskOpen=t,egret.registerClass(t,"task.TaskOpen")}(task||(task={}));var task;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/task/TaskTipSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.show=function(e){void 0===e&&(e=10),this.alpha=1,this.lbl2.text="钻石"+e,egret.Tween.get(this).wait(1500).to({alpha:0},500).call(this.close)},i.close=function(){this.parent&&this.parent.removeChild(this)},t}(eui.Component);e.TaskTip=t,egret.registerClass(t,"task.TaskTip")}(task||(task={}));var task;!function(e){var t=function(t){function a(){t.call(this),this.taskOpenArr=[],this.state="1",this.disHavaTask=0,this.skinName="src/view/gameUI/task/TaskUISkin.exml",this.iconNow=new e.TaskIcon,this.iconNext=new e.TaskIcon,this.xuanGrop=new groupXuan.TaskGroupXuan
}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lbl3.fontFamily="Heiti SC",this.lbl4.fontFamily="Heiti SC",this.lbl5.fontFamily="Heiti SC",this.lbl7.fontFamily="Heiti SC",this.lbl8.fontFamily="Heiti SC",this.lbl9.fontFamily="Heiti SC",this.lbl10.fontFamily="Heiti SC",this.lbl11.fontFamily="Heiti SC",this.lblr1.fontFamily="Heiti SC",this.lblExp.fontFamily="Heiti SC",this.lblSignNum.fontFamily="Heiti SC",this.lblJjState.fontFamily="Heiti SC",this.lblGiftNum.fontFamily="Heiti SC",this.lblGroupName.fontFamily="Heiti SC",this.lable_publish.fontFamily="Heiti SC",this.lable_shenYue.fontFamily="Heiti SC",this.lable_guangLi.fontFamily="Heiti SC",this.lable_qunTitle.fontFamily="Heiti SC",this.lblGroupBook.fontFamily="Heiti SC",this.lable_starDes.fontFamily="Heiti SC",this.lable_buy.fontFamily="Heiti SC",this.lable_xuangroup.fontFamily="Heiti SC",this.lable_joinGroup.fontFamily="Heiti SC"),this.lable_starDes.textFlow=(new egret.HtmlTextParser).parser("繁星特惠福利<font color = 0xff0000>[1元真爱礼包30钻]</font>"),this.scroll1.height=this.stage.stageHeight,this.groupData.addChildAt(this.iconNow,3),this.groupData.addChildAt(this.iconNext,3),this.iconNow.x=55,this.iconNow.y=130,this.iconNext.x=580,this.iconNext.y=130,this.btnClose2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close2,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn1_tap,this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn2_tap,this),this.btn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn3_tap,this),this.btn_publish.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.controllerManager.groupManagerController.show("发布任务"),GameApp.Manager.controllerManager.taskController.hide(),GameApp.Manager.viewManager.groupManager.hostManager.task_publish()},this),this.btn_shenYue.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.controllerManager.groupManagerController.show("审阅任务"),GameApp.Manager.controllerManager.taskController.hide(),GameApp.Manager.viewManager.groupManager.hostManager.task_shenYue()},this),this.btn_guangLi.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.controllerManager.groupManagerController.show("管理任务"),GameApp.Manager.controllerManager.taskController.hide(),GameApp.Manager.viewManager.groupManager.hostManager.task_guangLi()},this),this.btn_joinGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){aler.AlertPanel.getInstance().show("更改入驻明星","只能更改一次且本群贡献清零，请谨慎使用","取消","确定",function(e){"ok"==e&&(GameApp.Manager.controllerManager.taskController.hide(),GameApp.Manager.viewManager.starPageManager.show(1))},this)},this),this.btnSelf.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){userPanel.UserPanel.getInstance().open(GameApp.Manager.dataManager.uid,GameApp.Manager.dataManager.bid,GameApp.Manager.dataManager.group_openid),e.stopPropagation()},this),this.btnGroupBook.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.controllerManager.taskController.hide(),system.GroupBookUI.getInstance().show()},this);var e=this;this.group_puyLove.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){a.isCanByLiBao?pay.PayUI.getInstance().btn8_tap():system.TipText.produce().open("一天只能买一次",800,500)},this),this.btn_Xuangroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.xuanGrop.setData(),e.addChild(e.xuanGrop)},this)},a.changeCanBuy=function(){this.isCanByLiBao=!0},a.changePosOfTask=function(){this.stars_guard_valid=!0},n.setData=function(e){1==GameApp.Manager.dataManager.resetState?this.group_join.visible=!1:0==GameApp.Manager.dataManager.resetState&&(this.group_join.visible=!0),this.disHavaTask=1,this.obj=e;var t=e.groupInfo;this.lblGroupName.text=window.hexToDec(t.group_name),this.iconNow.setText(t.level),this.iconNext.setText(t.level+1),this.lblExp.text=t.exp+"/"+t.need_exp,this.pro1.value=t.exp/t.need_exp*100,this.lblSignNum.text="每日签到("+e.signedUserCount+"/"+t.member_num+")",this.jjstate(),this.setGiftCfPro(),this.setTaskOpen(),this.setCelebrity();var i=355,n=95,s=172,r=98;this.groupOne.y=i,this.groupBottom.y=i,a.isCanByLiBao?(this.groupOne.y+=n,this.groupBottom.y+=n,GameApp.Manager.dataManager.is_owner&&(this.groupBottom.y+=s,(a.stars_guard_valid||0==GameApp.Manager.dataManager.resetState)&&(this.groupBottom.y+=r,a.stars_guard_valid&&(this.group_xuanqun.visible=!0)))):GameApp.Manager.dataManager.is_owner&&(this.groupBottom.y+=s,(a.stars_guard_valid||0==GameApp.Manager.dataManager.resetState)&&(this.groupBottom.y+=r,a.stars_guard_valid&&(this.group_xuanqun.visible=!0))),GameApp.Manager.dataManager.is_owner?this.group_book.visible=!0:this.group_book.visible=!1},n.changeLiBaoPos=function(){a.isCanByLiBao=!1,GameApp.Manager.dataManager.is_owner?(this.groupOne.y=356,this.groupBottom.y=630,this.group_xuanqun.visible=!0):this.groupBottom.y=355},n.reSetAllPos=function(){this.groupBottom.y=769,this.groupOne.y=486},n.setCelebrity=function(){this.clearMRT();var t=this.obj.celebrityArray;if(t)for(var a=0;a<t.length;a++){var i=t[a],n=e.TaskHallofFame.produce();switch(this.groupMRT.addChild(n),a){case 0:case 1:case 2:n.setData(i,a+1);break;default:n.setData(i)}}},n.setTaskOpen=function(){this.clearTaskOpen();var t=this.obj.openTaskArray;if(t)for(var a=0;a<t.length;a++){var i=t[a],n=e.TaskOpen.produce();n.y=483+160*a,this.groupBottom.addChild(n),n.setData(i,1),this.taskOpenArr.push(n)}var s=this.obj.extensionTaskArray;if(s)for(var a=0;a<s.length;a++){var i=s[a],n=e.TaskOpen.produce();n.y=483+160*(a+t.length),this.groupBottom.addChild(n),n.setData(i,2),this.taskOpenArr.push(n)}},n.setGiftCfPro=function(){this.lblGiftNum.text=window.hexToDec(e.GiftCf.obj.current.info.name)+"(进度"+parseInt(e.GiftCf.obj.current.info.num/e.GiftCf.obj.current.info.need_num*100+"")+"%)",this.lbl5.text=""+GameApp.Manager.dataManager.star_name+"+"+e.GiftCf.obj.current.info.star_hot+"热度,本群+"+e.GiftCf.obj.current.info.group_exp+"经验"},n.groupMass=function(){this.jjstate()},n.jjstate=function(){if(this.timeVar&&clearInterval(this.timeVar),e.AggregationIcon1.Allobj.date>0){var t=this;this.task_time=e.AggregationIcon1.Allobj.date,this.task_timeJilu=(new Date).getTime();var a=this.task_time-(this.task_timeJilu-e.AggregationIcon1.crrentTime);a>0&&(this.timeVar=setInterval(function(){var i=(new Date).getTime(),n=a-(i-t.task_timeJilu);t.lblJjState.textFlow=(new egret.HtmlTextParser).parser("粉丝集结号 (<font color=#ff0000>不可集结 "+Tools.getInstance().formatTime2(n)+"</font>)"),0>=n&&(clearInterval(t.timeVar),t.lblJjState.text="粉丝集结号(发起集结)",e.AggregationIcon1.Allobj.date=0)},980,this),t.lblJjState.textFlow=(new egret.HtmlTextParser).parser("粉丝集结号 (<font color=#ff0000>不可集结 "+Tools.getInstance().formatTime2(a)+"</font>)"))}else e.AggregationIcon1.Allobj&&e.AggregationIcon1.Allobj.time?this.lblJjState.text="粉丝集结号(集结中)":this.lblJjState.text="粉丝集结号(发起集结)"},n.help=function(e){var t=e.data;if("open"==t.state)switch(t.type+""){case"1":this.groupTip1.visible=!0,console.log("open1");break;case"3":this.groupTip3.visible=!0,console.log("open3")}else switch(t.type+""){case"1":this.groupTip1.visible=!1,console.log("close1");break;case"3":this.groupTip3.visible=!1,console.log("close3")}},n.signOK=function(e){console.log("签到成功:",e.data);var t=e.data,a=this,i=this.obj.signInfo.each_sign_group_exp;this.lblSignNum.text=this.obj.signedUserArray.length+"/"+this.obj.groupInfo.member_num,GameApp.Manager.dataManager.lucystar=t.lucky_star,GameApp.Manager.viewManager.gameMainUI.setLucky(),this.obj.groupInfo.exp+i+t.add_group_exp>=this.obj.groupInfo.need_exp?(this.lblExp.text=this.obj.groupInfo.exp+i+t.add_group_exp-this.obj.groupInfo.need_exp+"/"+this.obj.groupInfo.next_exp,this.pro1.slideDuration=0,this.pro1.value=(this.obj.groupInfo.exp+i+t.add_group_exp-this.obj.groupInfo.need_exp)/this.obj.groupInfo.next_exp*100,this.obj.groupInfo.level=this.obj.groupInfo.level+1,this.iconNow.setText(this.obj.groupInfo.level),this.iconNext.setText(this.obj.groupInfo.level+1),this.obj.groupInfo.exp=this.obj.groupInfo.exp+i-this.obj.groupInfo.need_exp,this.obj.groupInfo.need_exp=this.obj.groupInfo.next_exp,setTimeout(function(){a.pro1.slideDuration=1500},this)):(this.lblExp.text=this.obj.groupInfo.exp+i+t.add_group_exp+"/"+this.obj.groupInfo.need_exp,this.pro1.value=(this.obj.groupInfo.exp+i+t.add_group_exp)/this.obj.groupInfo.need_exp*100,this.obj.groupInfo.exp=this.obj.groupInfo.exp+i)},n.addGroupExp=function(e){var t=this;e.group_exp<this.obj.groupInfo.exp&&(this.pro1.slideDuration=0,setTimeout(function(){t.pro1.slideDuration=1500},this)),this.obj.groupInfo.exp=e.group_exp,this.obj.groupInfo.level=e.group_level,this.obj.groupInfo.need_exp=e.group_need_exp,this.obj.groupInfo.next_exp=e.group_next_exp,this.lblExp.text=this.obj.groupInfo.exp+"/"+this.obj.groupInfo.need_exp,this.pro1.value=this.obj.groupInfo.exp/this.obj.groupInfo.need_exp*100,this.iconNow.setText(this.obj.groupInfo.level),this.iconNext.setText(this.obj.groupInfo.level+1)},n.btn1_tap=function(){GameApp.Manager.controllerManager.taskController.hide(),GameApp.Manager.controllerManager.signController.show(1)},n.btn2_tap=function(t){console.log(e.AggregationIcon1.Allobj,"点击"),e.AggregationIcon1.Allobj.date>0||(e.AggregationIcon1.Allobj.time?(GameApp.Manager.controllerManager.taskController.hide(),GameApp.Manager.controllerManager.aggregationController.show(1,2)):(GameApp.Manager.controllerManager.taskController.hide(),GameApp.Manager.controllerManager.aggregationController.show(1,1)))},n.btn3_tap=function(){GameApp.Manager.viewManager.taskManager.giftCfManager.show(1),GameApp.Manager.controllerManager.taskController.hide()},n.btnGroupRank_tap=function(){GameApp.Manager.controllerManager.rankGroupController.show(),GameApp.Manager.controllerManager.taskController.hide()},n.btnGXRank_tap=function(){GameApp.Manager.controllerManager.rankGroupContributionController.show(1),GameApp.Manager.controllerManager.taskController.hide()},n.load_end=function(e){},n.getStringLen=function(e){for(var t=0,a="",i=0;i<e.length;i++){var n=e.charCodeAt(i);t+=n>=0&&128>=n?1:2,84>t&&(a+=e[i])}return a},n.clear=function(){this.scroll1.viewport.scrollV=0,clearInterval(this.timeVar),this.clearTaskOpen(),this.clearMRT()},n.clearTaskOpen=function(){for(;this.taskOpenArr.length>0;){var t=this.taskOpenArr.pop();e.TaskOpen.reclaim(t),t.parent&&t.parent.removeChild(t)}},n.clearMRT=function(){for(;this.groupMRT.numElements>0;){var t=this.groupMRT.getElementAt(this.groupMRT.numElements-1);e.TaskHallofFame.reclaim(t),t.parent&&t.parent.removeChild(t)}},n.forwardMain=function(e){this.close()},n.close=function(){this.pro1.value=0,this.groupOne.y=355,this.groupBottom.y=355,this.groupTip1.visible=!1,this.groupTip3.visible=!1,this.close2(),GameApp.Manager.controllerManager.gameMainController.show(),GameApp.Manager.controllerManager.taskController.hide()},n.close2=function(){this.groupR.visible=!1,this.rectTip.visible=!1},a.isCanByLiBao=!1,a.stars_guard_valid=!1,a}(eui.Component);e.TaskUI=t,egret.registerClass(t,"task.TaskUI")}(task||(task={}));var upload;!function(e){var t=function(t){function a(){t.call(this),this.uid=0,this.votes=0,this._tx=0,this._ty=0,this.disNum=9,this.index=0,this.arr=[],this.skinName="src/view/gameUI/upload/UploadSkin.exml",this.bmpIcon=new module.BaseCircleImage,this.bmpIcon.x=132,this.bmpIcon.y=56}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){this.scroll1.height=egret.MainContext.instance.stage.stageHeight-100,this.groupTip.visible=!1,this.bmpTX.visible=!1,this.groupRight.addChild(this.bmpIcon),this.bmpLargeIcon=new module.BaseCircleImage,this.bmpLargeIcon.x=50,this.bmpLargeIcon.y=10,this.groupLargeButtom.addChild(this.bmpLargeIcon),this.groupLargeButtom.y=this.stage.stageHeight-100,Tools.getInstance().isIphone()&&(this.lbl0.fontFamily="Heiti SC",this.lbl1.fontFamily="Heiti SC",this.lbl2.fontFamily="Heiti SC",this.lbl3.fontFamily="Heiti SC",this.lbl4.fontFamily="Heiti SC",this.lbl5.fontFamily="Heiti SC",this.lbl6.fontFamily="Heiti SC",this.lblHot.fontFamily="Heiti SC",this.lblLargeName.fontFamily="Heiti SC",this.lblLargeGroupName.fontFamily="Heiti SC"),this.btnUpload.addEventListener(egret.TouchEvent.TOUCH_TAP,this.upload,this),this.btnSend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.send_tap,this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.bmpHeadImg.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.disLarge(this.current.img,this.current.upload_user_pic,window.hexToDec(this.current.upload_user_name),window.hexToDec(this.current.upload_group_name))},this),this.scroll1.addEventListener(eui.UIEvent.CHANGE,this.change,this)},n.change=function(){var e=0==this.index?this.arr[0]:this.arr[9*this.index-9],t=9*(this.index+1)>=this.arr.length?this.arr[this.arr.length-1]:this.arr[9*(this.index+1)];this.index<this.arr.length/9-1&&(console.log(this.scroll1.viewport.scrollV+" "+e.y+" "+t.y+" "+(this.scroll1.height-587)),this.scroll1.viewport.scrollV>=t.y-(this.scroll1.height-587)&&(console.log("+++"),this.index++,this.dis())),this.index>0&&this.scroll1.viewport.scrollV<e.y+587&&(console.log("----"),this.index--,this.dis())},n.dis=function(){for(var e=0==this.index?0:9*this.index-9,t=9*(this.index+1),a=this.arr.length-1;a>=0;a--){var i=this.arr[a];a>=e&&t>a?(this.groupData.addChild(i),-1==i.uid&&i.setData(i.obj)):i.parent&&i.parent.removeChild(i)}},n.disLarge=function(e,t,a,i){console.log(e),RES.getResByUrl(e,this.loadlarge_end,this,RES.ResourceItem.TYPE_IMAGE),this.lblLargeName.text=a,this.lblLargeGroupName.text="所属群:"+i,this.bmpLargeIcon.setData(t,80,0,0,2),this.startx()},n.loadlarge_end=function(e){this.bmpLarge.source=e,this.groupLarge.visible=!0,this.endtx(),this.groupTip.visible=!1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addLargeLis,this)},n.addLargeLis=function(){this.groupLarge.visible=!1,this.bmpLarge.source=null,this.bmpLargeIcon.clear(),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addLargeLis,this)},n.upload=function(){selectImageUpload(this.selectedHandler,this)},n.selectedHandler=function(t,a,i,n,s,r,o){e.UploadDesc.getInstance().open(a,n,s,r,o)},n.compFunc=function(e){},n.send_tap=function(){if(GameApp.Manager.dataManager.lucystar>0){var e=this.lblHot.parent.localToGlobal(this.lblHot.x,this.lblHot.y);this._tx=e.x+50,this._ty=e.y;var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+this.current.id+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/starImagesVote",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,id:this.current.id,sign:t},function(e){this.starImagesVoteCall(e)},!0,this)}else aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.uploadController.hide,0)},this)},n.starImagesVoteCall=function(e){switch(e.st){case 1:this.lblHot.text=e.votes,this.votes=e.votes,GameApp.Manager.dataManager.lucystar=e.lucky_star,flower.FlowerUI.getInstance().setLucky(),this.startip();break;case-1:aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.uploadController.hide,0)},this)}},n.item_send=function(t,a){if(0==t){if(this.votes<a){var i=this.groupData.getElementAt(0),n=e.UploadItem.produce();this.groupData.addChildAt(n,0),n.setData(this.current),this.current=i.obj,this.setD(),i.parent&&(i.parent.removeChild(i),e.UploadItem.reclaim(i))}}else{var s=this.groupData.getElementAt(t-1),r=this.groupData.getElementAt(t);s.votes<a&&(this.groupData.removeChildAt(t),this.groupData.addChildAt(r,t-1))}},n.startip=function(){var e=system.TipText1.produce("1");e.x=this._tx,e.y=this._ty,e.setData("+1",28,65280),this.addChild(e),egret.Tween.get(e).wait(500).to({y:e.y-50,alpha:0},500).call(function(){system.TipText1.reclaim(e),e.parent&&e.parent.removeChild(e)},this)},n.startx=function(){this.groupTip.visible=!0,this.bmpTX.visible=!0,egret.Tween.get(this.bmpTX,{loop:!0}).to({rotation:360},1e3)},n.endtx=function(){this.bmpTX.visible=!1,egret.Tween.removeTweens(this.bmpTX)},n.setData=function(t){this.obj=t;for(var a=0,i=0,n=0;n<t.img_list.length;n++){t.img_list[n];if(0==n)this.current=t.img_list[0];else{var s=e.UploadItem.produce();s.setObj(t.img_list[n]),s.x=0+i%3*244,s.y=378*a,i++,i%3==0&&a++,this.arr.push(s)}}this.dis(),this.setD(),this.groupData.height=388*Math.ceil((t.img_list.length-1)/3)},n.setD=function(){this.lblHot.text=this.current.votes,this.votes=this.current.votes,this.bmpIcon.setData(this.current.upload_user_pic,102,0,0,2),this.lbl2.text=Tools.getInstance().getStringLen(window.hexToDec(this.current.upload_user_name),15),this.lbl3.text="("+window.hexToDec(this.current.upload_group_name)+")",this.btnLevel.icon=data.DataManager.getintimateIcon(this.current.intimate_level),this.btnLevel.label=data.DataManager.getintimateLevel(this.current.intimate_level)+"",RES.getResByUrl(this.current.thumbnail_img,this.load_end,this,RES.ResourceItem.TYPE_IMAGE),GameApp.Manager.dataManager.back_img!=this.current.img&&(GameApp.Manager.dataManager.back_img=this.current.img,GameApp.Manager.viewManager.backGround.loadPic(this.current.img))},n.load_end=function(e){this.bmpHeadImg.texture=e,e.textureWidth/e.textureHeight>326/523?this.bmpHeadImg.scaleX=this.bmpHeadImg.scaleY=326/e.textureWidth:this.bmpHeadImg.scaleX=this.bmpHeadImg.scaleY=523/e.textureHeight},n.clear=function(){for(;this.groupData.numElements>0;){var t=this.groupData.getElementAt(this.groupData.numElements-1);e.UploadItem.reclaim(t),t.parent&&t.parent.removeChild(t)}this.lblHot.text="",this.lbl2.text="",this.lbl3.text="",this.arr=[],this.scroll1.viewport.scrollV=0},n.close=function(){this.bmpTX.visible=!1,this.groupTip.visible=!1,GameApp.Manager.controllerManager.uploadController.hide(),GameApp.Manager.controllerManager.rankStarController.show()},a}(eui.Component);e.Upload=t,egret.registerClass(t,"upload.Upload")}(upload||(upload={}));var upload;!function(e){var t=function(e){function t(){e.call(this),this.largebase64="",this.smallbase64="",this.bmptap=!1,this.touchX=0,this.touchY=0,this.bmpX=141,this.bmpY=130,this.k="",this.skinName="src/view/gameUI/upload/UploadDescSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lbl1.fontFamily="Heiti SC"),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.bmpImg.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.bmp_begin,this),this.bmpImg.addEventListener(egret.TouchEvent.TOUCH_END,this.bmp_end,this),this.btnSC.addEventListener(egret.TouchEvent.TOUCH_TAP,this.drawtofile,this)},i.drawtofile=function(){var e=this,t=224,a=358,i=(141-this.bmpImg.x)/this.bmpImg.scaleX/this.bmpImg.width*this.w,n=(130-this.bmpImg.y)/this.bmpImg.scaleX/this.bmpImg.height*this.h,s=this.w*(468/(this.bmpImg.width*this.bmpImg.scaleX)),r=this.h*(833/(this.bmpImg.height*this.bmpImg.scaleX)),o=0,h=0,l=468,g=833;setSmallImg(this.drawtosmall,this,this.image,468/this.bmpImg.scaleX,833/this.bmpImg.scaleX,t,a,i,n,s,r,o,h,l,g),e.startx()},i.drawtosmall=function(e,t,a){RES.getResByUrl(t,e.largecompFunc,e,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(a,e.smallcompFunc,e,RES.ResourceItem.TYPE_IMAGE)},i.largecompFunc=function(e){this.largebase64=e.toDataURL("image/jpeg"),this.largebase64&&this.smallbase64&&this.send()},i.smallcompFunc=function(e){this.smallbase64=e.toDataURL("image/jpeg"),this.largebase64&&this.smallbase64&&this.send()},i.send=function(){var e=this;(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");socketio.IoConnect.getInstance().upload(2,{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,imgData:{largeImg:this.largebase64,smallImg:this.smallbase64}},function(t){1==t.st?aler.AlertPanel1.getInstance().show("","提交成功","确定",function(){e.groupTip.visible=!1,e.close()},this):aler.AlertPanel1.getInstance().show("","提交失败","确定",function(){e.groupTip.visible=!1,e.close()},this),e.endtx()},this)},i.startx=function(){this.groupTip.visible=!0,this.bmpTX.visible=!0,egret.Tween.get(this.bmpTX,{loop:!0}).to({rotation:360},1e3)},i.endtx=function(){this.bmpTX.visible=!1,egret.Tween.removeTweens(this.bmpTX)},i.bmp_begin=function(e){this.bmptap=!0,this.touchX=e.stageX,this.touchY=e.stageY,console.log(this.touchX+" "+this.touchY),egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.bmp_move,this)},i.bmp_move=function(e){this.bmptap&&(this.bmpImg.x=this.bmpX+(e.stageX-this.touchX),this.bmpImg.y=this.bmpY+(e.stageY-this.touchY))},i.bmp_end=function(e){switch(egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.bmp_move,this),this.bmptap=!1,this.k){case"height":this.bmpImg.y=130,this.bmpImg.x>=141?this.bmpImg.x=141:this.bmpImg.x<609-this.bmpImg.width*this.bmpImg.scaleX&&(this.bmpImg.x=609-this.bmpImg.width*this.bmpImg.scaleX);break;default:this.bmpImg.x=141,this.bmpImg.y>=130?this.bmpImg.y=130:this.bmpImg.y<963-this.bmpImg.height*this.bmpImg.scaleY&&(this.bmpImg.y=963-this.bmpImg.height*this.bmpImg.scaleY)}this.bmpX=this.bmpImg.x,this.bmpY=this.bmpImg.y},i.open=function(e,t,a,i,n){RES.getResByUrl(e,this.compFunc,this,RES.ResourceItem.TYPE_IMAGE),GameApp.Manager.viewManager.BottomUIStage.addChild(this),GameApp.Manager.controllerManager.uploadController.hide(),this.k=t,this.w=i,this.h=n,this.image=a},i.compFunc=function(e){switch(this.bmpImg.source=e,console.log(this.k+" "+this.bmpImg.width+" "+this.bmpImg.height),this.k){case"width":this.bmpImg.scaleX=this.bmpImg.scaleY=468/this.bmpImg.width;break;case"height":this.bmpImg.scaleX=this.bmpImg.scaleY=833/this.bmpImg.height;break;default:this.bmpImg.scaleX=this.bmpImg.scaleY=468/this.bmpImg.width}},i.close=function(){this.smallbase64="",this.largebase64="",this.bmpImg.source=null,this.bmpImg.scaleX=this.bmpImg.scaleY=1,this.bmpImg.x=141,this.bmpImg.y=130,GameApp.Manager.viewManager.BottomUIStage.removeChild(this),GameApp.Manager.controllerManager.uploadController.show()},t}(eui.Component);e.UploadDesc=t,egret.registerClass(t,"upload.UploadDesc")}(upload||(upload={}));var upload;!function(e){var t=function(e){function t(){e.call(this),this.votes=0,this.uid=-1,this.skinName="src/view/gameUI/upload/UploadItemSkin.exml",this.bmpIcon=new module.BaseCircleImage}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblName.fontFamily="Heiti SC",this.lblHot.fontFamily="Heiti SC"),this.bmpIcon.x=15,this.bmpIcon.y=279,this.addChild(this.bmpIcon),this.btnSend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.send_tap,this),this.bmpBack.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.viewManager.uploadManager.uploadUI.disLarge(this.obj.img,this.obj.upload_user_pic,window.hexToDec(this.obj.upload_user_name),window.hexToDec(this.obj.upload_group_name))},this)},i.send_tap=function(){if(GameApp.Manager.dataManager.lucystar>0){var e=this.localToGlobal(this.lblHot.x,this.lblHot.y);GameApp.Manager.viewManager.uploadManager.uploadUI._tx=e.x+50,GameApp.Manager.viewManager.uploadManager.uploadUI._ty=e.y;var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+this.uid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/starImagesVote",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,id:this.uid,sign:t},function(e){this.starImagesVoteCall(e)},!0,this)}else aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.uploadController.hide,0)},this)},i.starImagesVoteCall=function(e){switch(e.st){case 1:this.lblHot.text=e.votes,this.votes=e.votes,this.obj.votes=this.votes,GameApp.Manager.dataManager.lucystar=e.lucky_star,flower.FlowerUI.getInstance().setLucky(),GameApp.Manager.viewManager.uploadManager.uploadUI.startip(),egret.Tween.get(this).wait(1e3).call(function(){GameApp.Manager.viewManager.uploadManager.uploadUI.item_send(this.parent.getChildIndex(this),e.votes)},this);break;case-1:aler.AlertPanel.getInstance().show("温馨提示","钻石不足","取消","充值",function(e){"ok"==e&&GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.uploadController.hide,0)},this)}},i.setObj=function(e){this.obj=e},i.setData=function(e){this.obj=e,this.uid=e.id,this.lblName.text=Tools.getInstance().getStringLen(window.hexToDec(e.upload_user_name),11),this.lblHot.text=e.votes,this.votes=e.votes,RES.getResByUrl(e.thumbnail_img,this.load_end,this,RES.ResourceItem.TYPE_IMAGE),this.bmpIcon.setData(e.upload_user_pic,26,0,0,1)},i.load_end=function(e){this.bmpBack.texture=e,e.textureWidth/e.textureHeight>221/355?this.bmpBack.scaleX=this.bmpBack.scaleY=221/e.textureWidth:this.bmpBack.scaleX=this.bmpBack.scaleY=355/e.textureHeight},i.clear=function(){this.obj=null,this.uid=-1,this.lblName.text="",this.lblHot.text="",this.bmpBack.source=null,this.bmpIcon.clear()},t.cacheDict={},t}(eui.Component);e.UploadItem=t,egret.registerClass(t,"upload.UploadItem")}(upload||(upload={}));var upload;!function(e){var t=function(t){function a(e){t.call(this,e),this.loaded=!1,this.viewManager=e}__extends(a,t);var i=(__define,a),n=i.prototype;return n.show=function(){this.uploadUI||(this.uploadUI=new e.Upload),this.BottomUIStage.addChild(this.uploadUI);var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+"&");Util.sendJson1("http://sf.xintiao100.com/starImages",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,sign:t},function(e){this.initUI(e)},!0,this)},n.initUI=function(e){this.uploadUI.setData(e)},n.hide=function(){this.uploadUI.parent&&(this.BottomUIStage.removeChild(this.uploadUI),this.uploadUI.clear())},n.loading=function(){GameApp.Manager.controllerManager.loader.moduleLoading(["public"],this.load_end,this)},n.load_end=function(){this.loaded=!0},a}(common.BaseView);e.UploadManager=t,egret.registerClass(t,"upload.UploadManager")}(upload||(upload={}));var userPanel;!function(e){var t=function(t){function a(){t.call(this),this.paiseCount=0,this.totalPaiseCount=0,this.count=0,this._times=0,this.times=0,this.skinName="src/view/gameUI/userPanel/UserPaiseSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){var e=this;Tools.getInstance().isIphone()&&(this.lable_parise.fontFamily="Heiti SC",this.lable_pariseCount.fontFamily="Heiti SC"),this.rect_push.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.img_pariseAn.visible=!1,e.img_pariseLiang.visible=!0;var t=(new md5).hex_md5(e.bid+e.target_user_id+e.source_user_id+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/praiseUser",{bid:e.bid,target_user_id:e.target_user_id,source_user_id:e.source_user_id,sign:t},function(t){if(1==t.st){e.addPariseIcon(),e.closetick(),e.lable_pariseCount.text=e.allObj.praise.length+1+"";var a=system.Image1.produce();a.x=e.img_pariseAn.x,a.y=e.img_pariseAn.y,e.addChild(a),a.setData("hand"),egret.Tween.get(a).to({y:a.y-80},550).to({alpha:0},300).call(function(){system.Image1.reclaim(a),a.parent&&a.parent.removeChild(a)},this)}})},this)},n.setData=function(t,a,i,n){if(this.allObj=t,this.bid=i,this.target_user_id=a,this.source_user_id=GameApp.Manager.dataManager.uid,this.totalPaiseCount=t.praise.length,this.count=t.praise.length,this.count>0?(this.count<5?this.times=500:this.count<10?this.times=800:this.count<50?this.times=1500:this.times=2e3,egret.Ticker.getInstance().register(this.tick,this)):this.lable_pariseCount.text="0",a==GameApp.Manager.dataManager.uid){this.img_pariseAn.visible=!1,this.img_pariseLiang.visible=!0,this.lable_parise.text="赞过我的人";for(var s in t.praise){var r=e.UserPaiseIcon.produce();this.group_parisePerson.addChild(r),r.setData(t.praise[s].user_pic)}this.rect_push.touchEnabled=!1}else{this.lable_parise.text="赞过TA的人";for(var s in t.praise){GameApp.Manager.dataManager.uid==t.praise[s].user_id&&(this.img_pariseAn.visible=!1,this.img_pariseLiang.visible=!0);var r=e.UserPaiseIcon.produce();this.group_parisePerson.addChild(r),r.setData(t.praise[s].user_pic)}this.rect_push.touchEnabled=!0}},n.tick=function(e){this._times+=e,this.lable_pariseCount.text=parseInt(this.count*(this._times/this.times)+"")+"",this._times>=this.times&&(this.lable_pariseCount.text=this.count+"",this.count=0,this._times=0,egret.Ticker.getInstance().unregister(this.tick,this))},n.closetick=function(){egret.Ticker.getInstance().unregister(this.tick,this)},n.clear=function(){for(egret.Ticker.getInstance().unregister(this.tick,this),this.paiseCount=0,this.totalPaiseCount=0,this.lable_pariseCount.text="0",this.scroll.viewport.scrollH=0,this.img_pariseAn.visible=!0,this.img_pariseLiang.visible=!1;this.group_parisePerson.numElements>0;){var t=this.group_parisePerson.getElementAt(this.group_parisePerson.numElements-1);e.UserPaiseIcon.reclaim(t),t.parent&&t.parent.removeChild(t)}},n.addPariseIcon=function(){var t=e.UserPaiseIcon.produce();this.group_parisePerson.addChildAt(t,0),t.setData(GameApp.Manager.dataManager.user_pic)},a}(eui.Component);e.UserPaise=t,egret.registerClass(t,"userPanel.UserPaise")}(userPanel||(userPanel={}));var userPanel;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/userPanel/UserPaiseIconSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.setData=function(e){RES.getResByUrl(e,this.load_personIcon,this,RES.ResourceItem.TYPE_IMAGE)},i.load_personIcon=function(e){this.img_paiseIcon.texture=e},i.clear=function(){this.img_paiseIcon.texture=null},t.cacheDict={},t}(eui.Component);e.UserPaiseIcon=t,egret.registerClass(t,"userPanel.UserPaiseIcon")}(userPanel||(userPanel={}));var userPanel;!function(e){var t=function(t){function a(){t.call(this),this.uid=0,this.colorArr=[5658725,10712421,8897691,1678310,16092861,16214116,16102166],this.col=0,this.itemArr=[],this.disSure=0,this.medal2State=0,this.proCredit=0,this.skinName="src/view/gameUI/userPanel/UserPanelSkin.exml",this.bmpIcon=new module.BaseCircleImage,this.userPaise=new e.UserPaise}__extends(a,t);var i=(__define,a),n=i.prototype;return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblName.fontFamily="Heiti SC",this.lblPay.fontFamily="Heiti SC",this.lblGroupName.fontFamily="Heiti SC",this.lblHonghua.fontFamily="Heiti SC",this.lbl2.fontFamily="Heiti SC",this.lbl3.fontFamily="Heiti SC",this.lblstar.fontFamily="Heiti SC",this.lblTip.fontFamily="Heiti SC",this.lable_noWorks.fontFamily="Heiti SC",this.lable_sign.fontFamily="Heiti SC",this.lable_discount.fontFamily="Heiti SC",this.lable_wealfe.fontFamily="Heiti SC",this.lable_myDian.fontFamily="Heiti SC",this.lable_Alreadylit.fontFamily="Heiti SC",this.lable_day.fontFamily="Heiti SC",this.lable_shouhu.fontFamily="Heiti SC",this.lable_zhuwei.fontFamily="Heiti SC",this.lable_fuli.fontFamily="Heiti SC",this.lable_3day.fontFamily="Heiti SC",this.lable_9day.fontFamily="Heiti SC",this.lable_3yuan.fontFamily="Heiti SC",this.lable_9yuan.fontFamily="Heiti SC",this.lable_medal2Light.fontFamily="Heiti SC",this.lblTitle.fontFamily="Heiti SC",this.lblDesc.fontFamily="Heiti SC",this.lbl1.fontFamily="Heiti SC",this.lbl0.fontFamily="Heiti SC",this.lable_medal2Day.fontFamily="Heiti SC",this.lable_medal3Wealf.fontFamily="Heiti SC",this.lable_medal3ZhuWei.fontFamily="Heiti SC",this.lable_medal3shouHu.fontFamily="Heiti SC",this.lable_medal3myLight.fontFamily="Heiti SC",this.lable_getIntegral.fontFamily="Heiti SC",this.lable_groupShare.fontFamily="Heiti SC",this.lable_needOnerLight.fontFamily="Heiti SC",this.lable_callOner.fontFamily="Heiti SC"),this.lbl2.text="与"+GameApp.Manager.dataManager.star_name+"亲密度",this.groupPaise.addChild(this.userPaise),this.bmpIcon.x=35,this.bmpIcon.y=40,this.bmpTipBack=Tools.getInstance().getShape(null,350,125,0,0,20,20,-1,0),this.bmpTipBack.alpha=.65,this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeItem,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){e.stopPropagation()
},this),this.groupTip1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){location.href="http://buluo.qq.com/p/barindex.html?bid=312564"},this),this.groupStar.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.close(),GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.taskController.hide,0)},this),this.btnJoin.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.groupopenid!=GameApp.Manager.dataManager.group_openid&&system.GroupJoin.join(this.groupopenid)},this),this.group_goToMore.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){var t=this;GameApp.Manager.controllerManager.gabageController.show(t.uid,t.bid,1),e.stopPropagation()},this);var e=this;this.group_m1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.type=1,this.group_medal1.visible=!0;var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+1+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getGuardInfo",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,guard_id:1,sign:t},function(t){1==t.st&&(t.data.can_buy?(e.group_medul1Light.visible=!0,e.lable_day.visible=!0,e.lable_Alreadylit.visible=!1):(e.group_medul1Light.visible=!1,e.uid!=GameApp.Manager.dataManager.uid?(e.lable_day.visible=!1,e.lable_Alreadylit.visible=!1):(e.lable_Alreadylit.visible=!0,t.data.surplus_day&&(e.lable_day.visible=!0,e.lable_day.text="剩余"+t.data.surplus_day+"天"))))},!0,this)},this),this.group_m2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.type=2,this.group_medal2.visible=!0;var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+2+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getGuardInfo",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,guard_id:2,group_openid:GameApp.Manager.dataManager.group_openid,sign:t},function(t){1==t.st&&(t.data.can_buy?(e.group_medul2Light.visible=!0,e.lable_medal2Light.visible=!1,e.lable_medal2Day.visible=!1):(e.group_medul2Light.visible=!1,e.uid!=GameApp.Manager.dataManager.uid?(e.lable_medal2Day.visible=!1,e.lable_medal2Light.visible=!1):(e.lable_medal2Light.visible=!0,t.data.surplus_day&&(e.lable_medal2Day.visible=!0,e.lable_medal2Day.text="剩余"+t.data.surplus_day+"天"))))},!0,this)},this),this.group_m3.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.type=3,this.group_medal3.visible=!0;var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.group_openid+4+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getGuardInfo",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,group_openid:GameApp.Manager.dataManager.group_openid,guard_id:4,sign:t},function(t){1==t.st&&(t.data.can_buy?GameApp.Manager.dataManager.is_owner?(e.proCredit=t.data.credits,e.group_isOner.visible=!0,e.lable_getIntegral.text="3000本群积分或活动获得,当前积分"+t.data.credits,e.group_isNotOner.visible=!1):(e.group_isOner.visible=!1,e.group_isNotOner.visible=!0):GameApp.Manager.dataManager.is_owner&&e.uid==GameApp.Manager.dataManager.uid?(e.rect_medl3myLight.visible=!1,e.lable_medal3myLight.textColor=16645634,e.lable_medal3myLight.text="已点亮",e.lable_getIntegral.textColor=16777215,e.lable_getIntegral.text="剩余"+t.data.surplus_day+"天",e.group_isOner.visible=!0,e.group_isNotOner.visible=!1):GameApp.Manager.dataManager.is_owner||e.uid!=GameApp.Manager.dataManager.uid?(e.group_isOner.visible=!1,e.group_isNotOner.visible=!1):(e.lable_needOnerLight.textColor=16645634,e.lable_needOnerLight.text="已点亮",e.lable_callOner.textColor=16777215,e.lable_callOner.text="剩余"+t.data.surplus_day+"天",e.group_isOner.visible=!1,e.group_isNotOner.visible=!0))},!0,this)},this),this.rect_Light1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.dataManager.lucystar>=99?(e.group_notice.visible=!0,e.lblTitle.text="温馨提示",e.lblDesc.text="确认点亮信仰勋章",e.lbl1.text="取消",e.lbl0.text="点亮",e.disSure=1):(e.group_notice.visible=!0,e.lblTitle.text="温馨提示",e.lblDesc.text="钻石不足",e.lbl1.text="取消",e.lbl0.text="充值",e.disSure=11)},this),this.rect_3day.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){pay.PayUI.getInstance().isBuyModul=2,pay.PayUI.getInstance().btn6_tap(),this.medal2State=30},this),this.rect_9day.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){pay.PayUI.getInstance().isBuyModul=2,pay.PayUI.getInstance().btn7_tap(),this.medal2State=90},this),this.rect_medl3myLight.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.proCredit>=3e3?socketio.IoConnect.getInstance().sendMessage(data.PomeloData.medal3,{},function(e){-1==e.st&&system.TipText.produce().open("只有群主才能买哦",1e3,800)},this):system.TipText.produce().open("积分不足",1e3,800)},this),this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.group_notice.visible=!1},this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){if(1==e.disSure){e.disSure=0;var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+GameApp.Manager.dataManager.bid+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/buyFaithGuard",{user_id:GameApp.Manager.dataManager.uid,bid:GameApp.Manager.dataManager.bid,sign:t},function(t){t.st&&1==t.st?(e.group_notice.visible=!1,e.uid==GameApp.Manager.dataManager.uid&&(e.img_medal1_bright.visible=!0,e.img_medal1_dark.visible=!1),e.group_medul1Light.visible=!1,e.lable_Alreadylit.visible=!0,e.lable_day.text="剩余29天",e.lblstar.text=t.data.lucky_star,GameApp.Manager.dataManager.lucystar=t.data.lucky_star,socketio.IoConnect.getInstance().disconnect(),socketio.IoConnect.getInstance().initPomelo(GameApp.Manager.dataManager.bid,GameApp.Manager.dataManager.uid,null,null)):system.TipText.produce().open("点亮失败",2e3,1e3)},!0,this)}else 11==e.disSure&&(e.close(),GameApp.Manager.controllerManager.payController.show(GameApp.Manager.controllerManager.taskController.hide,0,1))},this),this.rect_join.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){system.GroupJoin.join("2970C88E2D2E0EDE54E8D57E14268B03")},this)},n.changeMedal2Stage=function(){socketio.IoConnect.getInstance().disconnect(),socketio.IoConnect.getInstance().initPomelo(GameApp.Manager.dataManager.bid,GameApp.Manager.dataManager.uid,null,null),30==this.medal2State?(this.medal2State=0,this.lable_medal2Day.text="剩余29天"):90==this.medal2State&&(this.medal2State=0,this.lable_medal2Day.text="剩余89天"),this.uid==GameApp.Manager.dataManager.uid&&(this.img_medal2_bright.visible=!0,this.img_medal2_dark.visible=!1),this.group_medul2Light.visible=!1,this.lable_medal2Light.visible=!0,this.lable_medal2Day.visible=!0},n.changeStage=function(e){var t=this;socketio.IoConnect.getInstance().disconnect(),socketio.IoConnect.getInstance().initPomelo(GameApp.Manager.dataManager.bid,GameApp.Manager.dataManager.uid,null,null),this.img_medal3_bright.visible=!0,this.img_medal3_dark.visible=!1,task.TaskUI.isCanByLiBao=!0,pay.PayUI.isByGift=!0,task.TaskUI.stars_guard_valid=!0,GameApp.Manager.viewManager.taskManager.taskUI.reSetAllPos(),GameApp.Manager.dataManager.is_owner&&t.uid==GameApp.Manager.dataManager.uid?(t.rect_medl3myLight.visible=!1,t.lable_medal3myLight.textColor=16645634,t.lable_medal3myLight.text="已点亮",t.lable_getIntegral.textColor=16777215,t.lable_getIntegral.text="剩余29天",t.group_isOner.visible=!0,t.group_isNotOner.visible=!1):GameApp.Manager.dataManager.is_owner||t.uid!=GameApp.Manager.dataManager.uid||(t.lable_needOnerLight.textColor=16645634,t.lable_needOnerLight.text="已点亮",t.lable_callOner.textColor=16777215,t.lable_callOner.text="剩余29天",t.group_isOner.visible=!1,t.group_isNotOner.visible=!0)},n.closeTip=function(){},n.open=function(e,t,a){var i=this;this.uid=e,this.type=0,this.bid=t,this.groupopenid=a;var n=a?a:GameApp.Manager.dataManager.group_openid;GameApp.Manager.viewManager.maskStage(.4),GameApp.Manager.viewManager.TopUIStage.addChild(this),this.uid==GameApp.Manager.dataManager.uid?this.groupStar.visible=!0:this.groupStar.visible=!1,this.x=12,this.y=(egret.MainContext.instance.stage.stageHeight-924)/2;var s=(new md5).hex_md5(e+t+n+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/userInfo",{user_id:e,bid:t,group_openid:n,sign:s},function(n){1==n.st&&(this.setData(n),i.userPaise.setData(n,e,t,a))},!0,this),e==GameApp.Manager.dataManager.uid?this.groupTip1.visible=!0:this.groupTip1.visible=!1},n.setTitleUI=function(e){var t=this.lblName.text;if(Tools.getInstance().isIphone()){this.validateNow();var a=23*window.Emoji.emojiLength(t);this.groupLevel.x=this.lblName.x+this.lblName.textWidth+a+10}else this.lblName.text=window.Emoji.emojiReplace(t),this.validateNow(),this.groupLevel.x=this.lblName.x+this.lblName.textWidth+10},n.setData=function(e){if(console.log("设置数据"),e.guard&&(1==e.guard.faith_guard?(this.img_medal1_dark.visible=!1,this.img_medal1_bright.visible=!0):(this.img_medal1_dark.visible=!0,this.img_medal1_bright.visible=!1),1==e.guard.angel_guard?(this.img_medal2_dark.visible=!1,this.img_medal2_bright.visible=!0):(this.img_medal2_dark.visible=!0,this.img_medal2_bright.visible=!1),1==e.guard.stars_guard?(this.img_medal3_dark.visible=!1,this.img_medal3_bright.visible=!0):(this.img_medal3_dark.visible=!0,this.img_medal3_bright.visible=!1)),this.bmpTitleBack0.source=data.DataManager.getintimateIcon(e.intimate_level),this.lblIntimate_Title0.text=data.DataManager.getintimateLevel(e.intimate_level)+"",e.intimate_level<45?(this.bmpTitleBack0.source=data.DataManager.getintimateIcon(e.intimate_level),this.lblIntimate_Title0.text=data.DataManager.getintimateLevel(e.intimate_level)+""):(this.bmpTitleBack0.source=null,this.lblIntimate_Title0.text=""),this.lbl3.text="点亮作品 ("+e.starWorks.length+"/"+e.works_total+")",console.log(this.groupopenid+"  "+GameApp.Manager.dataManager.group_openid),this.groupTop.addChild(this.bmpIcon),this.lblName.textFlow=(new egret.HtmlTextParser).parser(window.hexToDec(e.user_name)),this.lblPay.textFlow=(new egret.HtmlTextParser).parser("本月送出 <font color=#ffffff>"+e.contribution+"</font> 钻"),this.groupopenid==GameApp.Manager.dataManager.group_openid?this.lblGroupName.textFlow=(new egret.HtmlTextParser).parser("所属群 <font color=#ffffff>"+window.hexToDec(e.group_name)+"</font>"):this.lblGroupName.textFlow=(new egret.HtmlTextParser).parser("所属群 <font color=#3FD5E3>"+window.hexToDec(e.group_name)+"</font>"),GameApp.Manager.dataManager.lucystar<=0?this.lblstar.text="0":this.lblstar.text=GameApp.Manager.dataManager.lucystar+"",this.lblHonghua.text="x"+e.red_flower_num,this.lbl2.text="与"+window.hexToDec(e.star_name)+"亲密度",this.setTitleUI(e),"女"==e.gender?this.sex.source="p_nv":this.sex.source="p_nan",this.bmpIcon.setData(e.user_pic,162,0,0,4),this.user_pic=e.user_pic,e.starWorks){0==e.starWorks.length&&(this.lable_noWorks.visible=!0);for(var t=0;t<e.starWorks.length;t++){var a=new garbageCollection.WorksItem,i=parseInt(e.starWorks[t].colour),n=window.hexToDec(e.starWorks[t].name);if(a.setData(n,i),this.itemArr.push(a),0==t)a.x=0,a.y=25;else if(a.x=this.itemArr[t-1].x+this.itemArr[t-1].width+20,a.y=75*this.col+25,a.x+a.width>640){if(this.col+=1,this.col>=2)break;a.x=0,a.y=75*this.col+25}this.groupData.addChild(a)}}},n.closeItem=function(){console.log(this.type,"type"),0==this.type?this.close():1==this.type?(this.type=0,this.group_medal1.visible=!1,this.lable_day.visible=!1,this.lable_Alreadylit.visible=!1):2==this.type?(this.type=0,this.group_medal2.visible=!1,this.group_medul2Light.visible=!1,this.lable_medal2Day.visible=!1,this.lable_medal2Light.visible=!1):3==this.type&&(this.type=0,this.group_medal3.visible=!1,this.group_isOner.visible=!1,this.group_isNotOner.visible=!1)},n.close=function(){this.uid=0,this.bid="",egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.groupTip1.visible=!1,this.bmpIcon&&this.bmpIcon.parent&&this.bmpIcon.parent.removeChild(this.bmpIcon),this.lblName.text="",this.lblHonghua.text="",this.lblGroupName.text="",this.clearData(),GameApp.Manager.viewManager.clearMask(),GameApp.Manager.viewManager.TopUIStage.removeChild(this),this.userPaise.clear(),this.group_medal1.visible=!1,this.group_medal2.visible=!1,this.group_medal3.visible=!1,this.group_notice.visible=!1,this.img_medal1_bright.visible=!1,this.img_medal2_bright.visible=!1,this.img_medal3_bright.visible=!1,this.img_medal1_dark.visible=!0,this.img_medal2_dark.visible=!0,this.img_medal3_dark.visible=!0},n.touchend=function(){egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchend,this),this.selectItem=null,this.closeTip()},n.clearData=function(){for(this.lable_noWorks.visible=!1,this.itemArr=[],this.col=0;this.groupData.numElements>0;){var e=this.groupData.getElementAt(this.groupData.numElements-1);e.parent&&e.parent.removeChild(e)}},a}(eui.Component);e.UserPanel=t,egret.registerClass(t,"userPanel.UserPanel")}(userPanel||(userPanel={}));var userPanel;!function(e){var t=function(e){function t(){e.call(this),this.desc="",this.num=0,this.need_num=0,this.intimate=0,this.skinName="src/view/gameUI/userPanel/UserPanelItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblTitle.fontFamily="Heiti SC")},i.setData=function(e){for(var t=0,a=0;5>a;a++){var i=new eui.Image("u_star_h");this.groupStar.addChild(i),i.x=26*t+2,i.y=129,t++}if(e.star_lv>0){this.bmpIcon.source="cj"+e.id;var n=data.DataManager.userStarPoint[e.star_lv],s=0;for(var r in n){var o=(n[r],new eui.Image("u_star"));this.groupStar.addChild(o),o.x=26*s+2,o.y=129,s++}}else this.bmpIcon.source="cj"+e.id+"_1";var h=data.DataManager.userMSG[e.id];this.desc=h.desc,this.num=e.num,this.need_num=e.need_num,this.intimate=e.intimate,this.desc.indexOf("n")>-1&&(this.desc=this.desc.replace("n",this.need_num+""))},i.clearStar=function(){this.groupStar.removeChildren()},i.clear=function(){this.clearStar(),this.bmpIcon.source=null,this.lblTitle.text=""},t.cacheDict={},t}(eui.Component);e.UserPanelItem=t,egret.registerClass(t,"userPanel.UserPanelItem")}(userPanel||(userPanel={}));var newWeekPush;!function(e){var t=function(t){function a(){t.call(this),this.honorArr=[],this.skinName="src/view/gameUI/weekPush/newWeekPush/NewWeekPushSkin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_weekTime.fontFamily="Heiti SC",this.lable_weekTitle.fontFamily="Heiti SC",this.lable_rankNumber.fontFamily="Heiti SC",this.lable_starName.fontFamily="Heiti SC",this.lable_contribution.fontFamily="Heiti SC",this.lable_thisWeekHonor.fontFamily="Heiti SC",this.lable_go.fontFamily="Heiti SC",this.lable_superTeam.fontFamily="Heiti SC",this.lable_time.fontFamily="Heiti SC",this.lable_title.fontFamily="Heiti SC"),this.scr1.height=this.stage.stageHeight,this.rect_goGame.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=this,t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+e.bid+e.wts+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getWeeklyNewEnter",{user_id:GameApp.Manager.dataManager.uid,bid:e.bid,wts:e.wts,sign:t},function(e){},!0,this),GameApp.Manager.controllerManager.weekPushController.hide(),GameApp.Manager.controllerManager.start(this.bid)},this)},n.setData=function(t){if(this.obj=t,this.bid=t.bid,GameApp.Manager.dataManager.bid=t.bid,this.wts=t.time,this.lable_starName.text=window.hexToDec(t.star_name),this.lable_rankNumber.text="No."+t.rank,RES.getResByUrl(t.head_img,this.setStarIcon,this,RES.ResourceItem.TYPE_IMAGE),t.contribution_list)for(var a=0;a<t.contribution_list.length;a++){var i=new e.NewWeekPushContributionItem;i.setData(t.contribution_list[a],a+1),i.x=0,i.y=142*a,this.group_center.addChild(i)}this.group_button.y=this.group_center.y+this.group_center.height+100,t.honor_info&&(t.honor_info.mass_best&&0!=t.honor_info.mass_best.num&&this.honorArr.push("mass_best"),t.honor_info.crowdfunding_best&&0!=t.honor_info.crowdfunding_best.num&&this.honorArr.push("crowdfunding_best"),t.honor_info.sign_best&&0!=t.honor_info.sign_best.num&&this.honorArr.push("sign_best"));for(var n=this.honorArr.length,s=(750-214*n)/(n+1),r=0;r<this.honorArr.length;r++){var o=new e.NewWeekPushHonor;o.setData(this.obj,this.honorArr[r]),o.x=s+214*r+r*s,o.y=0,this.group_hohorItem.addChild(o)}},n.setStarIcon=function(e){this.img_starIcon.texture=e},n.clear=function(){for(this.lable_weekTime.text="",this.lable_weekTitle.text="",this.lable_rankNumber.text="",this.lable_starName.text="",this.img_starIcon.source="";this.group_center.numElements>0;){var e=this.group_center.getElementAt(this.group_center.numElements-1);e.parent&&e.parent.removeChild(e)}for(;this.group_hohorItem.numElements>0;){var t=this.group_hohorItem.getElementAt(this.group_hohorItem.numElements-1);t.parent&&t.parent.removeChild(t)}},a}(eui.Component);e.NewWeekPush=t,egret.registerClass(t,"newWeekPush.NewWeekPush")}(newWeekPush||(newWeekPush={}));var newWeekPush;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/weekPush/newWeekPush/NewWeekPushContributionItemSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_rankNumber.fontFamily="Heiti SC",this.lable_groupName.fontFamily="Heiti SC",this.lable_groupContribution.fontFamily="Heiti SC",this.lable_btnJoinIn.fontFamily="Heiti SC"),this.rect_joinIn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){system.GroupJoin.join(this.group_openid)},this)},i.setData=function(e,t){t%2!=0?this.rect_joinIn.fillColor=15267836:this.rect_joinIn.fillColor=16777215,this.img_iconUp.source="wp_no"+t,4>=t?this.img_number.source="fistpag_"+t:this.img_number.source="fistpag_4",this.lable_rankNumber.text=t+"",this.lable_groupName.text=window.hexToDec(e.group_name),this.lable_groupContribution.text="贡献: "+window.hexToDec(e.contribution),RES.getResByUrl(e.group_face,this.addStarIcon,this,RES.ResourceItem.TYPE_IMAGE),this.group_openid=e.group_openid},i.addStarIcon=function(e){this.img_icon.texture=e},t}(eui.Component);e.NewWeekPushContributionItem=t,egret.registerClass(t,"newWeekPush.NewWeekPushContributionItem")}(newWeekPush||(newWeekPush={}));var newWeekPush;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/weekPush/newWeekPush/NewWeekPushHonorSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_topName.fontFamily="Heiti SC",this.lable_topCount.fontFamily="Heiti SC",this.lable_Team.fontFamily="Heiti SC")},i.setData=function(e,t){console.log(e,"obj"),"sign_best"==t&&(this.lable_topName.text="人气签到群"),"mass_best"==t&&(this.lable_topName.text="铁杆集结群"),"crowdfunding_best"==t&&(this.lable_topName.text="主力众筹群"),this.lable_topCount.text=window.hexToDec(e.honor_info[t].num)+"次",RES.getResByUrl(e.honor_info[t].group_face,this.addGroupIcon,this,RES.ResourceItem.TYPE_IMAGE),this.lable_Team.text=this.getStringLen(window.hexToDec(e.honor_info[t].group_name))},i.getStringLen=function(e){for(var t=0,a="",i=0;i<e.length;i++){var n=e.charCodeAt(i);if(t+=n>=0&&128>=n?1:2,!(16>t))return a+="...";a+=e[i]}return a},i.addGroupIcon=function(e){this.img_starIcon.texture=e},t}(eui.Component);e.NewWeekPushHonor=t,egret.registerClass(t,"newWeekPush.NewWeekPushHonor")}(newWeekPush||(newWeekPush={}));var weekPush;!function(e){var t=function(e){function t(t){e.call(this,t),this.loaded=!1,this.viewManager=t}__extends(t,e);var a=(__define,t),i=a.prototype;return i.show=function(){this.loaded?this.initUI():this.loading()},i.initUI=function(){var e=this;this.weekPush||(this.weekPush=new newWeekPush.NewWeekPush),this.BottomUIStage.addChild(this.weekPush);var t=(new md5).hex_md5(GameApp.Manager.dataManager.uid+""+GameApp.Manager.dataManager.bid+GameApp.Manager.dataManager.wts+"&");Util.sendJson1(GameApp.Manager.dataManager.IP+"/getWeeklyNew",{user_id:GameApp.Manager.dataManager.uid+"",bid:GameApp.Manager.dataManager.bid,wts:GameApp.Manager.dataManager.wts,sign:t},function(t){1==t.st&&e.weekPush.setData(t.data)},!0,this)},i.hide=function(){this.weekPush.parent&&(this.BottomUIStage.removeChild(this.weekPush),this.weekPush.clear())},i.loading=function(){GameApp.Manager.controllerManager.loader.mainLoading(["public"],this.load_end,this)},i.load_end=function(){this.loaded=!0,this.initUI()},t}(common.BaseView);e.WeekPushManage=t,egret.registerClass(t,"weekPush.WeekPushManage")}(weekPush||(weekPush={}));var zfdy;!function(e){var t=function(e){function t(){e.call(this),this.pid=-1,this.colorArr=[5658725,10712421,8897691,1678310,16092861,16214116,16102166],this.skinName="src/view/gameUI/zfdy/CollectionSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lable_work.fontFamily="Heiti SC",this.lable_starNameWork.fontFamily="Heiti SC")},i.setData=function(e,t){1==e.type?this.img_Icon.source="gc_BigMusic":2==e.type?this.img_Icon.source="gc_BigTv":3==e.type&&(this.img_Icon.source="gc_BigMovie");var a=this;if(this.lable_starNameWork.text=t,e.name.length>10){var i=window.hexToDec(e.name),n=i.substr(0,10);this.lable_work.text=n}else this.lable_work.text=window.hexToDec(e.name);var s=parseInt(e.colour);this.lable_work.textColor=this.colorArr[s],egret.Tween.get(this).to({scaleX:1,scaleY:1},600,egret.Ease.sineOut),egret.Tween.get(this).wait(1400).to({alpha:0},700).call(function(){a.dispatchEventWith("END",!1,this)})},i.clear=function(){this.alpha=1,this.lable_starNameWork.text="",this.lable_work.text="",this.img_Icon.source=""},t.cacheDict={},t}(eui.Component);e.Collection=t,egret.registerClass(t,"zfdy.Collection")}(zfdy||(zfdy={}));var zfdy;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/zfdy/zfBag/Zfdy10Skin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.open=function(e,t){this.zfdy10||(this.zfdy10=new a),GameApp.Manager.viewManager.TopUIStage.addChild(this.zfdy10),this.zfdy10.setData(e,t)},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC"),this.img_bg.scaleY=0,this.img_bg.scaleX=0,this.img_bg.alpha=0,this.img_rabbit1.scaleX=0,this.img_rabbit1.scaleY=0,this.img_rabbit2.scaleX=0,this.img_rabbit2.scaleY=0,this.img_rabbit3.scaleX=0,this.img_rabbit3.scaleY=0},n.setData=function(t,a){this.bmpHead1=new e.ZfHeadItem,this.bmpHead2=new e.ZfHeadItem,this.bmpHead1.x=232,this.bmpHead1.y=510,this.bmpHead2.x=518,this.bmpHead2.y=510,this.lblText.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffe533>"+window.hexToDec(t.group_name)+"</font>送给"+GameApp.Manager.dataManager.star_name+"<font color=#ffe533>"+window.hexToDec(t.name)+"</font>"),this.bmpHead1.setData("zfdy_5",t.group_face),this.bmpHead1.setQunIcon(),this.bmpHead2.setData("zfdy_6",a.head_img),this.addChild(this.bmpHead1),this.addChild(this.bmpHead2),this.bmpHead1.scaleX=this.bmpHead1.scaleY=0,this.bmpHead2.scaleX=this.bmpHead2.scaleY=0,this.bmpTextBack.width=this.lblText.textWidth+163,egret.Tween.get(this.bmpHead1).wait(0).to({scaleX:1,scaleY:1},1e3),egret.Tween.get(this.bmpHead2).wait(800).to({scaleX:1,scaleY:1},1e3),egret.Tween.get(this.img_bg).wait(0).to({scaleX:1,scaleY:1,alpha:1},800),egret.Tween.get(this.group_rabit).wait(850).to({x:51},2e3,egret.Ease.sineIn),egret.Tween.get(this.img_rabbit2).wait(3080).to({scaleX:1,scaleY:1},800,egret.Ease.bounceOut),egret.Tween.get(this.img_rabbit3).wait(3360).to({scaleX:1,scaleY:1},800,egret.Ease.bounceOut),egret.Tween.get(this.img_rabbit1).wait(3640).to({scaleX:1,scaleY:1},800,egret.Ease.bounceOut),egret.Tween.get(this).wait(5e3).call(this.close),this.addHead(t)},n.addHead=function(t){for(var a=t.top_user,i=0;i<a.length;i++){var n=e.ZfdyHeadItem.produce();n.bid=t.bid,n.group_openid=t.group_openid,this.groupHead.addChild(n),n.setData(a[i],i+1)}},n.close=function(){this.clear(),this.parent&&this.parent.removeChild(this)},n.clear=function(){this.group_rabit.x=667,this.img_rabbit1.x=152,this.img_rabbit1.y=345,this.img_rabbit2.x=309,this.img_rabbit2.y=261,this.img_rabbit3.x=491,this.img_rabbit3.y=330,this.img_rabbit1.scaleX=0,this.img_rabbit1.scaleY=0,this.img_rabbit2.scaleX=0,this.img_rabbit2.scaleY=0,this.img_rabbit3.scaleX=0,this.img_rabbit3.scaleY=0,this.bmpHead1.parent&&(this.bmpHead1.parent.removeChild(this.bmpHead1),this.bmpHead1=null),this.bmpHead2.parent&&(this.bmpHead2.parent.removeChild(this.bmpHead2),this.bmpHead2=null),this.clearHead()},n.clearHead=function(){for(;this.groupHead.numElements>0;){var t=this.groupHead.getElementAt(this.groupHead.numElements-1);t.parent&&t.parent.removeChild(t),e.ZfdyHeadItem.reclaim(t)}},a}(eui.Component);e.Zfdy10=t,egret.registerClass(t,"zfdy.Zfdy10")}(zfdy||(zfdy={}));var zfBag;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/zfdy/zfBag/Zfdy11Skin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return t.open=function(e,a){this.zfdy11||(this.zfdy11=new t),GameApp.Manager.viewManager.TopUIStage.addChild(this.zfdy11),this.zfdy11.setData(e,a)},i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC"),this.img_bg.scaleY=0,this.img_bg.scaleX=0,this.img_bg.alpha=0,this.img_star11.x=866,this.img_star11.y=406-600*Math.tan(Math.PI/6),this.img_star12.x=862,this.img_star12.y=276-600*Math.tan(Math.PI/6),this.img_star13.x=1121,this.img_star13.y=346-600*Math.tan(Math.PI/6),this.img_star14.x=744,this.img_star14.y=296-600*Math.tan(Math.PI/6),this.img_star15.x=1032,this.img_star15.y=445-600*Math.tan(Math.PI/6),this.img_star1.scaleX=0,this.img_star1.scaleY=0,this.img_star0.scaleX=0,this.img_star0.scaleY=0},i.setData=function(e,t){this.bmpHead1=new zfdy.ZfHeadItem,this.bmpHead2=new zfdy.ZfHeadItem,this.bmpHead1.x=232,this.bmpHead1.y=510,this.bmpHead2.x=518,this.bmpHead2.y=510,this.lblText.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffe533>"+window.hexToDec(e.group_name)+"</font>送给"+GameApp.Manager.dataManager.star_name+"<font color=#ffe533>"+window.hexToDec(e.name)+"</font>"),this.bmpHead1.setData("zfdy_5",e.group_face),this.bmpHead1.setQunIcon(),this.bmpHead2.setData("zfdy_6",t.head_img),this.addChild(this.bmpHead1),this.addChild(this.bmpHead2),this.bmpHead1.scaleX=this.bmpHead1.scaleY=0,this.bmpHead2.scaleX=this.bmpHead2.scaleY=0,this.bmpTextBack.width=this.lblText.textWidth+163,egret.Tween.get(this.bmpHead1).wait(0).to({scaleX:1,scaleY:1},1e3),egret.Tween.get(this.bmpHead2).wait(800).to({scaleX:1,scaleY:1},1e3),egret.Tween.get(this.img_star1,{loop:!0}).wait(500).to({scaleX:1,scaleY:1},1e3),egret.Tween.get(this.img_star0,{loop:!0}).wait(800).to({scaleX:1,scaleY:1},1e3),egret.Tween.get(this.img_bg).wait(0).to({scaleX:1,scaleY:1,alpha:1},800),egret.Tween.get(this.img_star11).wait(1100).to({x:266,y:406},600),egret.Tween.get(this.img_star12).wait(900).to({x:262,y:276},1e3),egret.Tween.get(this.img_star13).wait(900).to({x:521,y:346},1e3),egret.Tween.get(this.img_star14).wait(600).to({x:144,y:296},1400),egret.Tween.get(this.img_star15).wait(600).to({x:432,y:445},1400),egret.Tween.get(this).wait(4e3).call(this.close),this.addHead(e)},i.addHead=function(e){for(var t=e.top_user,a=0;a<t.length;a++){var i=zfdy.ZfdyHeadItem.produce();i.bid=e.bid,i.group_openid=e.group_openid,this.groupHead.addChild(i),i.setData(t[a],a+1)}},i.close=function(){this.clear(),this.parent&&this.parent.removeChild(this)},i.clear=function(){this.img_bg.scaleY=0,this.img_bg.scaleX=0,this.img_bg.alpha=0,this.img_star11.x=344,this.img_star11.y=306,this.img_star1.scaleX=0,this.img_star1.scaleY=0,this.img_star0.scaleX=0,this.img_star0.scaleY=0,this.img_star11.x=866,this.img_star11.y=600-750*Math.tan(Math.PI/6),this.img_star12.x=862,this.img_star12.y=276-600*Math.tan(Math.PI/6),this.img_star13.x=1121,this.img_star13.y=346-600*Math.tan(Math.PI/6),this.img_star14.x=744,this.img_star14.y=296-600*Math.tan(Math.PI/6),this.img_star15.x=1032,this.img_star15.y=445-600*Math.tan(Math.PI/6),egret.Tween.removeTweens(this.img_star1),egret.Tween.removeTweens(this.img_star0),egret.Tween.removeTweens(this.bmpHead1),egret.Tween.removeTweens(this.bmpHead2),egret.Tween.removeTweens(this.img_star11),egret.Tween.removeTweens(this.img_star12),egret.Tween.removeTweens(this.img_star13),egret.Tween.removeTweens(this.img_star14),egret.Tween.removeTweens(this.img_star15),this.bmpHead1.parent&&(this.bmpHead1.parent.removeChild(this.bmpHead1),this.bmpHead1=null),this.bmpHead2.parent&&(this.bmpHead2.parent.removeChild(this.bmpHead2),this.bmpHead2=null),this.clearHead()},i.clearHead=function(){for(;this.groupHead.numElements>0;){var e=this.groupHead.getElementAt(this.groupHead.numElements-1);e.parent&&e.parent.removeChild(e),zfdy.ZfdyHeadItem.reclaim(e)}},t}(eui.Component);e.Zfdy11=t,egret.registerClass(t,"zfBag.Zfdy11")}(zfBag||(zfBag={}));var zfBag;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/gameUI/zfdy/zfBag/Zfdy12Skin.exml"}__extends(t,e);var a=__define,i=t,n=i.prototype;return t.open=function(e,a){this.zfdy12||(this.zfdy12=new t),GameApp.Manager.viewManager.TopUIStage.addChild(this.zfdy12),this.zfdy12.setData(e,a)},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC"),this.img_bg.alpha=0,this.img_bottom.alpha=0,this.img_snow1.alpha=0,this.img_snow2.alpha=0,this.img_snow3.alpha=0},n.setData=function(e,t){this.bmpHead1=new zfdy.ZfHeadItem,this.bmpHead2=new zfdy.ZfHeadItem,this.bmpHead1.x=232,this.bmpHead1.y=510,this.bmpHead2.x=518,this.bmpHead2.y=510,this.lblText.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffe533>"+window.hexToDec(e.group_name)+"</font>送给"+GameApp.Manager.dataManager.star_name+"<font color=#ffe533>"+window.hexToDec(e.name)+"</font>"),this.bmpHead1.setData("zfdy_5",e.group_face),this.bmpHead1.setQunIcon(),this.bmpHead2.setData("zfdy_6",t.head_img),this.addChild(this.bmpHead1),this.addChild(this.bmpHead2),this.bmpHead1.scaleX=this.bmpHead1.scaleY=0,this.bmpHead2.scaleX=this.bmpHead2.scaleY=0,this.bmpTextBack.width=this.lblText.textWidth+163,egret.Tween.get(this.bmpHead1).wait(0).to({scaleX:1,scaleY:1},1e3),egret.Tween.get(this.bmpHead2).wait(800).to({scaleX:1,scaleY:1},1e3),egret.Tween.get(this.img_bg).wait(0).to({alpha:1},1e3),egret.Tween.get(this.img_bottom).wait(0).to({alpha:1},1e3),egret.Tween.get(this).wait(1500).to({factor:90}).to({factor:160},5e3),egret.Tween.get(this.img_snow1).wait(1200).to({alpha:1},300).to({y:487},4e3).to({alpha:0},100),egret.Tween.get(this.img_snow2).wait(1500).to({alpha:1},300).to({y:518},4e3).to({alpha:0},100),egret.Tween.get(this.img_snow3).wait(1800).to({alpha:1},300).to({y:504},4e3).to({alpha:0},100),this.addHead(e),egret.Tween.get(this).wait(7e3).call(this.close)},a(n,"factor",function(){return 0},function(e){this.img_sunlight.x=355+200*Math.sin(e*(Math.PI/180)),this.img_sunlight.y=519+200*Math.cos(e*(Math.PI/180))}),n.close=function(){this.img_snow1.y=171,this.img_snow1.x=392,this.img_snow2.y=235,this.img_snow2.x=161,this.img_snow3.y=88,this.img_snow3.x=269,this.img_sunlight.x=556,this.img_sunlight.y=519,this.img_bg.alpha=0,this.img_bottom.alpha=0,this.img_snow1.alpha=0,this.img_snow2.alpha=0,this.img_snow3.alpha=0,this.clear(),this.parent&&this.parent.removeChild(this)},n.addHead=function(e){for(var t=e.top_user,a=0;a<t.length;a++){var i=zfdy.ZfdyHeadItem.produce();i.bid=e.bid,i.group_openid=e.group_openid,this.groupHead.addChild(i),i.setData(t[a],a+1)
}},n.clear=function(){this.bmpHead1.parent&&(this.bmpHead1.parent.removeChild(this.bmpHead1),this.bmpHead1=null),this.bmpHead2.parent&&(this.bmpHead2.parent.removeChild(this.bmpHead2),this.bmpHead2=null),this.clearHead()},n.clearHead=function(){for(;this.groupHead.numElements>0;){var e=this.groupHead.getElementAt(this.groupHead.numElements-1);e.parent&&e.parent.removeChild(e),zfdy.ZfdyHeadItem.reclaim(e)}},t}(eui.Component);e.Zfdy12=t,egret.registerClass(t,"zfBag.Zfdy12")}(zfBag||(zfBag={}));var zfdy;!function(e){var t=function(t){function a(){t.call(this),this.raintime=0,this.israin=!1,this.skinName="src/view/gameUI/zfdy/Zfdy1Skin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.open=function(e,t){this.zfdy1||(this.zfdy1=new a),GameApp.Manager.viewManager.TopUIStage.addChild(this.zfdy1),this.zfdy1.setData(e,t)},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC")},n.setData=function(t,a){this.bmpHead1=new e.ZfHeadItem,this.bmpHead2=new e.ZfHeadItem,this.bmpHead1.x=232,this.bmpHead1.y=510,this.bmpHead2.x=518,this.bmpHead2.y=510,this.bmpIcon1.scaleX=0,this.bmpIcon1.scaleY=0,this.lblText.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffe533>"+window.hexToDec(t.group_name)+"</font>送给"+GameApp.Manager.dataManager.star_name+"<font color=#ffe533>"+window.hexToDec(t.name)+"</font>"),this.bmpHead1.setData("zfdy_5",t.group_face),this.bmpHead1.setQunIcon(),this.bmpHead2.setData("zfdy_6",a.head_img),this.addChild(this.bmpHead1),this.addChild(this.bmpHead2),this.bmpHead1.scaleX=this.bmpHead1.scaleY=0,this.bmpHead2.scaleX=this.bmpHead2.scaleY=0,this.bmpTextBack.width=this.lblText.textWidth+163,egret.Tween.get(this.bmpHead1).wait(0).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.bmpHead2).wait(600).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.bmpIcon1).wait(0).to({scaleX:1,scaleY:1},800,egret.Ease.bounceOut),egret.Tween.get(this.bmpIcon2).to({x:0},2e3).to({visible:!1},0).call(function(){egret.Ticker.getInstance().unregister(this.rain,this)},this),egret.Tween.get(this).wait(2800).call(this.close),egret.Ticker.getInstance().register(this.rain,this),this.addHead(t)},n.addHead=function(t){for(var a=t.top_user,i=0;i<a.length;i++){var n=e.ZfdyHeadItem.produce();n.bid=t.bid,n.group_openid=t.group_openid,this.groupHead.addChild(n),n.setData(a[i],i+1)}},n.clearHead=function(){for(;this.groupHead.numElements>0;){var t=this.groupHead.getElementAt(this.groupHead.numElements-1);t.parent&&t.parent.removeChild(t),e.ZfdyHeadItem.reclaim(t)}},n.rain=function(e){this.raintime+=e,this.israin?this.raintime>=Tools.getInstance().getRandomByNum(100,300)&&(this.raintime=0,this.rainone()):this.raintime>=0&&(this.israin=!0,this.raintime=0)},n.rainone=function(){var e=new eui.Image("zfdy_3");e.x=Tools.getInstance().getRandomByNum(this.bmpIcon2.x+30,this.bmpIcon2.x+160),e.y=170,this.addChild(e),egret.Tween.get(e).to({y:Tools.getInstance().getRandomByNum(250,340)},300).call(function(){e.parent&&(e.parent.removeChild(e),e.source=null,e=null)},this)},n.clear=function(){this.bmpIcon2.visible=!0,this.bmpIcon2.x=548,this.bmpHead1.parent&&(this.bmpHead1.parent.removeChild(this.bmpHead1),this.bmpHead1=null),this.bmpHead2.parent&&(this.bmpHead2.parent.removeChild(this.bmpHead2),this.bmpHead2=null),this.clearHead()},n.close=function(){this.clear(),this.parent&&this.parent.removeChild(this)},a}(eui.Component);e.Zfdy1=t,egret.registerClass(t,"zfdy.Zfdy1")}(zfdy||(zfdy={}));var zfdy;!function(e){var t=function(t){function a(){t.call(this),this.arr=[],this.point=[{bx:275,by:295,ex:89,ey:189},{bx:283,by:372,ex:97,ey:318},{bx:284,by:466,ex:88,ey:440},{bx:394,by:289,ex:532,ey:146},{bx:493,by:282,ex:666,ey:243},{bx:522,by:362,ex:697,ey:356},{bx:459,by:470,ex:630,ey:510}],this.skinName="src/view/gameUI/zfdy/Zfdy2Skin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.open=function(e,t){this.zfdy2||(this.zfdy2=new a),GameApp.Manager.viewManager.TopUIStage.addChild(this.zfdy2),this.zfdy2.setData(e,t)},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC"),this.arr.push(this.bmpl1,this.bmpl2,this.bmpl3,this.bmpt1,this.bmpr1,this.bmpr2,this.bmpr3)},n.setData=function(t,a){this.bmpHead1=new e.ZfHeadItem,this.bmpHead2=new e.ZfHeadItem,this.bmpHead1.x=232,this.bmpHead1.y=510,this.bmpHead2.x=518,this.bmpHead2.y=510,this.bmpIcon1.scaleX=0,this.bmpIcon1.scaleY=0,this.lblText.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffe533>"+window.hexToDec(t.group_name)+"</font>送给"+GameApp.Manager.dataManager.star_name+"<font color=#ffe533>"+window.hexToDec(t.name)+"</font>"),this.bmpHead1.setData("zfdy_5",t.group_face),this.bmpHead1.setQunIcon(),this.bmpHead2.setData("zfdy_6",a.head_img),this.addChild(this.bmpHead1),this.addChild(this.bmpHead2),this.bmpHead1.scaleX=this.bmpHead1.scaleY=0,this.bmpHead2.scaleX=this.bmpHead2.scaleY=0,this.bmpTextBack.width=this.lblText.textWidth+163,egret.Tween.get(this.bmpHead1).wait(0).to({scaleX:1,scaleY:1},600),egret.Tween.get(this.bmpHead2).wait(400).to({scaleX:1,scaleY:1},600),egret.Tween.get(this.bmpIcon1).wait(0).to({scaleX:1,scaleY:1},1200,egret.Ease.bounceOut);for(var i=0;i<this.arr.length;i++){var n=this.arr[i];egret.Tween.get(n).wait(800).to({visible:!0},0).to({x:this.point[i].ex},400,egret.Ease.sineOut).to({visible:!1},0),egret.Tween.get(n).wait(800).to({visible:!0},0).to({y:this.point[i].ey},400,egret.Ease.sineOut).to({visible:!1},0),egret.Tween.get(n).wait(950).to({alpha:.1},250)}egret.Tween.get(this).wait(2200).call(this.close),this.addHead(t)},n.addHead=function(t){for(var a=t.top_user,i=0;i<a.length;i++){var n=e.ZfdyHeadItem.produce();n.bid=t.bid,n.group_openid=t.group_openid,this.groupHead.addChild(n),n.setData(a[i],i+1)}},n.clearHead=function(){for(;this.groupHead.numElements>0;){var t=this.groupHead.getElementAt(this.groupHead.numElements-1);t.parent&&t.parent.removeChild(t),e.ZfdyHeadItem.reclaim(t)}},n.clear=function(){this.bmpHead1.parent&&(this.bmpHead1.parent.removeChild(this.bmpHead1),this.bmpHead1=null),this.bmpHead2.parent&&(this.bmpHead2.parent.removeChild(this.bmpHead2),this.bmpHead2=null);for(var e=0;e<this.arr.length;e++)this.arr[e].visible=!1,this.arr[e].alpha=1,this.arr[e].x=this.point[e].bx,this.arr[e].y=this.point[e].by;this.clearHead()},n.close=function(){this.clear(),this.parent&&this.parent.removeChild(this)},a}(eui.Component);e.Zfdy2=t,egret.registerClass(t,"zfdy.Zfdy2")}(zfdy||(zfdy={}));var zfdy;!function(e){var t=function(t){function a(){t.call(this),this.arr=[],this.skinName="src/view/gameUI/zfdy/Zfdy3Skin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.open=function(e,t){this.zfdy3||(this.zfdy3=new a),GameApp.Manager.viewManager.TopUIStage.addChild(this.zfdy3),this.zfdy3.setData(e,t)},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC"),this.arr.push(this.bmp1,this.bmp2,this.bmp3,this.bmp4,this.bmp5,this.bmp6,this.bmp7,this.bmp8,this.bmp9,this.bmp10);for(var e=0;e<this.arr.length;e++){var t=this.arr[e];t.alpha=0}},n.setData=function(t,a){this.bmpHead1=new e.ZfHeadItem,this.bmpHead2=new e.ZfHeadItem,this.bmpHead1.x=232,this.bmpHead1.y=510,this.bmpHead2.x=518,this.bmpHead2.y=510,this.bmpIcon1.scaleX=0,this.bmpIcon1.scaleY=0,this.lblText.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffe533>"+window.hexToDec(t.group_name)+"</font>送给"+GameApp.Manager.dataManager.star_name+"<font color=#ffe533>"+window.hexToDec(t.name)+"</font>"),this.bmpHead1.setData("zfdy_5",t.group_face),this.bmpHead1.setQunIcon(),this.bmpHead2.setData("zfdy_6",a.head_img),this.addChild(this.bmpHead1),this.addChild(this.bmpHead2),this.bmpHead1.scaleX=this.bmpHead1.scaleY=0,this.bmpHead2.scaleX=this.bmpHead2.scaleY=0,this.bmpTextBack.width=this.lblText.textWidth+163,egret.Tween.get(this.bmpHead1).wait(0).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.bmpHead2).wait(600).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.bmpIcon1).wait(0).to({scaleX:1,scaleY:1},800,egret.Ease.bounceOut);for(var i=0;i<this.arr.length;i++){var n=this.arr[i];egret.Tween.get(n).wait(800+180*i).to({visible:!0},0).to({alpha:1},250)}egret.Tween.get(this).wait(3200).call(this.close),this.addHead(t)},n.addHead=function(t){for(var a=t.top_user,i=0;i<a.length;i++){var n=e.ZfdyHeadItem.produce();n.bid=t.bid,n.group_openid=t.group_openid,this.groupHead.addChild(n),n.setData(a[i],i+1)}},n.clearHead=function(){for(;this.groupHead.numElements>0;){var t=this.groupHead.getElementAt(this.groupHead.numElements-1);t.parent&&t.parent.removeChild(t),e.ZfdyHeadItem.reclaim(t)}},n.clear=function(){this.bmpHead1.parent&&(this.bmpHead1.parent.removeChild(this.bmpHead1),this.bmpHead1=null),this.bmpHead2.parent&&(this.bmpHead2.parent.removeChild(this.bmpHead2),this.bmpHead2=null);for(var e=0;e<this.arr.length;e++){var t=this.arr[e];t.visible=!1,t.alpha=0}this.clearHead()},n.close=function(){this.clear(),this.parent&&this.parent.removeChild(this)},a}(eui.Component);e.Zfdy3=t,egret.registerClass(t,"zfdy.Zfdy3")}(zfdy||(zfdy={}));var zfdy;!function(e){var t=function(t){function a(){t.call(this),this.ntime=0,this.nmaxtime=100,this.nIndex=0,this.skinName="src/view/gameUI/zfdy/Zfdy4Skin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.open=function(e,t){this.zfdy4||(this.zfdy4=new a),GameApp.Manager.viewManager.TopUIStage.addChild(this.zfdy4),this.zfdy4.setData(e,t)},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC"),this.bmpXing1.scaleX=this.bmpXing1.scaleY=0,this.bmpXing2.scaleX=this.bmpXing2.scaleY=0,this.bmpXing3.scaleX=this.bmpXing3.scaleY=0,this.bmpTx.visible=!1},n.setData=function(t,a){this.bmpHead1=new e.ZfHeadItem,this.bmpHead2=new e.ZfHeadItem,this.bmpHead1.x=232,this.bmpHead1.y=510,this.bmpHead2.x=518,this.bmpHead2.y=510,this.bmpIcon1.scaleX=0,this.bmpIcon1.scaleY=0,this.lblText.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffe533>"+window.hexToDec(t.group_name)+"</font>送给"+GameApp.Manager.dataManager.star_name+"<font color=#ffe533>"+window.hexToDec(t.name)+"</font>"),this.bmpHead1.setData("zfdy_5",t.group_face),this.bmpHead1.setQunIcon(),this.bmpHead2.setData("zfdy_6",a.head_img),this.addChild(this.bmpHead1),this.addChild(this.bmpHead2),this.bmpHead1.scaleX=this.bmpHead1.scaleY=0,this.bmpHead2.scaleX=this.bmpHead2.scaleY=0,this.bmpTextBack.width=this.lblText.textWidth+163,egret.Tween.get(this.bmpXing1).to({scaleX:1,scaleY:1},300,egret.Ease.bounceOut),egret.Tween.get(this.bmpXing2).wait(150).to({scaleX:1,scaleY:1},300,egret.Ease.bounceOut),egret.Tween.get(this.bmpXing3).wait(300).to({scaleX:1,scaleY:1},300,egret.Ease.bounceOut),egret.Tween.get(this.bmpHead1).wait(600).to({scaleX:1,scaleY:1},600),egret.Tween.get(this.bmpHead2).wait(1e3).to({scaleX:1,scaleY:1},600),egret.Tween.get(this.bmpIcon1).wait(600).to({scaleX:1,scaleY:1},1200,egret.Ease.bounceOut),egret.Tween.get(this).wait(3200).call(this.close),egret.Ticker.getInstance().register(this.tx,this),this.nmaxtime=1800,this.bmpTx.source="zfdy_4_tx1",this.addHead(t)},n.addHead=function(t){for(var a=t.top_user,i=0;i<a.length;i++){var n=e.ZfdyHeadItem.produce();n.bid=t.bid,n.group_openid=t.group_openid,this.groupHead.addChild(n),n.setData(a[i],i+1)}},n.clearHead=function(){for(;this.groupHead.numElements>0;){var t=this.groupHead.getElementAt(this.groupHead.numElements-1);t.parent&&t.parent.removeChild(t),e.ZfdyHeadItem.reclaim(t)}},n.tx=function(e){this.ntime+=e,this.ntime>=this.nmaxtime&&(7==this.nIndex?(this.ntime=0,this.nIndex=0,egret.Ticker.getInstance().unregister(this.tx,this),this.bmpTx.visible=!1):(this.ntime=0,this.nIndex++,this.bmpTx.visible=!0,this.bmpTx.source="zfdy_4_tx"+this.nIndex,this.nmaxtime=100,console.log(this.nIndex)))},n.clear=function(){this.bmpHead1.parent&&(this.bmpHead1.parent.removeChild(this.bmpHead1),this.bmpHead1=null),this.bmpHead2.parent&&(this.bmpHead2.parent.removeChild(this.bmpHead2),this.bmpHead2=null),this.bmpXing1.scaleX=this.bmpXing1.scaleY=0,this.bmpXing2.scaleX=this.bmpXing2.scaleY=0,this.bmpXing3.scaleX=this.bmpXing3.scaleY=0,this.bmpTx.source=null,this.ntime=0,this.nIndex=0,this.bmpTx.visible=!1,this.clearHead()},n.close=function(){this.clear(),this.parent&&this.parent.removeChild(this)},a}(eui.Component);e.Zfdy4=t,egret.registerClass(t,"zfdy.Zfdy4")}(zfdy||(zfdy={}));var zfdy;!function(e){var t=function(t){function a(){t.call(this),this.imgarr=[],this.skinName="src/view/gameUI/zfdy/Zfdy5Skin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.open=function(e,t){this.zfdy5||(this.zfdy5=new a),GameApp.Manager.viewManager.TopUIStage.addChild(this.zfdy5),this.zfdy5.setData(e,t)},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC"),this.bmpIcon2.alpha=0,this.bmpIcon3.alpha=0,this.imgarr=[this.img1,this.img2,this.img3,this.img4,this.img5,this.img6,this.img7,this.img8];for(var e in this.imgarr){var t=this.imgarr[e];t.scaleX=t.scaleY=0}},n.setData=function(t,a){this.bmpHead1=new e.ZfHeadItem,this.bmpHead2=new e.ZfHeadItem,this.bmpHead1.x=232,this.bmpHead1.y=510,this.bmpHead2.x=518,this.bmpHead2.y=510,this.bmpIcon1.scaleX=0,this.bmpIcon1.scaleY=0,this.lblText.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffe533>"+window.hexToDec(t.group_name)+"</font>送给"+GameApp.Manager.dataManager.star_name+"<font color=#ffe533>"+window.hexToDec(t.name)+"</font>"),this.bmpHead1.setData("zfdy_5",t.group_face),this.bmpHead1.setQunIcon(),this.bmpHead2.setData("zfdy_6",a.head_img),this.addChild(this.bmpHead1),this.addChild(this.bmpHead2),this.bmpHead1.scaleX=this.bmpHead1.scaleY=0,this.bmpHead2.scaleX=this.bmpHead2.scaleY=0,this.bmpTextBack.width=this.lblText.textWidth+163,egret.Tween.get(this.bmpHead1).wait(0).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.bmpHead2).wait(600).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.bmpIcon1).wait(0).to({scaleX:1,scaleY:1},800,egret.Ease.bounceOut),egret.Tween.get(this.bmpIcon2).wait(800).to({alpha:1},400),egret.Tween.get(this.bmpIcon3).wait(800).to({alpha:1},400);for(var i=1e3,n=this.imgarr.length-1;n>=0;n--){var s=parseInt(Tools.getInstance().getRandomByNum(0,this.imgarr.length)+""),r=Tools.getInstance().getRandomByNum(.5,1),o=this.imgarr[s];console.log(o+" "+s),egret.Tween.get(o).wait(i).to({scaleX:r,scaleY:r},300,egret.Ease.bounceOut),this.imgarr.splice(s,1),i+=200}egret.Tween.get(this).wait(2800).call(this.close),this.addHead(t)},n.addHead=function(t){for(var a=t.top_user,i=0;i<a.length;i++){var n=e.ZfdyHeadItem.produce();n.bid=t.bid,n.group_openid=t.group_openid,this.groupHead.addChild(n),n.setData(a[i],i+1)}},n.clearHead=function(){for(;this.groupHead.numElements>0;){var t=this.groupHead.getElementAt(this.groupHead.numElements-1);t.parent&&t.parent.removeChild(t),e.ZfdyHeadItem.reclaim(t)}},n.clear=function(){this.bmpHead1.parent&&(this.bmpHead1.parent.removeChild(this.bmpHead1),this.bmpHead1=null),this.bmpHead2.parent&&(this.bmpHead2.parent.removeChild(this.bmpHead2),this.bmpHead2=null),this.imgarr=[this.img1,this.img2,this.img3,this.img4,this.img5,this.img6,this.img7,this.img8];for(var e in this.imgarr){var t=this.imgarr[e];t.scaleX=t.scaleY=0}this.bmpIcon2.alpha=0,this.bmpIcon3.alpha=0,this.clearHead()},n.close=function(){this.clear(),this.parent&&this.parent.removeChild(this)},a}(eui.Component);e.Zfdy5=t,egret.registerClass(t,"zfdy.Zfdy5")}(zfdy||(zfdy={}));var zfdy;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/zfdy/Zfdy6Skin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.open=function(e,t){this.zfdy6||(this.zfdy6=new a),GameApp.Manager.viewManager.TopUIStage.addChild(this.zfdy6),this.zfdy6.setData(e,t)},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC"),this.bmpIcon1.scaleX=0,this.bmpIcon1.scaleY=0,this.bmpIcon3.scaleX=0,this.bmpIcon3.scaleY=0,this.bmpIcon4.scaleX=0,this.bmpIcon4.scaleY=0,this.bmpIcon2.alpha=0,this.bmpIcon2.alpha=0},n.setData=function(t,a){this.bmpHead1=new e.ZfHeadItem,this.bmpHead2=new e.ZfHeadItem,this.bmpHead1.x=232,this.bmpHead1.y=510,this.bmpHead2.x=518,this.bmpHead2.y=510,this.lblText.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffe533>"+window.hexToDec(t.group_name)+"</font>送给"+GameApp.Manager.dataManager.star_name+"<font color=#ffe533>"+window.hexToDec(t.name)+"</font>"),this.bmpHead1.setData("zfdy_5",t.group_face),this.bmpHead1.setQunIcon(),this.bmpHead2.setData("zfdy_6",a.head_img),this.addChild(this.bmpHead1),this.addChild(this.bmpHead2),this.bmpHead1.scaleX=this.bmpHead1.scaleY=0,this.bmpHead2.scaleX=this.bmpHead2.scaleY=0,this.bmpTextBack.width=this.lblText.textWidth+163,egret.Tween.get(this.bmpHead1).wait(0).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.bmpHead2).wait(600).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.bmpIcon1).wait(0).to({scaleX:1,scaleY:1},800,egret.Ease.bounceOut),egret.Tween.get(this.bmpIcon2).wait(800).to({alpha:1},1e3),egret.Tween.get(this.bmpIcon3).wait(1500).to({x:85,y:416,scaleX:-1,scaleY:1},500,egret.Ease.bounceOut),egret.Tween.get(this.bmpIcon4).wait(2e3).to({x:655,y:416,scaleX:1,scaleY:1},500,egret.Ease.bounceOut),egret.Tween.get(this).wait(2800).call(this.close),this.addHead(t)},n.addHead=function(t){for(var a=t.top_user,i=0;i<a.length;i++){var n=e.ZfdyHeadItem.produce();n.bid=t.bid,n.group_openid=t.group_openid,this.groupHead.addChild(n),n.setData(a[i],i+1)}},n.clearHead=function(){for(;this.groupHead.numElements>0;){var t=this.groupHead.getElementAt(this.groupHead.numElements-1);t.parent&&t.parent.removeChild(t),e.ZfdyHeadItem.reclaim(t)}},n.clear=function(){this.bmpIcon1.scaleX=0,this.bmpIcon1.scaleY=0,this.bmpIcon3.scaleX=0,this.bmpIcon3.scaleY=0,this.bmpIcon4.scaleX=0,this.bmpIcon4.scaleY=0,this.bmpIcon2.alpha=0,this.bmpIcon2.alpha=0,this.bmpIcon3.x=162,this.bmpIcon3.y=500,this.bmpIcon4.x=581,this.bmpIcon4.y=500,this.bmpHead1.parent&&(this.bmpHead1.parent.removeChild(this.bmpHead1),this.bmpHead1=null),this.bmpHead2.parent&&(this.bmpHead2.parent.removeChild(this.bmpHead2),this.bmpHead2=null),this.clearHead()},n.close=function(){this.clear(),this.parent&&this.parent.removeChild(this)},a}(eui.Component);e.Zfdy6=t,egret.registerClass(t,"zfdy.Zfdy6")}(zfdy||(zfdy={}));var zfdy;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/zfdy/Zfdy7Skin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.open=function(e,t){this.zfdy7||(this.zfdy7=new a),GameApp.Manager.viewManager.TopUIStage.addChild(this.zfdy7),this.zfdy7.setData(e,t)},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC"),this.img_twoDog.scaleX=0,this.img_twoDog.scaleY=0,this.img_light.alpha=0,this.probar.value=0},n.setData=function(t,a){this.bmpHead1=new e.ZfHeadItem,this.bmpHead2=new e.ZfHeadItem,this.bmpHead1.x=232,this.bmpHead1.y=510,this.bmpHead2.x=518,this.bmpHead2.y=510,this.lblText.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffe533>"+window.hexToDec(t.group_name)+"</font>送给"+GameApp.Manager.dataManager.star_name+"<font color=#ffe533>"+window.hexToDec(t.name)+"</font>"),this.bmpHead1.setData("zfdy_5",t.group_face),this.bmpHead1.setQunIcon(),this.bmpHead2.setData("zfdy_6",a.head_img),this.addChild(this.bmpHead1),this.addChild(this.bmpHead2),this.bmpHead1.scaleX=this.bmpHead1.scaleY=0,this.bmpHead2.scaleX=this.bmpHead2.scaleY=0,this.bmpTextBack.width=this.lblText.textWidth+163,egret.Tween.get(this.bmpHead1).wait(0).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.bmpHead2).wait(600).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.img_twoDog).wait(0).to({scaleX:1,scaleY:1},800,egret.Ease.bounceOut),egret.Tween.get(this.img_light).wait(800).to({alpha:1},1e3),this.initProgressBar(),this.addHead(t),egret.Tween.get(this).wait(4e3).call(this.close)},n.addHead=function(t){for(var a=t.top_user,i=0;i<a.length;i++){var n=e.ZfdyHeadItem.produce();n.bid=t.bid,n.group_openid=t.group_openid,this.groupHead.addChild(n),n.setData(a[i],i+1)}},n.initProgressBar=function(){var e=this;egret.Tween.get(this.probar).wait(1e3).to({value:100},2e3).call(function(){egret.Tween.removeTweens(e.probar)})},n.clearHead=function(){for(;this.groupHead.numElements>0;){var t=this.groupHead.getElementAt(this.groupHead.numElements-1);t.parent&&t.parent.removeChild(t),e.ZfdyHeadItem.reclaim(t)}},n.clear=function(){this.img_twoDog.scaleX=0,this.img_twoDog.scaleY=0,this.img_light.alpha=0,this.bmpHead1.parent&&(this.bmpHead1.parent.removeChild(this.bmpHead1),this.bmpHead1=null),this.bmpHead2.parent&&(this.bmpHead2.parent.removeChild(this.bmpHead2),this.bmpHead2=null),this.clearHead(),this.probar.value=0},n.close=function(){this.clear(),this.parent&&this.parent.removeChild(this)},a}(eui.Component);e.Zfdy7=t,egret.registerClass(t,"zfdy.Zfdy7")}(zfdy||(zfdy={}));var zfdy;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/zfdy/Zfdy8Skin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.open=function(e,t){this.zfdy8||(this.zfdy8=new a),GameApp.Manager.viewManager.TopUIStage.addChild(this.zfdy8),this.zfdy8.setData(e,t)},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC"),this.img_bg8.scaleX=0,this.img_bg8.scaleY=0,this.img_star.scaleY=0,this.img_star.scaleX=0,this.img_star1.scaleY=0,this.img_star1.scaleX=0,this.img_star2.scaleY=0,this.img_star2.scaleX=0},n.setData=function(t,a){this.bmpHead1=new e.ZfHeadItem,this.bmpHead2=new e.ZfHeadItem,this.bmpHead1.x=232,this.bmpHead1.y=510,this.bmpHead2.x=518,this.bmpHead2.y=510,this.lblText.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffe533>"+window.hexToDec(t.group_name)+"</font>送给"+GameApp.Manager.dataManager.star_name+"<font color=#ffe533>"+window.hexToDec(t.name)+"</font>"),this.bmpHead1.setData("zfdy_5",t.group_face),this.bmpHead1.setQunIcon(),this.bmpHead2.setData("zfdy_6",a.head_img),this.addChild(this.bmpHead1),this.addChild(this.bmpHead2),this.bmpHead1.scaleX=this.bmpHead1.scaleY=0,this.bmpHead2.scaleX=this.bmpHead2.scaleY=0,this.bmpTextBack.width=this.lblText.textWidth+163,egret.Tween.get(this.bmpHead1).wait(0).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.bmpHead2).wait(600).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.img_bg8).wait(0).to({scaleX:1,scaleY:1},800,egret.Ease.bounceOut),egret.Tween.get(this.img_leftWineGlass).wait(800).to({x:185},1e3),egret.Tween.get(this.img_rightWineGlass).wait(800).to({x:350},1e3),egret.Tween.get(this.img_star).wait(1800).to({scaleX:1,scaleY:1},1e3),egret.Tween.get(this.img_star1).wait(2e3).to({scaleX:1,scaleY:1},1e3),egret.Tween.get(this.img_star2).wait(3e3).to({scaleX:1,scaleY:1},1e3),egret.Tween.get(this).wait(5e3).call(this.close),this.addHead(t),this.initProgressBar()},n.addHead=function(t){for(var a=t.top_user,i=0;i<a.length;i++){var n=e.ZfdyHeadItem.produce();n.bid=t.bid,n.group_openid=t.group_openid,this.groupHead.addChild(n),n.setData(a[i],i+1)}},n.initProgressBar=function(){var e=this;egret.Tween.get(this.pro).wait(1e3).to({value:100},2e3).call(function(){egret.Tween.removeTweens(e.pro)})},n.clearHead=function(){for(;this.groupHead.numElements>0;){var t=this.groupHead.getElementAt(this.groupHead.numElements-1);t.parent&&t.parent.removeChild(t),e.ZfdyHeadItem.reclaim(t)}},n.close=function(){this.clear(),this.parent&&this.parent.removeChild(this)},n.clear=function(){this.img_bg8.scaleX=0,this.img_bg8.scaleY=0,this.img_leftWineGlass.x=-268,this.img_rightWineGlass.x=803,this.img_star.scaleX=0,this.img_star.scaleY=0,this.img_star1.scaleX=0,this.img_star1.scaleY=0,this.img_star2.scaleX=0,this.img_star2.scaleY=0,this.bmpHead1.parent&&(this.bmpHead1.parent.removeChild(this.bmpHead1),this.bmpHead1=null),this.bmpHead2.parent&&(this.bmpHead2.parent.removeChild(this.bmpHead2),this.bmpHead2=null),this.clearHead(),this.pro.value=0},a}(eui.Component);e.Zfdy8=t,egret.registerClass(t,"zfdy.Zfdy8")}(zfdy||(zfdy={}));var zfdy;!function(e){var t=function(t){function a(){t.call(this),this.skinName="src/view/gameUI/zfdy/Zfdy9Skin.exml"}__extends(a,t);var i=(__define,a),n=i.prototype;return a.open=function(e,t){this.zfdy9||(this.zfdy9=new a),GameApp.Manager.viewManager.TopUIStage.addChild(this.zfdy9),this.zfdy9.setData(e,t)},n.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC"),this.img_star1.scaleY=0,this.img_star1.scaleX=0,this.img_star2.scaleY=0,this.img_star2.scaleX=0,this.img_roseButton.scaleX=0,this.img_roseButton.scaleY=0,this.img_roseUp.alpha=0},n.setData=function(t,a){this.bmpHead1=new e.ZfHeadItem,this.bmpHead2=new e.ZfHeadItem,this.bmpHead1.x=232,this.bmpHead1.y=510,this.bmpHead2.x=518,this.bmpHead2.y=510,this.lblText.textFlow=(new egret.HtmlTextParser).parser("<font color=#ffe533>"+window.hexToDec(t.group_name)+"</font>送给"+GameApp.Manager.dataManager.star_name+"<font color=#ffe533>"+window.hexToDec(t.name)+"</font>"),this.bmpHead1.setData("zfdy_5",t.group_face),this.bmpHead1.setQunIcon(),this.bmpHead2.setData("zfdy_6",a.head_img),this.addChild(this.bmpHead1),this.addChild(this.bmpHead2),this.bmpHead1.scaleX=this.bmpHead1.scaleY=0,this.bmpHead2.scaleX=this.bmpHead2.scaleY=0,this.bmpTextBack.width=this.lblText.textWidth+163,egret.Tween.get(this.bmpHead1).wait(0).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.bmpHead2).wait(600).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.img_roseButton).wait(0).to({scaleX:.3,scaleY:.3},600).wait(200).to({scaleX:1,scaleY:1,rotation:720},1e3),egret.Tween.get(this.img_roseUp).wait(1800).to({alpha:1},1e3),egret.Tween.get(this.img_star1).wait(2300).to({scaleX:1,scaleY:1},800),egret.Tween.get(this.img_star2).wait(2500).to({scaleX:1,scaleY:1},800),egret.Tween.get(this).wait(4e3).call(this.close),this.addHead(t)},n.addHead=function(t){for(var a=t.top_user,i=0;i<a.length;i++){var n=e.ZfdyHeadItem.produce();n.bid=t.bid,n.group_openid=t.group_openid,this.groupHead.addChild(n),n.setData(a[i],i+1)}},n.close=function(){this.clear(),this.parent&&this.parent.removeChild(this)},n.clear=function(){this.img_roseButton.scaleX=0,this.img_roseButton.scaleY=0,this.img_star2.scaleX=0,this.img_star2.scaleY=0,this.img_star1.scaleX=0,this.img_star1.scaleY=0,this.img_roseUp.alpha=0,this.bmpHead1.parent&&(this.bmpHead1.parent.removeChild(this.bmpHead1),this.bmpHead1=null),this.bmpHead2.parent&&(this.bmpHead2.parent.removeChild(this.bmpHead2),this.bmpHead2=null),this.clearHead()},n.clearHead=function(){for(;this.groupHead.numElements>0;){var t=this.groupHead.getElementAt(this.groupHead.numElements-1);t.parent&&t.parent.removeChild(t),e.ZfdyHeadItem.reclaim(t)}},a}(eui.Component);e.Zfdy9=t,egret.registerClass(t,"zfdy.Zfdy9")}(zfdy||(zfdy={}));var zfdy;!function(e){var t=function(e){function t(){e.call(this),this.group_openid="",this.bid="",this.uid=0,this.skinName="src/view/gameUI/zfdy/ZfdyHeadSkin.exml",this.bmpHead=new module.BaseCircleImage}__extends(t,e);var a=(__define,t),i=a.prototype;return t.produce=function(e,a){void 0===e&&(e="1"),void 0===a&&(a=0),null==t.cacheDict[e]&&(t.cacheDict[e]=[]);var i,n=t.cacheDict[e];return i=n.length>0?n.pop():new t},t.reclaim=function(e,a){void 0===a&&(a="1"),null==t.cacheDict[a]&&(t.cacheDict[a]=[]);var i=t.cacheDict[a];-1==i.indexOf(e)&&(i.push(e),e.clear())},i.childrenCreated=function(){this.addChildAt(this.bmpHead,0),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},i.tap=function(e){userPanel.UserPanel.getInstance().open(this.uid,this.bid,this.group_openid),e.stopPropagation()},i.setData=function(e,t){this.uid=e.user_id,this.bmpRank.source="p1_r"+t,this.bmpHead.setData(e.user_pic,84,0,0,0)},i.load_end=function(e){},i.clear=function(){this.bmpHead.clear(),this.bmpRank.source=null},t.cacheDict={},t}(eui.Component);e.ZfdyHeadItem=t,egret.registerClass(t,"zfdy.ZfdyHeadItem")}(zfdy||(zfdy={}));var zfdy;!function(e){var t=function(e){function t(){e.call(this),this.icon=new module.BaseCircleImage,this.icon.x=16,this.icon.y=16,this.bmpBack=new eui.Image,this.width=152,this.height=152,this.addChild(this.bmpBack),this.addChild(this.icon),this.anchorOffsetX=76,this.anchorOffsetY=76}__extends(t,e);var a=(__define,t),i=a.prototype;return i.setData=function(e,t){this.bmpBack.source=e,this.icon.setData(t,122)},i.setQunIcon=function(){var e=new eui.Image("zfdy_7");e.x=86,e.y=100,this.addChild(e)},t}(eui.Group);e.ZfHeadItem=t,egret.registerClass(t,"zfdy.ZfHeadItem")}(zfdy||(zfdy={}));var view;!function(e){var t;!function(e){var t=function(t){function a(e){t.call(this,e),this.tips={main:"正在加载游戏资源...","public":"正在加载公共资源包..."}}__extends(a,t);var i=(__define,a),n=i.prototype;return n.setStep=function(){this.type="step"},n.show=function(){this.loadingUI||(this.loadingUI=new e.MainLoading),this.BottomUIStage.addChild(this.loadingUI)},n.error=function(e){this.loadingUI.error(e)},n.showModule=function(){this.moduleLoading||(this.moduleLoading=new e.ModuleLoading),this.moduleLoading.show(),this.UIStage.addChild(this.moduleLoading)},n.remove=function(){this.loadingUI&&this.loadingUI.parent&&this.BottomUIStage.removeChild(this.loadingUI),this.moduleLoading&&this.moduleLoading.parent&&(this.moduleLoading.clear(),this.moduleLoading.parent.removeChild(this.moduleLoading))},n.removeM=function(){this.moduleLoading&&this.moduleLoading.parent&&(this.moduleLoading.clear(),this.moduleLoading.parent.removeChild(this.moduleLoading))},n.setLoadingTip=function(e){if(this.loadingUI&&"step"!=this.type){var t=this.tips[e];t?this.loadingUI.setLoadingName(t):this.loadingUI.setLoadingName("正在加载游戏资源...")}},n.setProgress=function(e){this.loadingUI&&this.loadingUI.setProgress(e.itemsLoaded,e.itemsTotal)},n.start=function(){"step"!=this.type&&this.loadingUI&&this.loadingUI.start()},n.end=function(){"step"!=this.type&&this.loadingUI&&this.loadingUI.end()},n.resetPropress=function(){},a}(common.BaseView);e.Loading=t,egret.registerClass(t,"view.loader.Loading")}(t=e.loader||(e.loader={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/loader/MainLoadingSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC")},i.error=function(e){this.lblText.text=""+e},i.setProgress=function(e,t){this.lblText.text=""+parseInt(e/t*100+"")+"%"},i.setLoadingName=function(e){},i.resetProgress=function(){},i.start=function(){},i.clear=function(){},i.end=function(){},i.setTx=function(){},t}(eui.Component);e.MainLoading=t,egret.registerClass(t,"view.loader.MainLoading")}(t=e.loader||(e.loader={}))}(view||(view={}));var view;!function(e){var t;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/view/loader/ModuleLoadingSkin.exml"}__extends(t,e);var a=(__define,t),i=a.prototype;return i.show=function(){},i.clear=function(){},t}(eui.Component);e.ModuleLoading=t,egret.registerClass(t,"view.loader.ModuleLoading")}(t=e.loader||(e.loader={}))}(view||(view={}));var view;!function(e){var t=function(){function t(t){this.resizeEventArray=new Object,this.manager=t,this.viewInit(),this.loading=new e.loader.Loading(this),this.gameMainManager=new mainUI.GameMainManager(this),this.rankStarManager=new rankStar.RankStarManager(this),this.payManager=new pay.PayManager(this),this.starPageManager=new starPage.StarPageManager(this),this.taskManager=new task.TaskManager(this),this.rankGroupManager=new rankGroup.RankGroupManager(this),this.rankGroupContributionManager=new rankGroupContribution.RankGroupContributionManager(this),this.rankUserContributionManager=new rankUserContribution.RankUserContributionManager(this),this.fansRecruitManager=new fansRecruit.FansRecruitManager(this),this.uploadManager=new upload.UploadManager(this),this.newStarManager=new newstar.NewStarManager(this),this.weekPushManage=new weekPush.WeekPushManage(this),this.starFanTVManager=new starfanstv.StarFansTVManager(this),this.monthTieManager=new monthTie.MonthTieManager(this),this.sign=new signIn.SignInManager(this),this.aggregation=new task.AggregationManager(this),this.groupManager=new groupManagement.GroupManager(this),this.groupManagerAudit=new groupManagement.GroupManagementAuditManager(this),this.liveChatRoomManager=new live.LiveChatRoomManager(this),this.headLinesManager=new headLines.HeadlinesManager(this),this.headLinesItemInfoManager=new headLines.HeadLineItemInfoManager(this),this.garbageCollectionManager=new garbageCollection.GarbageCollectionManager(this),this.sweepsTasksManager=new sweepsTasks.SweepsTasksManager(this),this.buyTicketActiveManager=new buyTicketActive.BuyTicketManager(this)
}var a=(__define,t),i=a.prototype;return i.setUIClose=function(e,t,a){void 0===a&&(a=!0),this.uicloseCall&&a&&(this.uicloseCall.call(this.scope),this.uicloseCall=null),this.uicloseCall=e,this.scope=t},i.update=function(e){this.gameMainUI.update(e),live.LiveTalkChat._instance&&live.LiveTalkChat.getInstance().update(e)},i.showBackGroup=function(){this.backGround.visible=!0},i.hideBackGroup=function(){this.backGround.visible=!1},i.viewInit=function(){this.UIStage=new eui.UILayer,this.backGround=new module.BaseEuiImage,this.BottomUIStage=new eui.Group,this.GameEffect=new eui.Group,this.TopUIStage=new eui.Group,this.garbageStage=new eui.Group,this.gameMainUI=new mainUI.GameMainUI,this.UIStage.addChild(this.backGround),this.UIStage.addChild(this.BottomUIStage),this.UIStage.addChild(this.GameEffect),this.UIStage.addChild(this.TopUIStage),this.UIStage.addChild(this.garbageStage),this.manager.stage.addChild(this.UIStage),this.GameEffect.touchChildren=!1,this.GameEffect.touchEnabled=!1,egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this)},i.setBackgroundY=function(e){void 0===e&&(e=0),this.backGround.y=e},i.onResize=function(){for(var e in this.resizeEventArray){var t=this.resizeEventArray[e];t.event.call(t.scope)}},i.addStageResizeEvent=function(e,t,a){"function"==typeof t&&(this.resizeEventArray[e]={event:t,scope:a})},i.removeStageResizeEvent=function(e){delete this.resizeEventArray[e]},i.clickEffect=function(e,t,a){e._cantClick||(e._cantClick=!0,egret.Tween.get(e).to({scaleX:1.1,scaleY:1.1},100).to({scaleX:1,scaleY:1},100).call(function(){e._cantClick=!1,t&&a&&t.call(a)}))},i.clickProxy=function(e,t,a){var i=this;e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){i.clickEffect(e,t,a)},a)},i.maskJsonStage=function(e){void 0===e&&(e=.01),this.jsonMask||(this.jsonMask=new egret.Shape,this.jsonMask.graphics.beginFill(0,1),this.jsonMask.graphics.drawRect(0,0,egret.MainContext.instance.stage.stageWidth,egret.MainContext.instance.stage.stageHeight),this.jsonMask.graphics.endFill(),this.jsonMask.alpha=e,this.jsonMask.touchEnabled=!0),this.TopUIStage.addChild(this.jsonMask)},i.clearJsonMask=function(){this.jsonMask&&this.jsonMask.parent&&this.TopUIStage.removeChild(this.jsonMask)},i.maskStage=function(e,t){void 0===e&&(e=.01),void 0===t&&(t=!1),this.mask||(this.mask=new egret.Shape,this.mask.graphics.beginFill(0,1),this.mask.graphics.drawRect(0,0,egret.MainContext.instance.stage.stageWidth,egret.MainContext.instance.stage.stageHeight),this.mask.graphics.endFill(),this.mask.touchEnabled=!0),this.mask.alpha=e,this.TopUIStage.addChild(this.mask),t&&(this.maskImg||(this.maskImg=new eui.Image("p_jiazai"),this.maskImg.touchEnabled=!1,this.maskImg.anchorOffsetX=49,this.maskImg.anchorOffsetY=48,this.maskImg.x=375,this.maskImg.y=egret.MainContext.instance.stage.stageHeight/2),this.TopUIStage.addChild(this.maskImg),egret.Tween.removeTweens(this.maskImg),egret.Tween.get(this.maskImg,{loop:!0}).to({rotation:360},1e3))},i.clearMask=function(){this.mask&&this.mask.parent&&this.TopUIStage.removeChild(this.mask),this.maskImg&&this.maskImg.parent&&(egret.Tween.removeTweens(this.maskImg),this.maskImg.parent.removeChild(this.maskImg))},i.maskStage2=function(e,t){void 0===e&&(e=.01),void 0===t&&(t=!1),this.mask2||(this.mask2=new egret.Shape,this.mask2.graphics.beginFill(0,1),this.mask2.graphics.drawRect(0,0,egret.MainContext.instance.stage.stageWidth,egret.MainContext.instance.stage.stageHeight),this.mask2.graphics.endFill(),this.mask2.touchEnabled=!0),this.mask2.alpha=e,this.garbageStage.addChild(this.mask2),t&&(this.maskImg2||(this.maskImg2=new eui.Image("p_jiazai"),this.maskImg2.touchEnabled=!1,this.maskImg2.anchorOffsetX=49,this.maskImg2.anchorOffsetY=48,this.maskImg2.x=375,this.maskImg2.y=egret.MainContext.instance.stage.stageHeight/2),this.garbageStage.addChild(this.maskImg2),egret.Tween.removeTweens(this.maskImg2),egret.Tween.get(this.maskImg2,{loop:!0}).to({rotation:360},1e3))},i.clearMask2=function(){this.mask2&&this.mask2.parent&&this.garbageStage.removeChild(this.mask2),this.maskImg2&&this.maskImg2.parent&&(egret.Tween.removeTweens(this.maskImg2),this.maskImg2.parent.removeChild(this.maskImg2))},i.labelAnimation=function(e,t,a,i){void 0===t&&(t=0),void 0===a&&(a=0),void 0===i&&(i="up");var n=this,s=new eui.Label;s.textColor=16742954,s.fontFamily=Tools.getInstance().isIphone()?"Heiti SC":"SimHei",a?(s.text=e,this.TopUIStage.addChild(s),s.x=a):(s.width=620,s.textAlign=egret.HorizontalAlign.CENTER,s.text=e,s.anchorOffsetX=s.width/2,s.anchorOffsetY=10,this.TopUIStage.addChild(s),s.x=egret.MainContext.instance.stage.stageWidth/2),t||(t=2*(egret.MainContext.instance.stage.height-s.height)/3-100),s.y=t,"up"==i?egret.Tween.get(s).to({y:t},1e3).to({y:t-50,alpha:0},600).call(function(){n.TopUIStage.removeChild(s)}):egret.Tween.get(s).to({y:t},1e3).to({y:t+50,alpha:0},600).call(function(){n.TopUIStage.removeChild(s)})},i.createLoading=function(){},i.removeLoading=function(){this.clearJsonMask(),clearInterval(this.setLoading),this.loadingIcon&&this.loadingIcon.parent&&this.UIStage.removeChild(this.loadingIcon)},i.createLoadingImg=function(){this.maskStage(.5),this.txtloadingimg||(this.txtloadingimg=new eui.Label,this.txtloadingimg.size=26,this.txtloadingimg.fontFamily="SimHei",this.txtloadingimg.textColor=16777215,this.txtloadingimg.text="正在读取明星资源包"),this.UIStage.addChild(this.txtloadingimg),this.txtloadingimg.validateNow(),this.txtloadingimg.x=(egret.MainContext.instance.stage.stageWidth-this.txtloadingimg.width)/2,this.txtloadingimg.y=200},i.removeLoadingimg=function(){this.clearMask(),this.txtloadingimg&&this.txtloadingimg.parent&&this.UIStage.removeChild(this.txtloadingimg)},t}();e.ViewManager=t,egret.registerClass(t,"view.ViewManager")}(view||(view={}));